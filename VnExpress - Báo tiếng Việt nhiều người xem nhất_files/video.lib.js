/**videojs player library**/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(J){var X=0;return function(){return X<J.length?{done:!1,value:J[X++]}:{done:!0}}};$jscomp.arrayIterator=function(J){return{next:$jscomp.arrayIteratorImpl(J)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(J,X,rd){J!=Array.prototype&&J!=Object.prototype&&(J[X]=rd.value)};
$jscomp.getGlobal=function(J){return"undefined"!=typeof window&&window===J?J:"undefined"!=typeof global&&null!=global?global:J};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var J=0;return function(X){return $jscomp.SYMBOL_PREFIX+(X||"")+J++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var J=$jscomp.global.Symbol.iterator;J||(J=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[J]&&$jscomp.defineProperty(Array.prototype,J,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var J=$jscomp.global.Symbol.asyncIterator;J||(J=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(J){$jscomp.initSymbolIterator();J={next:J};J[$jscomp.global.Symbol.iterator]=function(){return this};return J};
(function(J,X){"object"===typeof exports&&"undefined"!==typeof module?module.exports=X():"function"===typeof define&&define.amd?define(X):J.videojs=X()})(this,function(){function J(k,g){return g={exports:{}},k(g,g.exports),g.exports}function X(k,g){nf(k).forEach(function(b){return g(k[b],b)})}function rd(k,g){var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return nf(k).reduce(function(e,b){return g(e,k[b],b)},b)}function Y(k){for(var g=arguments.length,b=Array(1<g?g-1:0),e=1;e<g;e++)b[e-
1]=arguments[e];if(Object.assign)return Object.assign.apply(Object,[k].concat(b));b.forEach(function(e){e&&X(e,function(e,b){k[b]=e})});return k}function Ua(k){return!!k&&"object"===("undefined"===typeof k?"undefined":da(k))}function Mb(k){return Ua(k)&&"[object Object]"===fj.call(k)&&k.constructor===Object}function sd(k,g){if(!k||!g)return"";if("function"===typeof q.getComputedStyle){var b=q.getComputedStyle(k);return b?b[g]:""}return""}function of(k){if(/\s/.test(k))throw Error("class has illegal whitespace characters");
}function qb(){return x===q.document}function Nb(k){return Ua(k)&&1===k.nodeType}function pf(){try{return q.parent!==q.self}catch(k){return!0}}function qf(k){return function(g,b){if("string"!==typeof g||!/\S/.test(g))return x[k](null);"string"===typeof b&&/\S/.test(b)&&(b=x.querySelector(b));var e=Nb(b)?b:x;return e[k]&&e[k](g)}}function ea(){var k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},b=arguments[3],e=x.createElement(0<
arguments.length&&void 0!==arguments[0]?arguments[0]:"div");Object.getOwnPropertyNames(k).forEach(function(b){var d=k[b];-1!==b.indexOf("aria-")||"role"===b||"type"===b?(I.warn(td(gj,b,d)),e.setAttribute(b,d)):"textContent"===b?Ob(e,d):e[b]=d});Object.getOwnPropertyNames(g).forEach(function(b){e.setAttribute(b,g[b])});b&&ud(e,b);return e}function Ob(k,g){"undefined"===typeof k.textContent?k.innerText=g:k.textContent=g;return k}function Cc(k,g){g.firstChild?g.insertBefore(k,g.firstChild):g.appendChild(k)}
function rb(k,g){of(g);return k.classList?k.classList.contains(g):(new RegExp("(^|\\s)"+g+"($|\\s)")).test(k.className)}function eb(k,g){k.classList?k.classList.add(g):rb(k,g)||(k.className=(k.className+" "+g).trim());return k}function Pb(k,g){k.classList?k.classList.remove(g):(of(g),k.className=k.className.split(/\s+/).filter(function(b){return b!==g}).join(" "));return k}function rf(k,g,b){var e=rb(k,g);"function"===typeof b&&(b=b(k,g));"boolean"!==typeof b&&(b=!e);if(b!==e)return b?eb(k,g):Pb(k,
g),k}function sf(k,g){Object.getOwnPropertyNames(g).forEach(function(b){var e=g[b];null===e||"undefined"===typeof e||!1===e?k.removeAttribute(b):k.setAttribute(b,!0===e?"":e)})}function Ma(k){var g={};if(k&&k.attributes&&0<k.attributes.length)for(var b=k.attributes,e=b.length-1;0<=e;e--){var l=b[e].name,d=b[e].value;if("boolean"===typeof k[l]||-1!==",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+l+","))d=null!==d?!0:!1;g[l]=d}return g}function tf(){x.body.focus();x.onselectstart=
function(){return!1}}function uf(){x.onselectstart=function(){return!0}}function Qb(k){if(k&&k.getBoundingClientRect&&k.parentNode){var g=k.getBoundingClientRect(),b={};"bottom height left right top width".split(" ").forEach(function(e){void 0!==g[e]&&(b[e]=g[e])});b.height||(b.height=parseFloat(sd(k,"height")));b.width||(b.width=parseFloat(sd(k,"width")));return b}}function vf(k){var g=void 0;k.getBoundingClientRect&&k.parentNode&&(g=k.getBoundingClientRect());if(!g)return{left:0,top:0};k=x.documentElement;
var b=x.body;return{left:Math.round(g.left+(q.pageXOffset||b.scrollLeft)-(k.clientLeft||b.clientLeft||0)),top:Math.round(g.top+(q.pageYOffset||b.scrollTop)-(k.clientTop||b.clientTop||0))}}function vd(k,g){var b={},e=vf(k),l=k.offsetWidth,d=k.offsetHeight,c=e.top;e=e.left;var f=g.pageY,a=g.pageX;g.changedTouches&&(a=g.changedTouches[0].pageX,f=g.changedTouches[0].pageY);b.y=Math.max(0,Math.min(1,(c-f+d)/d));b.x=Math.max(0,Math.min(1,(a-e)/l));return b}function wf(k){return Ua(k)&&3===k.nodeType}function wd(k){for(;k.firstChild;)k.removeChild(k.firstChild);
return k}function xf(k){"function"===typeof k&&(k=k());return(Array.isArray(k)?k:[k]).map(function(g){"function"===typeof g&&(g=g());if(Nb(g)||wf(g))return g;if("string"===typeof g&&/\S/.test(g))return x.createTextNode(g)}).filter(function(g){return g})}function ud(k,g){xf(g).forEach(function(b){return k.appendChild(b)});return k}function yf(k,g){return ud(wd(k),g)}function sb(k){return void 0===k.button&&void 0===k.buttons||0===k.button&&void 0===k.buttons?!0:0!==k.button||1!==k.buttons?!1:!0}function Rb(k){var g=
k[fb];g||(g=k[fb]=gb++);Sb[g]||(Sb[g]={});return Sb[g]}function zf(k){return(k=k[fb])?!!Object.getOwnPropertyNames(Sb[k]).length:!1}function Af(k){var g=k[fb];if(g){delete Sb[g];try{delete k[fb]}catch(b){k.removeAttribute?k.removeAttribute(fb):k[fb]=null}}}function Bf(k,g){var b=Rb(k);0===b.handlers[g].length&&(delete b.handlers[g],k.removeEventListener?k.removeEventListener(g,b.dispatcher,!1):k.detachEvent&&k.detachEvent("on"+g,b.dispatcher));0>=Object.getOwnPropertyNames(b.handlers).length&&(delete b.handlers,
delete b.dispatcher,delete b.disabled);0===Object.getOwnPropertyNames(b).length&&Af(k)}function xd(k,g,b,e){b.forEach(function(b){k(g,b,e)})}function Dc(k){function g(){return!0}function b(){return!1}if(!k||!k.isPropagationStopped){var e=k||q.event;k={};for(var l in e)"layerX"!==l&&"layerY"!==l&&"keyLocation"!==l&&"webkitMovementX"!==l&&"webkitMovementY"!==l&&("returnValue"===l&&e.preventDefault||(k[l]=e[l]));k.target||(k.target=k.srcElement||x);k.relatedTarget||(k.relatedTarget=k.fromElement===k.target?
k.toElement:k.fromElement);k.preventDefault=function(){e.preventDefault&&e.preventDefault();k.returnValue=!1;e.returnValue=!1;k.defaultPrevented=!0};k.defaultPrevented=!1;k.stopPropagation=function(){e.stopPropagation&&e.stopPropagation();k.cancelBubble=!0;e.cancelBubble=!0;k.isPropagationStopped=g};k.isPropagationStopped=b;k.stopImmediatePropagation=function(){e.stopImmediatePropagation&&e.stopImmediatePropagation();k.isImmediatePropagationStopped=g;k.stopPropagation()};k.isImmediatePropagationStopped=
b;if(null!==k.clientX&&void 0!==k.clientX){l=x.documentElement;var d=x.body;k.pageX=k.clientX+(l&&l.scrollLeft||d&&d.scrollLeft||0)-(l&&l.clientLeft||d&&d.clientLeft||0);k.pageY=k.clientY+(l&&l.scrollTop||d&&d.scrollTop||0)-(l&&l.clientTop||d&&d.clientTop||0)}k.which=k.charCode||k.keyCode;null!==k.button&&void 0!==k.button&&(k.button=k.button&1?0:k.button&4?1:k.button&2?2:0)}return k}function ua(k,g,b){if(Array.isArray(g))return xd(ua,k,g,b);var e=Rb(k);e.handlers||(e.handlers={});e.handlers[g]||
(e.handlers[g]=[]);b.guid||(b.guid=gb++);e.handlers[g].push(b);e.dispatcher||(e.disabled=!1,e.dispatcher=function(b,d){if(!e.disabled){b=Dc(b);var c=e.handlers[b.type];if(c){c=c.slice(0);for(var l=0,a=c.length;l<a&&!b.isImmediatePropagationStopped();l++)try{c[l].call(k,b,d)}catch(h){I.error(h)}}}});1===e.handlers[g].length&&(k.addEventListener?(b=!1,Cf&&-1<hj.indexOf(g)&&(b={passive:!0}),k.addEventListener(g,e.dispatcher,b)):k.attachEvent&&k.attachEvent("on"+g,e.dispatcher))}function va(k,g,b){if(zf(k)){var e=
Rb(k);if(e.handlers){if(Array.isArray(g))return xd(va,k,g,b);if(void 0===g)for(var l in e.handlers)Object.prototype.hasOwnProperty.call(e.handlers||{},l)&&(g=k,b=l,e.handlers[b]=[],Bf(g,b));else if(l=e.handlers[g]){if(!b)e.handlers[g]=[];else if(b.guid)for(e=0;e<l.length;e++)l[e].guid===b.guid&&l.splice(e--,1);Bf(k,g)}}}}function tb(k,g,b){var e=zf(k)?Rb(k):{},l=k.parentNode||k.ownerDocument;"string"===typeof g?g={type:g,target:k}:g.target||(g.target=k);g=Dc(g);e.dispatcher&&e.dispatcher.call(k,g,
b);if(l&&!g.isPropagationStopped()&&!0===g.bubbles)tb.call(null,l,g,b);else if(!l&&!g.defaultPrevented&&(k=Rb(g.target),g.target[g.type])){k.disabled=!0;if("function"===typeof g.target[g.type])g.target[g.type]();k.disabled=!1}return!g.defaultPrevented}function Tb(k,g,b){if(Array.isArray(g))return xd(Tb,k,g,b);var e=function d(){va(k,g,d);b.apply(this,arguments)};e.guid=b.guid=b.guid||gb++;ua(k,g,e)}function yd(k,g){g&&(zd=g);q.setTimeout(ij,k)}function Ad(k){var g=(1<arguments.length&&void 0!==arguments[1]?
arguments[1]:{}).eventBusKey;if(g){if(!k[g].nodeName)throw Error('The eventBusKey "'+g+'" does not refer to an element.');k.eventBusEl_=k[g]}else k.eventBusEl_=ea("span",{className:"vjs-event-bus"});Y(k,jj);k.on("dispose",function(){k.off();q.setTimeout(function(){k.eventBusEl_=null},0)});return k}function Df(k,g){Y(k,kj);k.state=Y({},k.state,g);if("function"===typeof k.handleStateChanged&&Ec(k))k.on("statechanged",k.handleStateChanged);return k}function U(k){return"string"!==typeof k?k:k.charAt(0).toUpperCase()+
k.slice(1)}function lj(k,g){return U(k)===U(g)}function R(){for(var k={},g=arguments.length,b=Array(g),e=0;e<g;e++)b[e]=arguments[e];b.forEach(function(e){e&&X(e,function(e,b){Mb(e)?(Mb(k[b])||(k[b]={}),k[b]=R(k[b],e)):k[b]=e})});return k}function Ef(k,g,b,e){var l=b.length-1;if("number"!==typeof e||0>e||e>l)throw Error("Failed to execute '"+k+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+l+").");return b[e][g]}function Bd(k){return void 0===k||0===k.length?{length:0,
start:function(){throw Error("This TimeRanges object is empty");},end:function(){throw Error("This TimeRanges object is empty");}}:{length:k.length,start:Ef.bind(null,"start",0,k),end:Ef.bind(null,"end",1,k)}}function hb(k,g){return Array.isArray(k)?Bd(k):void 0===k||void 0===g?Bd():Bd([[k,g]])}function Ff(k,g){var b=0;if(!g)return 0;k&&k.length||(k=hb(0,0));for(var e=0;e<k.length;e++){var l=k.start(e);var d=k.end(e);d>g&&(d=g);b+=d-l}return b/g}function na(k){if(k instanceof na)return k;"number"===
typeof k?this.code=k:"string"===typeof k?this.message=k:Ua(k)&&("number"===typeof k.code&&(this.code=k.code),Y(this,k));this.message||(this.message=na.defaultMessages[this.code]||"")}function Gf(k){return void 0!==k&&null!==k&&"function"===typeof k.then}function Ub(k){Gf(k)&&k.then(null,function(g){})}function mj(k){for(var g in k)if(k.hasOwnProperty(g))return!1;return!0}function Hf(k,g,b){var e=k;If(g)?(b=g,"string"===typeof k&&(e={uri:k})):e=nj(g,{uri:k});e.callback=b;return e}function Na(k,g,b){g=
Hf(k,g,b);return Jf(g)}function Jf(k){function g(b){clearTimeout(u);b instanceof Error||(b=Error(""+(b||"Unknown XMLHttpRequest Error")));b.statusCode=0;var d=t;e||(e=!0,k.callback(b,d,void 0))}function b(){if(!c){clearTimeout(u);var b=k.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var d=t,h=null;if(0!==b){l.response?d=l.response:(d=l.responseText)||("document"===l.responseType?d=l.responseXML:(d=l.responseXML&&"parsererror"===l.responseXML.documentElement.nodeName,d=""!==l.responseType||
d?null:l.responseXML));if(p)try{d=JSON.parse(d)}catch(Xm){}d={body:d,statusCode:b,method:a,headers:{},url:f,rawRequest:l};l.getAllResponseHeaders&&(d.headers=oj(l.getAllResponseHeaders()))}else h=Error("Internal XMLHttpRequest Error");b=d.body;e||(e=!0,k.callback(h,d,b))}}if("undefined"===typeof k.callback)throw Error("callback argument missing");var e=!1,l=k.xhr||null;l||(l=k.cors||k.useXDR?new Na.XDomainRequest:new Na.XMLHttpRequest);var d,c,f=l.url=k.uri||k.url,a=l.method=k.method||"GET",h=k.body||
k.data,m=l.headers=k.headers||{},n=!!k.sync,p=!1,u,t={body:void 0,headers:{},statusCode:0,method:a,url:f,rawRequest:l};"json"in k&&!1!==k.json&&(p=!0,m.accept||m.Accept||(m.Accept="application/json"),"GET"!==a&&"HEAD"!==a&&(m["content-type"]||m["Content-Type"]||(m["Content-Type"]="application/json"),h=JSON.stringify(!0===k.json?h:k.json)));l.onreadystatechange=function(){4===l.readyState&&setTimeout(b,0)};l.onload=b;l.onerror=g;l.onprogress=function(){};l.onabort=function(){c=!0};l.ontimeout=g;l.open(a,
f,!n,k.username,k.password);n||(l.withCredentials=!!k.withCredentials);!n&&0<k.timeout&&(u=setTimeout(function(){if(!c){c=!0;l.abort("timeout");var e=Error("XMLHttpRequest timeout");e.code="ETIMEDOUT";g(e)}},k.timeout));if(l.setRequestHeader)for(d in m)m.hasOwnProperty(d)&&l.setRequestHeader(d,m[d]);else if(k.headers&&!mj(k.headers))throw Error("Headers cannot be set on an XDomainRequest object");"responseType"in k&&(l.responseType=k.responseType);"beforeSend"in k&&"function"===typeof k.beforeSend&&
k.beforeSend(l);l.send(h||null);return l}function pj(){}function ka(k,g){this.name="ParsingError";this.code=k.code;this.message=g||k.message}function Cd(k){k=k.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);if(!k)return null;if(k[3]){var g=k[3].replace(":","");return 3600*(k[1]|0)+60*(k[2]|0)+(g|0)+(k[4]|0)/1E3}return 59<k[1]?3600*(k[1]|0)+60*(k[2]|0)+(k[4]|0)/1E3:60*(k[1]|0)+(k[2]|0)+(k[4]|0)/1E3}function Vb(){this.values=Dd(null)}function Wb(k,g,b,e){k=e?k.split(e):[k];for(var l in k)"string"===typeof k[l]&&
(e=k[l].split(b),2===e.length&&g(e[0],e[1]))}function qj(k,g,b){function e(){var e=Cd(k);if(null===e)throw new ka(ka.Errors.BadTimeStamp,"Malformed timestamp: "+d);k=k.replace(/^[^\sa-zA-Z-]+/,"");return e}function l(){k=k.replace(/^\s+/,"")}var d=k;l();g.startTime=e();l();if("--\x3e"!==k.substr(0,3))throw new ka(ka.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+d);k=k.substr(3);l();g.endTime=e();l();(function(e,d){var a=new Vb;Wb(e,function(e,d){switch(e){case "region":for(var c=
b.length-1;0<=c;c--)if(b[c].id===d){a.set(e,b[c].region);break}break;case "vertical":a.alt(e,d,["rl","lr"]);break;case "line":c=d.split(",");var l=c[0];a.integer(e,l);a.percent(e,l)?a.set("snapToLines",!1):null;a.alt(e,l,["auto"]);2===c.length&&a.alt("lineAlign",c[1],["start","middle","end"]);break;case "position":c=d.split(",");a.percent(e,c[0]);2===c.length&&a.alt("positionAlign",c[1],["start","middle","end"]);break;case "size":a.percent(e,d);break;case "align":a.alt(e,d,["start","middle","end",
"left","right"])}},/:/,/\s/);d.region=a.get("region",null);d.vertical=a.get("vertical","");d.line=a.get("line","auto");d.lineAlign=a.get("lineAlign","start");d.snapToLines=a.get("snapToLines",!0);d.size=a.get("size",100);d.align=a.get("align","middle");d.position=a.get("position",{start:0,left:0,middle:50,end:100,right:100},d.align);d.positionAlign=a.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},d.align)})(k,g)}function Kf(k,g){function b(){if(!g)return null;
var e=g.match(/^([^<]*)(<[^>]*>?)?/);e=e[1]?e[1]:e[2];g=g.substr(e.length);return e}function e(e){return rj[e]}function l(b){for(;n=b.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)b=b.replace(n[0],e);return b}function d(e,b){var d=sj[e];if(!d)return null;var a=k.document.createElement(d);a.localName=d;(d=tj[e])&&b&&(a[d]=b.trim());return a}for(var c=k.document.createElement("div"),f=c,a,h=[];null!==(a=b());)if("<"===a[0])if("/"===a[1])h.length&&h[h.length-1]===a.substr(2).replace(">","")&&(h.pop(),f=f.parentNode);
else{var m=Cd(a.substr(1,a.length-2));if(m)a=k.document.createProcessingInstruction("timestamp",m),f.appendChild(a);else{var n=a.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);n&&(!(a=d(n[1],n[3]))||Lf[a.localName]&&Lf[a.localName]!==f.localName||(n[2]&&(a.className=n[2].substr(1).replace(/\./g," ")),h.push(n[1]),f.appendChild(a),f=a))}}else f.appendChild(k.document.createTextNode(l(a)));return c}function uj(k){for(var g=0;g<Mf.length;g++){var b=Mf[g];if(k>=b[0]&&k<=b[1])return!0}return!1}
function vj(k){function g(e,b){for(var d=b.childNodes.length-1;0<=d;d--)e.push(b.childNodes[d])}function b(e){if(!e||!e.length)return null;var d=e.pop(),a=d.textContent||d.innerText;if(a)return(d=a.match(/^.*(\n|\r)/))?(e.length=0,d[0]):a;if("ruby"===d.tagName)return b(e);if(d.childNodes)return g(e,d),b(e)}var e=[],l="";if(!k||!k.childNodes)return"ltr";for(g(e,k);l=b(e);)for(var d=0;d<l.length;d++)if(k=l.charCodeAt(d),uj(k))return"rtl";return"ltr"}function Ed(){}function Fc(k,g,b){this.cue=g;this.cueDiv=
Kf(k,g.text);var e={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===g.vertical?"horizontal-tb":"lr"===g.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(e,this.cueDiv);this.div=k.document.createElement("div");e={direction:vj(this.cueDiv),writingMode:""===g.vertical?"horizontal-tb":"lr"===g.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===
g.align?"center":g.align,font:b.font,whiteSpace:"pre-line",position:"absolute"};this.applyStyles(e);this.div.appendChild(this.cueDiv);k=0;switch(g.positionAlign){case "start":k=g.position;break;case "middle":k=g.position-g.size/2;break;case "end":k=g.position-g.size}""===g.vertical?this.applyStyles({left:this.formatStyle(k,"%"),width:this.formatStyle(g.size,"%")}):this.applyStyles({top:this.formatStyle(k,"%"),height:this.formatStyle(g.size,"%")});this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,
"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function fa(k){if(k.div){var g=k.div.offsetHeight;var b=k.div.offsetWidth;var e=k.div.offsetTop;var l=(l=k.div.childNodes)&&(l=l[0])&&l.getClientRects&&l.getClientRects();k=k.div.getBoundingClientRect();var d=l?Math.max(l[0]&&l[0].height||0,k.height/l.length):0}this.left=k.left;this.right=k.right;this.top=
k.top||e;this.height=k.height||g;this.bottom=k.bottom||e+(k.height||g);this.width=k.width||b;this.lineHeight=void 0!==d?d:k.lineHeight}function Va(){}function Fd(k){return"string"!==typeof k?!1:wj[k.toLowerCase()]?k.toLowerCase():!1}function Gc(k,g,b){this.hasBeenReset=!1;var e="",l=!1,d=k,c=g,f=b,a=null,h="",m=!0,n="-1",p="start",u=50,t="middle",N=80,A="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return e},set:function(b){e=""+b}},pauseOnExit:{enumerable:!0,get:function(){return l},
set:function(e){l=!!e}},startTime:{enumerable:!0,get:function(){return d},set:function(e){if("number"!==typeof e)throw new TypeError("Start time must be set to a number.");d=e;this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return c},set:function(e){if("number"!==typeof e)throw new TypeError("End time must be set to a number.");c=e;this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return f},set:function(e){f=""+e;this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return a},
set:function(e){a=e;this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return h},set:function(e){e="string"!==typeof e?!1:xj[e.toLowerCase()]?e.toLowerCase():!1;if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");h=e;this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return m},set:function(e){m=!!e;this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return n},set:function(e){if("number"!==typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");
n=e;this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return p},set:function(e){e=Fd(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");p=e;this.hasBeenReset=!0}},position:{enumerable:!0,get:function(){return u},set:function(e){if(0>e||100<e)throw Error("Position must be between 0 and 100.");u=e;this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return t},set:function(e){e=Fd(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");
t=e;this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return N},set:function(e){if(0>e||100<e)throw Error("Size must be between 0 and 100.");N=e;this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return A},set:function(e){e=Fd(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");A=e;this.hasBeenReset=!0}}});this.displayState=void 0}function Xb(k){return"number"===typeof k&&0<=k&&100>=k}function yj(k,g,b,e){var l=4<arguments.length&&void 0!==arguments[4]?arguments[4]:
{},d=k.textTracks();l.kind=g;b&&(l.label=b);e&&(l.language=e);l.tech=k;l=new la.text.TrackClass(l);d.addTrack(l);return l}function zj(k,g,b){k.setTimeout(function(){return ib(g,jb[g.type],b,k)},1)}function Aj(k,g){k.forEach(function(b){return b.setTech&&b.setTech(g)})}function Nf(k,g,b){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,l="call"+U(b);l=k.reduce(Gd(l),e);l=(e=l===Hc)?null:g[b](l);for(var d=k.length-1;0<=d;d--){var c=k[d];if(c[b])c[b](e,l)}return l}function Gd(k){return function(g,
b){return g===Hc?Hc:b[k]?b[k](g):g}}function Bj(k,g){var b=Hd[k.id()],e=null;if(void 0===b||null===b)return e=g(k),Hd[k.id()]=[[g,e]],e;for(var l=0;l<b.length;l++){var d=b[l];d[0]===g&&(e=d[1])}null===e&&(e=g(k),b.push([g,e]));return e}function ib(){var k=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],b=arguments[2],e=arguments[3],l=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[],d=5<arguments.length&&void 0!==arguments[5]?
arguments[5]:!1,c=g[0],f=g.slice(1);if("string"===typeof c)ib(k,jb[c],b,e,l,d);else if(c){var a=Bj(e,c);if(!a.setSource)return l.push(a),ib(k,f,b,e,l,d);a.setSource(Y({},k),function(c,g){if(c)return ib(k,f,b,e,l,d);l.push(a);ib(g,k.type===g.type?f:jb[g.type],b,e,l,d)})}else f.length?ib(k,f,b,e,l,d):d?b(k,l):ib(k,jb["*"],b,e,l,!0)}function Of(k){var g=Pf(k.src);!k.type&&g&&(k.type=g);return k}function Id(k,g){if(4===k.length)var b=k[1]+k[1]+k[2]+k[2]+k[3]+k[3];else if(7===k.length)b=k.slice(1);else throw Error("Invalid color code provided, "+
k+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(b.slice(0,2),16)+","+parseInt(b.slice(2,4),16)+","+parseInt(b.slice(4,6),16)+","+g+")"}function ub(k){return Jd(k,1<arguments.length&&void 0!==arguments[1]?arguments[1]:k)}function Qf(k,g){g&&(k=g(k));if(k&&"none"!==k)return k}function r(k,g,b){var e=r.getPlayer(k);if(e)return g&&I.warn('Player "'+k+'" is already initialised. Options will not be applied.'),b&&e.ready(b),e;var l="string"===typeof k?Ra("#"+Rf(k)):k;if(!Nb(l))throw new TypeError("The element or ID supplied is not valid. (videojs)");
x.body.contains(l)||I.warn("The element supplied is not included in the DOM");g=g||{};r.hooks("beforesetup").forEach(function(e){e=e(l,R(g));!Ua(e)||Array.isArray(e)?I.error("please return an object in beforesetup hooks"):g=R(g,e)});e=new (v.getComponent("Player"))(l,g,b);r.hooks("setup").forEach(function(b){return b(e)});return e}function Sf(k,g){return function(b){var e=this;if(g){if(vb&&!b)return b=g.toString().replace(/^function.+?{/,"").slice(0,-1),b=Tf(b),this[Kd]=new vb(b),Cj(this[Kd],b),this[Kd];
var l={postMessage:function(b){e.onmessage&&setTimeout(function(){e.onmessage({data:b,target:l})})}};g.call(l);this.postMessage=function(b){setTimeout(function(){l.onmessage({data:b,target:e})})};this.isThisThread=!0}else return new vb(k)}}function Tf(k){try{return wb.createObjectURL(new Blob([k],{type:"application/javascript"}))}catch(b){var g=new Dj;g.append(k);return wb.createObjectURL(g.getBlob(type))}}function Cj(k,g){if(k&&g){var b=k.terminate;k.objURL=g;k.terminate=function(){k.objURL&&wb.revokeObjectURL(k.objURL);
b.call(k)}}}function Yb(){}var Zb="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},q="undefined"!==typeof window?window:"undefined"!==typeof Zb?Zb:"undefined"!==typeof self?self:{},Uf={},Vf=Object.freeze({"default":Uf}),Ej=Vf&&Uf||Vf,Wf="undefined"!==typeof Zb?Zb:"undefined"!==typeof window?window:{};if("undefined"!==typeof document)var Ld=document;else(Ld=Wf["__GLOBAL_DOCUMENT_CACHE@4"])||(Ld=Wf["__GLOBAL_DOCUMENT_CACHE@4"]=Ej);var x=Ld,wa=void 0,
Ic="info",Ea=[],Jc=function(k,g){var b=wa.levels[Ic],e=new RegExp("^("+b+")$");"log"!==k&&g.unshift(k.toUpperCase()+":");Ea&&Ea.push([].concat(g));g.unshift("VIDEOJS:");if(q.console){var l=q.console[k];l||"debug"!==k||(l=q.console.info||q.console.log);if(l&&b&&e.test(k))l[Array.isArray(g)?"apply":"call"](q.console,g)}};wa=function(){for(var k=arguments.length,g=Array(k),b=0;b<k;b++)g[b]=arguments[b];Jc("log",g)};wa.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",
warn:"warn|error",error:"error",DEFAULT:Ic};wa.level=function(k){if("string"===typeof k){if(!wa.levels.hasOwnProperty(k))throw Error('"'+k+'" in not a valid log level');Ic=k}return Ic};wa.history=function(){return Ea?[].concat(Ea):[]};wa.history.clear=function(){Ea&&(Ea.length=0)};wa.history.disable=function(){null!==Ea&&(Ea.length=0,Ea=null)};wa.history.enable=function(){null===Ea&&(Ea=[])};wa.error=function(){for(var k=arguments.length,g=Array(k),b=0;b<k;b++)g[b]=arguments[b];return Jc("error",
g)};wa.warn=function(){for(var k=arguments.length,g=Array(k),b=0;b<k;b++)g[b]=arguments[b];return Jc("warn",g)};wa.debug=function(){for(var k=arguments.length,g=Array(k),b=0;b<k;b++)g[b]=arguments[b];return Jc("debug",g)};var I=wa,td=function(k){for(var g="",b=0;b<arguments.length;b++)g+=k[b].replace(/\n\r?\s*/g,"")+(arguments[b+1]||"");return g};$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var da="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(k){return typeof k}:
function(k){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();return k&&"function"===typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},y=function(k,g){if(!(k instanceof g))throw new TypeError("Cannot call a class as a function");},D=function(k,g){if("function"!==typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);k.prototype=Object.create(g&&g.prototype,{constructor:{value:k,enumerable:!1,writable:!0,
configurable:!0}});g&&(Object.setPrototypeOf?Object.setPrototypeOf(k,g):k.__proto__=g)},C=function(k,g){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||"object"!==typeof g&&"function"!==typeof g?k:g},Md=function(k,g){k.raw=g;return k},fj=Object.prototype.toString,nf=function(k){return Ua(k)?Object.keys(k):[]},gj=Md(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set ",
" to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]),Ra=qf("querySelector"),Xf=qf("querySelectorAll"),Yf=Object.freeze({isReal:qb,isEl:Nb,isInFrame:pf,createEl:ea,textContent:Ob,prependTo:Cc,hasClass:rb,addClass:eb,removeClass:Pb,toggleClass:rf,setAttributes:sf,getAttributes:Ma,getAttribute:function(k,g){return k.getAttribute(g)},
setAttribute:function(k,g,b){k.setAttribute(g,b)},removeAttribute:function(k,g){k.removeAttribute(g)},blockTextSelection:tf,unblockTextSelection:uf,getBoundingClientRect:Qb,findPosition:vf,getPointerPosition:vd,isTextNode:wf,emptyEl:wd,normalizeContent:xf,appendContent:ud,insertContent:yf,isSingleLeftClick:sb,$:Ra,$$:Xf}),gb=1,Sb={},fb="vdata"+(new Date).getTime(),Cf=!1;(function(){try{var k=Object.defineProperty({},"passive",{get:function(){Cf=!0}});q.addEventListener("test",null,k);q.removeEventListener("test",
null,k)}catch(g){}})();var hj=["touchstart","touchmove"],Fj=Object.freeze({fixEvent:Dc,on:ua,off:va,trigger:tb,one:Tb}),Nd=!1,zd=void 0,ij=function(){if(qb()&&!1!==zd.options.autoSetup){var k=Array.prototype.slice.call(x.getElementsByTagName("video")),g=Array.prototype.slice.call(x.getElementsByTagName("audio")),b=Array.prototype.slice.call(x.getElementsByTagName("video-js"));if((k=k.concat(g,b))&&0<k.length)for(g=0,b=k.length;g<b;g++){var e=k[g];if(e&&e.getAttribute)void 0===e.player&&null!==e.getAttribute("data-setup")&&
zd(e);else{yd(1);break}}else Nd||yd(1)}};qb()&&"complete"===x.readyState?Nd=!0:Tb(q,"load",function(){Nd=!0});var Zf=function(k){var g=x.createElement("style");g.className=k;return g},$f=function(k,g){k.styleSheet?k.styleSheet.cssText=g:k.textContent=g},F=function(k,g,b){g.guid||(g.guid=gb++);var e=function(){return g.apply(k,arguments)};e.guid=b?b+"_"+g.guid:g.guid;return e},xb=function(k,g){var b=Date.now();return function(){var e=Date.now();e-b>=g&&(k.apply(void 0,arguments),b=e)}},Gj=function(k,
g,b){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:q,l=void 0,d=function(){var d=this,f=arguments,a=function(){a=l=null;b||k.apply(d,f)};!l&&b&&k.apply(d,f);e.clearTimeout(l);l=e.setTimeout(a,g)};d.cancel=function(){e.clearTimeout(l);l=null};return d},O=function(){};O.prototype.allowedEvents_={};O.prototype.on=function(k,g){var b=this.addEventListener;this.addEventListener=function(){};ua(this,k,g);this.addEventListener=b};O.prototype.addEventListener=O.prototype.on;O.prototype.off=
function(k,g){va(this,k,g)};O.prototype.removeEventListener=O.prototype.off;O.prototype.one=function(k,g){var b=this.addEventListener;this.addEventListener=function(){};Tb(this,k,g);this.addEventListener=b};O.prototype.trigger=function(k){var g=k.type||k;"string"===typeof k&&(k={type:g});k=Dc(k);if(this.allowedEvents_[g]&&this["on"+g])this["on"+g](k);tb(this,k)};O.prototype.dispatchEvent=O.prototype.trigger;var $b=void 0;O.prototype.queueTrigger=function(k){var g=this;$b||($b=new Map);var b=k.type||
k,e=$b.get(this);e||(e=new Map,$b.set(this,e));var l=e.get(b);e["delete"](b);q.clearTimeout(l);l=q.setTimeout(function(){0===e.size&&(e=null,$b["delete"](g));g.trigger(k)},0);e.set(b,l)};var Ec=function(k){return k instanceof O||!!k.eventBusEl_&&["on","one","off","trigger"].every(function(g){return"function"===typeof k[g]})},ag=function(k){return"string"===typeof k&&/\S/.test(k)||Array.isArray(k)&&!!k.length},Od=function(k){if(!k.nodeName&&!Ec(k))throw Error("Invalid target; must be a DOM node or evented object.");
},bg=function(k){if(!ag(k))throw Error("Invalid event type; must be a non-empty string or array.");},cg=function(k){if("function"!==typeof k)throw Error("Invalid listener; must be a function.");},dg=function(k,g){var b=3>g.length||g[0]===k||g[0]===k.eventBusEl_;if(b){var e=k.eventBusEl_;3<=g.length&&g.shift();var l=g[0];var d=g[1]}else e=g[0],l=g[1],d=g[2];Od(e);bg(l);cg(d);d=F(k,d);return{isTargetingSelf:b,target:e,type:l,listener:d}},ac=function(k,g,b,e){Od(k);if(k.nodeName)Fj[g](k,b,e);else k[g](b,
e)},jj={on:function(){for(var k=this,g=arguments.length,b=Array(g),e=0;e<g;e++)b[e]=arguments[e];g=dg(this,b);b=g.isTargetingSelf;var l=g.target,d=g.type,c=g.listener;ac(l,"on",d,c);if(!b){var f=function(){return k.off(l,d,c)};f.guid=c.guid;g=function(){return k.off("dispose",f)};g.guid=c.guid;ac(this,"on","dispose",f);ac(l,"on","dispose",g)}},one:function(){for(var k=this,g=arguments.length,b=Array(g),e=0;e<g;e++)b[e]=arguments[e];g=dg(this,b);var l=g.target,d=g.type,c=g.listener;g.isTargetingSelf?
ac(l,"one",d,c):(g=function a(){for(var e=arguments.length,b=Array(e),g=0;g<e;g++)b[g]=arguments[g];k.off(l,d,a);c.apply(null,b)},g.guid=c.guid,ac(l,"one",d,g))},off:function(k,g,b){!k||ag(k)?va(this.eventBusEl_,k,g):(Od(k),bg(g),cg(b),b=F(this,b),this.off("dispose",b),k.nodeName?(va(k,g,b),va(k,"dispose",b)):Ec(k)&&(k.off(g,b),k.off("dispose",b)))},trigger:function(k,g){return tb(this.eventBusEl_,k,g)}},kj={state:{},setState:function(k){var g=this;"function"===typeof k&&(k=k());var b=void 0;X(k,
function(e,l){g.state[l]!==e&&(b=b||{},b[l]={from:g.state[l],to:e});g.state[l]=e});b&&Ec(this)&&this.trigger({changes:b,type:"statechanged"});return b}},v=function(){function k(g,b,e){y(this,k);this.player_=!g&&this.play?g=this:g;this.options_=R({},this.options_);b=this.options_=R(this.options_,b);this.id_=b.id||b.el&&b.el.id;this.id_||(this.id_=(g&&g.id&&g.id()||"no_player")+"_component_"+gb++);this.name_=b.name||null;b.el?this.el_=b.el:!1!==b.createEl&&(this.el_=this.createEl());!1!==b.evented&&
Ad(this,{eventBusKey:this.el_?"el_":null});Df(this,this.constructor.defaultState);this.children_=[];this.childIndex_={};this.childNameIndex_={};!1!==b.initChildren&&this.initChildren();this.ready(e);!1!==b.reportTouchActivity&&this.enableTouchActivity()}k.prototype.dispose=function(){this.trigger({type:"dispose",bubbles:!1});if(this.children_)for(var g=this.children_.length-1;0<=g;g--)this.children_[g].dispose&&this.children_[g].dispose();this.childNameIndex_=this.childIndex_=this.children_=null;
this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),Af(this.el_),this.el_=null);this.player_=null};k.prototype.player=function(){return this.player_};k.prototype.options=function(g){I.warn("this.options() has been deprecated and will be moved to the constructor in 6.0");return g?this.options_=R(this.options_,g):this.options_};k.prototype.el=function(){return this.el_};k.prototype.createEl=function(g,b,e){return ea(g,b,e)};k.prototype.localize=function(g,b){var e=2<arguments.length&&
void 0!==arguments[2]?arguments[2]:g,l=this.player_.language&&this.player_.language(),d=this.player_.languages&&this.player_.languages(),c=d&&d[l];l=l&&l.split("-")[0];d=d&&d[l];c&&c[g]?e=c[g]:d&&d[g]&&(e=d[g]);b&&(e=e.replace(/\{(\d+)\}/g,function(e,d){var a=b[d-1],c=a;"undefined"===typeof a&&(c=e);return c}));return e};k.prototype.contentEl=function(){return this.contentEl_||this.el_};k.prototype.id=function(){return this.id_};k.prototype.name=function(){return this.name_};k.prototype.children=
function(){return this.children_};k.prototype.getChildById=function(g){return this.childIndex_[g]};k.prototype.getChild=function(g){if(g)return g=U(g),this.childNameIndex_[g]};k.prototype.addChild=function(g){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.children_.length,l=void 0;if("string"===typeof g){l=U(g);var d=b.componentClass||l;b.name=l;var c=k.getComponent(d);if(!c)throw Error("Component "+d+" does not exist");
if("function"!==typeof c)return null;b=new c(this.player_||this,b)}else b=g;this.children_.splice(e,0,b);"function"===typeof b.id&&(this.childIndex_[b.id()]=b);(l=l||b.name&&U(b.name()))&&(this.childNameIndex_[l]=b);"function"===typeof b.el&&b.el()&&(e=this.contentEl().children[e]||null,this.contentEl().insertBefore(b.el(),e));return b};k.prototype.removeChild=function(g){"string"===typeof g&&(g=this.getChild(g));if(g&&this.children_){for(var b=!1,e=this.children_.length-1;0<=e;e--)if(this.children_[e]===
g){b=!0;this.children_.splice(e,1);break}b&&(this.childIndex_[g.id()]=null,this.childNameIndex_[g.name()]=null,(b=g.el())&&b.parentNode===this.contentEl()&&this.contentEl().removeChild(g.el()))}};k.prototype.initChildren=function(){var g=this,b=this.options_.children;if(b){var e=this.options_,l=void 0,d=k.getComponent("Tech");l=Array.isArray(b)?b:Object.keys(b);l.concat(Object.keys(this.options_).filter(function(e){return!l.some(function(b){return"string"===typeof b?e===b:e===b.name})})).map(function(e){if("string"===
typeof e){var d=e;e=b[d]||g.options_[d]||{}}else d=e.name;return{name:d,opts:e}}).filter(function(e){return(e=k.getComponent(e.opts.componentClass||U(e.name)))&&!d.isTech(e)}).forEach(function(b){var d=b.name;b=b.opts;void 0!==e[d]&&(b=e[d]);!1!==b&&(!0===b&&(b={}),b.playerOptions=g.options_.playerOptions,(b=g.addChild(d,b))&&(g[d]=b))})}};k.prototype.buildCSSClass=function(){return""};k.prototype.ready=function(g){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;g&&(this.isReady_?
b?g.call(this):this.setTimeout(g,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(g)))};k.prototype.triggerReady=function(){this.isReady_=!0;this.setTimeout(function(){var g=this.readyQueue_;this.readyQueue_=[];g&&0<g.length&&g.forEach(function(b){b.call(this)},this);this.trigger("ready")},1)};k.prototype.$=function(g,b){return Ra(g,b||this.contentEl())};k.prototype.$$=function(g,b){return Xf(g,b||this.contentEl())};k.prototype.hasClass=function(g){return rb(this.el_,g)};k.prototype.addClass=
function(g){eb(this.el_,g)};k.prototype.removeClass=function(g){Pb(this.el_,g)};k.prototype.toggleClass=function(g,b){rf(this.el_,g,b)};k.prototype.show=function(){this.removeClass("vjs-hidden")};k.prototype.hide=function(){this.addClass("vjs-hidden")};k.prototype.lockShowing=function(){this.addClass("vjs-lock-showing")};k.prototype.unlockShowing=function(){this.removeClass("vjs-lock-showing")};k.prototype.getAttribute=function(g){return this.el_.getAttribute(g)};k.prototype.setAttribute=function(g,
b){this.el_.setAttribute(g,b)};k.prototype.removeAttribute=function(g){this.el_.removeAttribute(g)};k.prototype.width=function(g,b){return this.dimension("width",g,b)};k.prototype.height=function(g,b){return this.dimension("height",g,b)};k.prototype.dimensions=function(g,b){this.width(g,!0);this.height(b)};k.prototype.dimension=function(g,b,e){if(void 0!==b){if(null===b||b!==b)b=0;-1!==(""+b).indexOf("%")||-1!==(""+b).indexOf("px")?this.el_.style[g]=b:this.el_.style[g]="auto"===b?"":b+"px";e||this.trigger("componentresize")}else{if(!this.el_)return 0;
b=this.el_.style[g];e=b.indexOf("px");return-1!==e?parseInt(b.slice(0,e),10):parseInt(this.el_["offset"+U(g)],10)}};k.prototype.currentDimension=function(g){var b=0;if("width"!==g&&"height"!==g)throw Error("currentDimension only accepts width or height value");"function"===typeof q.getComputedStyle&&(b=q.getComputedStyle(this.el_),b=b.getPropertyValue(g)||b[g]);b=parseFloat(b);0===b&&(g="offset"+U(g),b=this.el_[g]);return b};k.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),
height:this.currentDimension("height")}};k.prototype.currentWidth=function(){return this.currentDimension("width")};k.prototype.currentHeight=function(){return this.currentDimension("height")};k.prototype.focus=function(){this.el_.focus()};k.prototype.blur=function(){this.el_.blur()};k.prototype.emitTapEvents=function(){var g=0,b=null,e=void 0;this.on("touchstart",function(d){1===d.touches.length&&(b={pageX:d.touches[0].pageX,pageY:d.touches[0].pageY},g=(new Date).getTime(),e=!0)});this.on("touchmove",
function(d){if(1<d.touches.length)e=!1;else if(b){var c=d.touches[0].pageX-b.pageX;d=d.touches[0].pageY-b.pageY;10<Math.sqrt(c*c+d*d)&&(e=!1)}});var l=function(){e=!1};this.on("touchleave",l);this.on("touchcancel",l);this.on("touchend",function(d){b=null;!0===e&&200>(new Date).getTime()-g&&(d.preventDefault(),this.trigger("tap"))})};k.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var g=F(this.player(),this.player().reportUserActivity),b=void 0;this.on("touchstart",
function(){g();this.clearInterval(b);b=this.setInterval(g,250)});var e=function(e){g();this.clearInterval(b)};this.on("touchmove",g);this.on("touchend",e);this.on("touchcancel",e)}};k.prototype.setTimeout=function(g,b){var e=this;g=F(this,g);var l=q.setTimeout(function(){e.off("dispose",d);g()},b);var d=function(){return e.clearTimeout(l)};d.guid="vjs-timeout-"+l;this.on("dispose",d);return l};k.prototype.clearTimeout=function(g){q.clearTimeout(g);var b=function(){};b.guid="vjs-timeout-"+g;this.off("dispose",
b);return g};k.prototype.setInterval=function(g,b){var e=this;g=F(this,g);var l=q.setInterval(g,b),d=function(){return e.clearInterval(l)};d.guid="vjs-interval-"+l;this.on("dispose",d);return l};k.prototype.clearInterval=function(g){q.clearInterval(g);var b=function(){};b.guid="vjs-interval-"+g;this.off("dispose",b);return g};k.prototype.requestAnimationFrame=function(g){var b=this;if(this.supportsRaf_){g=F(this,g);var e=q.requestAnimationFrame(function(){b.off("dispose",l);g()});var l=function(){return b.cancelAnimationFrame(e)};
l.guid="vjs-raf-"+e;this.on("dispose",l);return e}return this.setTimeout(g,1E3/60)};k.prototype.cancelAnimationFrame=function(g){if(this.supportsRaf_){q.cancelAnimationFrame(g);var b=function(){};b.guid="vjs-raf-"+g;this.off("dispose",b);return g}return this.clearTimeout(g)};k.registerComponent=function(g,b){if("string"!==typeof g||!g)throw Error('Illegal component name, "'+g+'"; must be a non-empty string.');var e=k.getComponent("Tech");e=e&&e.isTech(b);var l=k===b||k.prototype.isPrototypeOf(b.prototype);
if(e||!l)throw Error('Illegal component, "'+g+'"; '+(e?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");g=U(g);k.components_||(k.components_={});e=k.getComponent("Player");if("Player"===g&&e&&e.players){var d=e.players;e=Object.keys(d);if(d&&0<e.length&&e.map(function(e){return d[e]}).every(Boolean))throw Error("Can not register Player component after player has been created.");}return k.components_[g]=b};k.getComponent=function(g){if(g&&(g=U(g),k.components_&&
k.components_[g]))return k.components_[g]};return k}();v.prototype.supportsRaf_="function"===typeof q.requestAnimationFrame&&"function"===typeof q.cancelAnimationFrame;v.registerComponent("Component",v);var ca=q.navigator&&q.navigator.userAgent||"",eg=/AppleWebKit\/([\d.]+)/i.exec(ca),Hj=eg?parseFloat(eg.pop()):null,Pd=/iPad/i.test(ca),Qd=/iPhone/i.test(ca)&&!Pd,fg=/iPod/i.test(ca),Oa=Qd||Pd||fg,Ij=function(){var k=ca.match(/OS (\d+)_/i);return k&&k[1]?k[1]:null}(),kb=/Android/i.test(ca),Rd=function(){var k=
ca.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!k)return null;var g=k[1]&&parseFloat(k[1]),b=k[2]&&parseFloat(k[2]);return g&&b?parseFloat(k[1]+"."+k[2]):g?g:null}(),gg=kb&&5>Rd&&537>Hj,hg=/Firefox/i.test(ca),Sd=/Edge/i.test(ca),Xa=!Sd&&(/Chrome/i.test(ca)||/CriOS/i.test(ca)),ig=function(){var k=ca.match(/(Chrome|CriOS)\/(\d+)/);return k&&k[2]?parseFloat(k[2]):null}(),jg=function(){var k=/MSIE\s(\d+)\.\d/.exec(ca);k=k&&parseFloat(k[1]);!k&&/Trident\/7.0/i.test(ca)&&/rv:11.0/.test(ca)&&(k=11);
return k}(),kg=/Safari/i.test(ca)&&!Xa&&!kb&&!Sd,lg=(kg||Oa)&&!Xa,Kc=qb()&&("ontouchstart"in q||q.navigator.maxTouchPoints||q.DocumentTouch&&q.document instanceof q.DocumentTouch),Jj=Object.freeze({IS_IPAD:Pd,IS_IPHONE:Qd,IS_IPOD:fg,IS_IOS:Oa,IOS_VERSION:Ij,IS_ANDROID:kb,ANDROID_VERSION:Rd,IS_NATIVE_ANDROID:gg,IS_FIREFOX:hg,IS_EDGE:Sd,IS_CHROME:Xa,CHROME_VERSION:ig,IE_VERSION:jg,IS_SAFARI:kg,IS_ANY_SAFARI:lg,TOUCH_ENABLED:Kc}),Sa={},Lc=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "),
"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),"webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")],
Kj=Lc[0],Mc=void 0,Nc=0;for(;Nc<Lc.length;Nc++)if(Lc[Nc][1]in x){Mc=Lc[Nc];break}if(Mc)for(var Oc=0;Oc<Mc.length;Oc++)Sa[Kj[Oc]]=Mc[Oc];na.prototype.code=0;na.prototype.message="";na.prototype.status=null;na.errorTypes="MEDIA_ERR_CUSTOM MEDIA_ERR_ABORTED MEDIA_ERR_NETWORK MEDIA_ERR_DECODE MEDIA_ERR_SRC_NOT_SUPPORTED MEDIA_ERR_ENCRYPTED".split(" ");na.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",
4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var yb=0;yb<na.errorTypes.length;yb++)na[na.errorTypes[yb]]=yb,na.prototype[na.errorTypes[yb]]=yb;var Td=function(k){return"kind label language id inBandMetadataTrackDispatchType mode src".split(" ").reduce(function(g,b,e){k[b]&&(g[b]=k[b]);return g},{cues:k.cues&&Array.prototype.map.call(k.cues,function(g){return{startTime:g.startTime,
endTime:g.endTime,text:g.text,id:g.id}})})},mg={textTracksToJson:function(k){var g=k.$$("track"),b=Array.prototype.map.call(g,function(e){return e.track});return Array.prototype.map.call(g,function(e){var b=Td(e.track);e.src&&(b.src=e.src);return b}).concat(Array.prototype.filter.call(k.textTracks(),function(e){return-1===b.indexOf(e)}).map(Td))},jsonToTextTracks:function(k,g){k.forEach(function(b){var e=g.addRemoteTextTrack(b).track;!b.src&&b.cues&&b.cues.forEach(function(b){return e.addCue(b)})});
return g.textTracks()},trackToJson_:Td},zb=function(k){function g(b,e){y(this,g);var l=C(this,k.call(this,b,e));l.opened_=l.hasBeenOpened_=l.hasBeenFilled_=!1;l.closeable(!l.options_.uncloseable);l.content(l.options_.content);l.contentEl_=ea("div",{className:"vjs-modal-dialog-content"},{role:"document"});l.descEl_=ea("p",{className:"vjs-modal-dialog-description vjs-control-text",id:l.el().getAttribute("aria-describedby")});Ob(l.descEl_,l.description());l.el_.appendChild(l.descEl_);l.el_.appendChild(l.contentEl_);
return l}D(g,k);g.prototype.createEl=function(){return k.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})};g.prototype.dispose=function(){this.previouslyActiveEl_=this.descEl_=this.contentEl_=null;k.prototype.dispose.call(this)};g.prototype.buildCSSClass=function(){return"vjs-modal-dialog vjs-hidden "+k.prototype.buildCSSClass.call(this)};g.prototype.handleKeyPress=
function(b){27===b.which&&this.closeable()&&this.close()};g.prototype.label=function(){return this.localize(this.options_.label||"Modal Window")};g.prototype.description=function(){var b=this.options_.description||this.localize("This is a modal window.");this.closeable()&&(b+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button."));return b};g.prototype.open=function(){if(!this.opened_){var b=this.player();this.trigger("beforemodalopen");this.opened_=
!0;(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill();this.wasPlaying_=!b.paused();this.options_.pauseOnOpen&&this.wasPlaying_&&b.pause();if(this.closeable())this.on(this.el_.ownerDocument,"keydown",F(this,this.handleKeyPress));this.hadControls_=b.controls();b.controls(!1);this.show();this.conditionalFocus_();this.el().setAttribute("aria-hidden","false");this.trigger("modalopen");this.hasBeenOpened_=!0}};g.prototype.opened=function(b){if("boolean"===typeof b)this[b?
"open":"close"]();return this.opened_};g.prototype.close=function(){if(this.opened_){var b=this.player();this.trigger("beforemodalclose");this.opened_=!1;this.wasPlaying_&&this.options_.pauseOnOpen&&b.play();this.closeable()&&this.off(this.el_.ownerDocument,"keydown",F(this,this.handleKeyPress));this.hadControls_&&b.controls(!0);this.hide();this.el().setAttribute("aria-hidden","true");this.trigger("modalclose");this.conditionalBlur_();this.options_.temporary&&this.dispose()}};g.prototype.closeable=
function(b){if("boolean"===typeof b){b=this.closeable_=!!b;var e=this.getChild("closeButton");if(b&&!e){var l=this.contentEl_;this.contentEl_=this.el_;e=this.addChild("closeButton",{controlText:"Close Modal Dialog"});this.contentEl_=l;this.on(e,"close",this.close)}!b&&e&&(this.off(e,"close",this.close),this.removeChild(e),e.dispose())}return this.closeable_};g.prototype.fill=function(){this.fillWith(this.content())};g.prototype.fillWith=function(b){var e=this.contentEl(),l=e.parentNode,d=e.nextSibling;
this.trigger("beforemodalfill");this.hasBeenFilled_=!0;l.removeChild(e);this.empty();yf(e,b);this.trigger("modalfill");d?l.insertBefore(e,d):l.appendChild(e);(b=this.getChild("closeButton"))&&l.appendChild(b.el_)};g.prototype.empty=function(){this.trigger("beforemodalempty");wd(this.contentEl());this.trigger("modalempty")};g.prototype.content=function(b){"undefined"!==typeof b&&(this.content_=b);return this.content_};g.prototype.conditionalFocus_=function(){var b=x.activeElement,e=this.player_.el_;
this.previouslyActiveEl_=null;if(e.contains(b)||e===b)this.previouslyActiveEl_=b,this.focus(),this.on(x,"keydown",this.handleKeyDown)};g.prototype.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null);this.off(x,"keydown",this.handleKeyDown)};g.prototype.handleKeyDown=function(b){if(9===b.which){for(var e=this.focusableEls_(),l=this.el_.querySelector(":focus"),d=void 0,c=0;c<e.length;c++)if(l===e[c]){d=c;break}x.activeElement===this.el_&&
(d=0);b.shiftKey&&0===d?(e[e.length-1].focus(),b.preventDefault()):b.shiftKey||d!==e.length-1||(e[0].focus(),b.preventDefault())}};g.prototype.focusableEls_=function(){var b=this.el_.querySelectorAll("*");return Array.prototype.filter.call(b,function(e){return(e instanceof q.HTMLAnchorElement||e instanceof q.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof q.HTMLInputElement||e instanceof q.HTMLSelectElement||e instanceof q.HTMLTextAreaElement||e instanceof q.HTMLButtonElement)&&!e.hasAttribute("disabled")||
e instanceof q.HTMLIFrameElement||e instanceof q.HTMLObjectElement||e instanceof q.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")})};return g}(v);zb.prototype.options_={pauseOnOpen:!0,temporary:!0};v.registerComponent("ModalDialog",zb);var Ab=function(k){function g(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];y(this,g);var e=C(this,k.call(this));e.tracks_=[];Object.defineProperty(e,"length",{get:function(){return this.tracks_.length}});
for(var l=0;l<b.length;l++)e.addTrack(b[l]);return e}D(g,k);g.prototype.addTrack=function(b){var e=this.tracks_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.tracks_[e]}});-1===this.tracks_.indexOf(b)&&(this.tracks_.push(b),this.trigger({track:b,type:"addtrack"}))};g.prototype.removeTrack=function(b){for(var e=void 0,l=0,d=this.length;l<d;l++)if(this[l]===b){e=this[l];e.off&&e.off();this.tracks_.splice(l,1);break}e&&this.trigger({track:e,type:"removetrack"})};g.prototype.getTrackById=
function(b){for(var e=null,l=0,d=this.length;l<d;l++){var c=this[l];if(c.id===b){e=c;break}}return e};return g}(O);Ab.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var Lj in Ab.prototype.allowedEvents_)Ab.prototype["on"+Lj]=null;var Ud=function(k,g){for(var b=0;b<k.length;b++)Object.keys(k[b]).length&&g.id!==k[b].id&&(k[b].enabled=!1)},Mj=function(k){function g(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];y(this,g);for(var e=b.length-
1;0<=e;e--)if(b[e].enabled){Ud(b,b[e]);break}b=C(this,k.call(this,b));b.changing_=!1;return b}D(g,k);g.prototype.addTrack=function(b){var e=this;b.enabled&&Ud(this,b);k.prototype.addTrack.call(this,b);b.addEventListener&&b.addEventListener("enabledchange",function(){e.changing_||(e.changing_=!0,Ud(e,b),e.changing_=!1,e.trigger("change"))})};return g}(Ab),Vd=function(k,g){for(var b=0;b<k.length;b++)Object.keys(k[b]).length&&g.id!==k[b].id&&(k[b].selected=!1)},Nj=function(k){function g(){var b=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:[];y(this,g);for(var e=b.length-1;0<=e;e--)if(b[e].selected){Vd(b,b[e]);break}b=C(this,k.call(this,b));b.changing_=!1;Object.defineProperty(b,"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}});return b}D(g,k);g.prototype.addTrack=function(b){var e=this;b.selected&&Vd(this,b);k.prototype.addTrack.call(this,b);b.addEventListener&&b.addEventListener("selectedchange",function(){e.changing_||(e.changing_=
!0,Vd(e,b),e.changing_=!1,e.trigger("change"))})};return g}(Ab),ng=function(k){function g(){y(this,g);return C(this,k.apply(this,arguments))}D(g,k);g.prototype.addTrack=function(b){k.prototype.addTrack.call(this,b);b.addEventListener("modechange",F(this,function(){this.queueTrigger("change")}));-1===["metadata","chapters"].indexOf(b.kind)&&b.addEventListener("modechange",F(this,function(){this.trigger("selectedlanguagechange")}))};return g}(Ab),Oj=function(){function k(){var g=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:[];y(this,k);this.trackElements_=[];Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var b=0,e=g.length;b<e;b++)this.addTrackElement_(g[b])}k.prototype.addTrackElement_=function(g){var b=this.trackElements_.length;""+b in this||Object.defineProperty(this,b,{get:function(){return this.trackElements_[b]}});-1===this.trackElements_.indexOf(g)&&this.trackElements_.push(g)};k.prototype.getTrackElementByTrack_=function(g){for(var b=
void 0,e=0,l=this.trackElements_.length;e<l;e++)if(g===this.trackElements_[e].track){b=this.trackElements_[e];break}return b};k.prototype.removeTrackElement_=function(g){for(var b=0,e=this.trackElements_.length;b<e;b++)if(g===this.trackElements_[b]){this.trackElements_.splice(b,1);break}};return k}(),og=function(){function k(g){y(this,k);k.prototype.setCues_.call(this,g);Object.defineProperty(this,"length",{get:function(){return this.length_}})}k.prototype.setCues_=function(g){var b=this.length||
0,e=0,l=g.length;this.cues_=g;this.length_=g.length;g=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(b<l)for(e=b;e<l;e++)g.call(this,e)};k.prototype.getCueById=function(g){for(var b=null,e=0,l=this.length;e<l;e++){var d=this[e];if(d.id===g){b=d;break}}return b};return k}(),Pj={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Qj={alternative:"alternative",descriptions:"descriptions",
main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Rj={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},pg={disabled:"disabled",hidden:"hidden",showing:"showing"},Wd=function(k){function g(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};y(this,g);var e=C(this,k.call(this)),l={id:b.id||"vjs_track_"+gb++,kind:b.kind||"",label:b.label||"",language:b.language||""};b=function(b){Object.defineProperty(e,
b,{get:function(){return l[b]},set:function(){}})};for(var d in l)b(d);return e}D(g,k);return g}(O),Xd=function(k){var g="protocol hostname port pathname search hash host".split(" "),b=x.createElement("a");b.href=k;var e=""===b.host&&"file:"!==b.protocol,l=void 0;e&&(l=x.createElement("div"),l.innerHTML='<a href="'+k+'"></a>',b=l.firstChild,l.setAttribute("style","display:none; position:absolute;"),x.body.appendChild(l));k={};for(var d=0;d<g.length;d++)k[g[d]]=b[g[d]];"http:"===k.protocol&&(k.host=
k.host.replace(/:80$/,""));"https:"===k.protocol&&(k.host=k.host.replace(/:443$/,""));k.protocol||(k.protocol=q.location.protocol);e&&x.body.removeChild(l);return k},qg=function(k){if(!k.match(/^https?:\/\//)){var g=x.createElement("div");g.innerHTML='<a href="'+k+'">x</a>';k=g.firstChild.href}return k},Yd=function(k){return"string"===typeof k&&(k=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(k))?k.pop().toLowerCase():""},Pc=function(k){var g=q.location;k=Xd(k);return(":"===
k.protocol?g.protocol:k.protocol)+k.host!==g.protocol+g.host},Sj=Object.freeze({parseUrl:Xd,getAbsoluteURL:qg,getFileExtension:Yd,isCrossOrigin:Pc}),Zd=function(k){var g=Tj.call(k);return"[object Function]"===g||"function"===typeof k&&"[object RegExp]"!==g||"undefined"!==typeof window&&(k===window.setTimeout||k===window.alert||k===window.confirm||k===window.prompt)},Tj=Object.prototype.toString,rg=Object.freeze({"default":Zd,__moduleExports:Zd}),bc=J(function(k,g){g=k.exports=function(b){return b.replace(/^\s*|\s*$/g,
"")};g.left=function(b){return b.replace(/^\s*/,"")};g.right=function(b){return b.replace(/\s*$/,"")}}),sg=Object.freeze({"default":bc,__moduleExports:bc,left:bc.left,right:bc.right}),If=rg&&Zd||rg,$d=function(k,g,b){if(!If(g))throw new TypeError("iterator must be a function");3>arguments.length&&(b=this);if("[object Array]"===Uj.call(k))for(var e=b,l=0,d=k.length;l<d;l++)tg.call(k,l)&&g.call(e,k[l],l,k);else if("string"===typeof k)for(e=b,l=0,d=k.length;l<d;l++)g.call(e,k.charAt(l),l,k);else for(l in e=
b,k)tg.call(k,l)&&g.call(e,k[l],l,k)},Uj=Object.prototype.toString,tg=Object.prototype.hasOwnProperty,ug=Object.freeze({"default":$d,__moduleExports:$d}),ae=sg&&bc||sg,Vj=ug&&$d||ug,be=function(k){if(!k)return{};var g={};Vj(ae(k).split("\n"),function(b){var e=b.indexOf(":"),l=ae(b.slice(0,e)).toLowerCase();b=ae(b.slice(e+1));"undefined"===typeof g[l]?g[l]=b:"[object Array]"===Object.prototype.toString.call(g[l])?g[l].push(b):g[l]=[g[l],b]});return g},vg=Object.freeze({"default":be,__moduleExports:be}),
ce=function(){for(var k={},g=0;g<arguments.length;g++){var b=arguments[g],e;for(e in b)Wj.call(b,e)&&(k[e]=b[e])}return k},Wj=Object.prototype.hasOwnProperty,wg=Object.freeze({"default":ce,__moduleExports:ce}),oj=vg&&be||vg,nj=wg&&ce||wg;Na.XMLHttpRequest=q.XMLHttpRequest||pj;Na.XDomainRequest="withCredentials"in new Na.XMLHttpRequest?Na.XMLHttpRequest:q.XDomainRequest;(function(k,g){for(var b=0;b<k.length;b++)g(k[b])})("get put post patch head delete".split(" "),function(k){Na["delete"===k?"del":
k]=function(g,b,e){b=Hf(g,b,e);b.method=k.toUpperCase();return Jf(b)}});var xg=function(k,g){var b=new q.WebVTT.Parser(q,q.vttjs,q.WebVTT.StringDecoder()),e=[];b.oncue=function(e){g.addCue(e)};b.onparsingerror=function(b){e.push(b)};b.onflush=function(){g.trigger({type:"loadeddata",target:g})};b.parse(k);0<e.length&&(q.console&&q.console.groupCollapsed&&q.console.groupCollapsed("Text Track parsing errors for "+g.src),e.forEach(function(e){return I.error(e)}),q.console&&q.console.groupEnd&&q.console.groupEnd());
b.flush()},Xj=function(k,g){var b={uri:k},e=Pc(k);e&&(b.cors=e);Na(b,F(this,function(e,b,c){if(e)return I.error(e,b);g.loaded_=!0;if("function"!==typeof q.WebVTT){if(g.tech_){var d=function(){return xg(c,g)};g.tech_.on("vttjsloaded",d);g.tech_.on("vttjserror",function(){I.error("vttjs failed to load, stopping trying to process "+g.src);g.tech_.off("vttjsloaded",d)})}}else xg(c,g)}))},cc=function(k){function g(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};y(this,g);if(!b.tech)throw Error("A tech was not provided.");
b=R(b,{kind:Rj[b.kind]||"subtitles",language:b.language||b.srclang||""});var e=pg[b.mode]||"disabled",l=b["default"];if("metadata"===b.kind||"chapters"===b.kind)e="hidden";var d=C(this,k.call(this,b));d.tech_=b.tech;d.cues_=[];d.activeCues_=[];var c=new og(d.cues_),f=new og(d.activeCues_),a=!1,h=F(d,function(){this.activeCues=this.activeCues;a&&(this.trigger("cuechange"),a=!1)});"disabled"!==e&&d.tech_.ready(function(){d.tech_.on("timeupdate",h)},!0);Object.defineProperties(d,{"default":{get:function(){return l},
set:function(){}},mode:{get:function(){return e},set:function(b){var d=this;pg[b]&&(e=b,"showing"===e&&this.tech_.ready(function(){d.tech_.on("timeupdate",h)},!0),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?c:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return f;for(var e=this.tech_.currentTime(),b=[],d=0,c=this.cues.length;d<c;d++){var l=this.cues[d];l.startTime<=e&&l.endTime>=e?b.push(l):l.startTime===l.endTime&&
l.startTime<=e&&l.startTime+.5>=e&&b.push(l)}a=!1;if(b.length!==this.activeCues_.length)a=!0;else for(e=0;e<b.length;e++)-1===this.activeCues_.indexOf(b[e])&&(a=!0);this.activeCues_=b;f.setCues_(this.activeCues_);return f},set:function(){}}});b.src?(d.src=b.src,Xj(b.src,d)):d.loaded_=!0;return d}D(g,k);g.prototype.addCue=function(b){var e=b;if(q.vttjs&&!(b instanceof q.vttjs.VTTCue)){e=new q.vttjs.VTTCue(b.startTime,b.endTime,b.text);for(var l in b)l in e||(e[l]=b[l]);e.id=b.id;e.originalCue_=b}b=
this.tech_.textTracks();for(l=0;l<b.length;l++)b[l]!==this&&b[l].removeCue(e);this.cues_.push(e);this.cues.setCues_(this.cues_)};g.prototype.removeCue=function(b){for(var e=this.cues_.length;e--;){var l=this.cues_[e];if(l===b||l.originalCue_&&l.originalCue_===b){this.cues_.splice(e,1);this.cues.setCues_(this.cues_);break}}};return g}(Wd);cc.prototype.allowedEvents_={cuechange:"cuechange"};var yg=function(k){function g(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};y(this,g);b=R(b,
{kind:Qj[b.kind]||""});var e=C(this,k.call(this,b)),l=!1;Object.defineProperty(e,"enabled",{get:function(){return l},set:function(e){"boolean"===typeof e&&e!==l&&(l=e,this.trigger("enabledchange"))}});b.enabled&&(e.enabled=b.enabled);e.loaded_=!0;return e}D(g,k);return g}(Wd),zg=function(k){function g(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};y(this,g);b=R(b,{kind:Pj[b.kind]||""});var e=C(this,k.call(this,b)),l=!1;Object.defineProperty(e,"selected",{get:function(){return l},
set:function(e){"boolean"===typeof e&&e!==l&&(l=e,this.trigger("selectedchange"))}});b.selected&&(e.selected=b.selected);return e}D(g,k);return g}(Wd),Bb=function(k){function g(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};y(this,g);var e=C(this,k.call(this)),l=void 0,d=new cc(b);e.kind=d.kind;e.src=d.src;e.srclang=d.language;e.label=d.label;e["default"]=d["default"];Object.defineProperties(e,{readyState:{get:function(){return l}},track:{get:function(){return d}}});l=0;d.addEventListener("loadeddata",
function(){l=2;e.trigger({type:"load",target:e})});return e}D(g,k);return g}(O);Bb.prototype.allowedEvents_={load:"load"};Bb.NONE=0;Bb.LOADING=1;Bb.LOADED=2;Bb.ERROR=3;var oa={audio:{ListClass:Mj,TrackClass:yg,capitalName:"Audio"},video:{ListClass:Nj,TrackClass:zg,capitalName:"Video"},text:{ListClass:ng,TrackClass:cc,capitalName:"Text"}};Object.keys(oa).forEach(function(k){oa[k].getterName=k+"Tracks";oa[k].privateName=k+"Tracks_"});var dc={remoteText:{ListClass:ng,TrackClass:cc,capitalName:"RemoteText",
getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Oj,TrackClass:Bb,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},la=R(oa,dc);dc.names=Object.keys(dc);oa.names=Object.keys(oa);la.names=[].concat(dc.names).concat(oa.names);var Dd=Object.create||function(){function k(){}return function(g){if(1!==arguments.length)throw Error("Object.create shim only accepts one parameter.");k.prototype=g;return new k}}();ka.prototype=
Dd(Error.prototype);ka.prototype.constructor=ka;ka.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};Vb.prototype={set:function(k,g){this.get(k)||""===g||(this.values[k]=g)},get:function(k,g,b){return b?this.has(k)?this.values[k]:g[b]:this.has(k)?this.values[k]:g},has:function(k){return k in this.values},alt:function(k,g,b){for(var e=0;e<b.length;++e)if(g===b[e]){this.set(k,g);break}},integer:function(k,g){/^-?\d+$/.test(g)&&
this.set(k,parseInt(g,10))},percent:function(k,g){return g.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(g=parseFloat(g),0<=g&&100>=g)?(this.set(k,g),!0):!1}};var rj={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"\u200e","&rlm;":"\u200f","&nbsp;":"\u00a0"},sj={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},tj={v:"title",lang:"lang"},Lf={rt:"ruby"},Mf=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,
1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,
67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,
126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];Ed.prototype.applyStyles=function(k,g){g=g||this.div;for(var b in k)k.hasOwnProperty(b)&&(g.style[b]=k[b])};Ed.prototype.formatStyle=function(k,g){return 0===k?0:k+g};Fc.prototype=
Dd(Ed.prototype);Fc.prototype.constructor=Fc;fa.prototype.move=function(k,g){g=void 0!==g?g:this.lineHeight;switch(k){case "+x":this.left+=g;this.right+=g;break;case "-x":this.left-=g;this.right-=g;break;case "+y":this.top+=g;this.bottom+=g;break;case "-y":this.top-=g,this.bottom-=g}};fa.prototype.overlaps=function(k){return this.left<k.right&&this.right>k.left&&this.top<k.bottom&&this.bottom>k.top};fa.prototype.overlapsAny=function(k){for(var g=0;g<k.length;g++)if(this.overlaps(k[g]))return!0;return!1};
fa.prototype.within=function(k){return this.top>=k.top&&this.bottom<=k.bottom&&this.left>=k.left&&this.right<=k.right};fa.prototype.overlapsOppositeAxis=function(k,g){switch(g){case "+x":return this.left<k.left;case "-x":return this.right>k.right;case "+y":return this.top<k.top;case "-y":return this.bottom>k.bottom}};fa.prototype.intersectPercentage=function(k){return Math.max(0,Math.min(this.right,k.right)-Math.max(this.left,k.left))*Math.max(0,Math.min(this.bottom,k.bottom)-Math.max(this.top,k.top))/
(this.height*this.width)};fa.prototype.toCSSCompatValues=function(k){return{top:this.top-k.top,bottom:k.bottom-this.bottom,left:this.left-k.left,right:k.right-this.right,height:this.height,width:this.width}};fa.getSimpleBoxPosition=function(k){var g=k.div?k.div.offsetHeight:k.tagName?k.offsetHeight:0,b=k.div?k.div.offsetWidth:k.tagName?k.offsetWidth:0,e=k.div?k.div.offsetTop:k.tagName?k.offsetTop:0;k=k.div?k.div.getBoundingClientRect():k.tagName?k.getBoundingClientRect():k;return{left:k.left,right:k.right,
top:k.top||e,height:k.height||g,bottom:k.bottom||e+(k.height||g),width:k.width||b}};Va.StringDecoder=function(){return{decode:function(k){if(!k)return"";if("string"!==typeof k)throw Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(k))}}};Va.convertCueToDOMTree=function(k,g){return k&&g?Kf(k,g):null};Va.processCues=function(k,g,b){if(!k||!g||!b)return null;for(;b.firstChild;)b.removeChild(b.firstChild);var e=k.document.createElement("div");e.style.position="absolute";
e.style.left="0";e.style.right="0";e.style.top="0";e.style.bottom="0";e.style.margin="1.5%";b.appendChild(e);if(function(e){for(var b=0;b<e.length;b++)if(e[b].hasBeenReset||!e[b].displayState)return!0;return!1}(g)){var l=[],d=fa.getSimpleBoxPosition(e),c={font:Math.round(5*d.height)/100+"px sans-serif"};(function(){for(var b,a,h=0;h<g.length;h++){a=g[h];b=new Fc(k,a,c);e.appendChild(b.div);var m=void 0,n=void 0,p=b,u=d,t=l,N=new fa(p),A=p.cue;if("number"===typeof A.line&&(A.snapToLines||0<=A.line&&
100>=A.line))var r=A.line;else if(A.track&&A.track.textTrackList&&A.track.textTrackList.mediaElement){r=A.track;for(var q=r.textTrackList,B=0,z=0;z<q.length&&q[z]!==r;z++)"showing"===q[z].mode&&B++;r=-1*++B}else r=-1;q=[];if(A.snapToLines){switch(A.vertical){case "":q=["+y","-y"];n="height";break;case "rl":q=["+x","-x"];n="width";break;case "lr":q=["-x","+x"],n="width"}B=N.lineHeight;z=B*Math.round(r);n=u[n]+B;var V=q[0];Math.abs(z)>n&&(z=(0>z?-1:1)*Math.ceil(n/B)*B);0>r&&(z+=""===A.vertical?u.height:
u.width,q=q.reverse());N.move(V,z)}else{N=N.lineHeight/u.height*100;switch(A.lineAlign){case "middle":r-=N/2;break;case "end":r-=N}switch(A.vertical){case "":p.applyStyles({top:p.formatStyle(r,"%")});break;case "rl":p.applyStyles({left:p.formatStyle(r,"%")});break;case "lr":p.applyStyles({right:p.formatStyle(r,"%")})}q=["+y","-x","+x","-y"];N=new fa(p)}a:{A=N;N=q;n=new fa(A);r=1;for(q=0;q<N.length;q++){for(;A.overlapsOppositeAxis(u,N[q])||A.within(u)&&A.overlapsAny(t);)A.move(N[q]);if(A.within(u)){m=
A;break a}B=A.intersectPercentage(u);r>B&&(m=new fa(A),r=B);A=new fa(n)}m=m||n}p.move(m.toCSSCompatValues(u));a.displayState=b.div;l.push(fa.getSimpleBoxPosition(b))}})()}else for(b=0;b<g.length;b++)e.appendChild(g[b].displayState)};Va.Parser=function(k,g,b){b||(b=g,g={});g||(g={});this.window=k;this.vttjs=g;this.state="INITIAL";this.buffer="";this.decoder=b||new TextDecoder("utf8");this.regionList=[]};Va.Parser.prototype={reportOrThrowError:function(k){if(k instanceof ka)this.onparsingerror&&this.onparsingerror(k);
else throw k;},parse:function(k){function g(){for(var e=d.buffer,b=0;b<e.length&&"\r"!==e[b]&&"\n"!==e[b];)++b;var a=e.substr(0,b);"\r"===e[b]&&++b;"\n"===e[b]&&++b;d.buffer=e.substr(b);return a}function b(e){var b=new Vb;Wb(e,function(e,d){switch(e){case "id":b.set(e,d);break;case "width":b.percent(e,d);break;case "lines":b.integer(e,d);break;case "regionanchor":case "viewportanchor":var a=d.split(",");if(2!==a.length)break;var c=new Vb;c.percent("x",a[0]);c.percent("y",a[1]);if(!c.has("x")||!c.has("y"))break;
b.set(e+"X",c.get("x"));b.set(e+"Y",c.get("y"));break;case "scroll":b.alt(e,d,["up"])}},/=/,/\s/);b.has("id")&&(e=new (d.vttjs.VTTRegion||d.window.VTTRegion),e.width=b.get("width",100),e.lines=b.get("lines",3),e.regionAnchorX=b.get("regionanchorX",0),e.regionAnchorY=b.get("regionanchorY",100),e.viewportAnchorX=b.get("viewportanchorX",0),e.viewportAnchorY=b.get("viewportanchorY",100),e.scroll=b.get("scroll",""),d.onregion&&d.onregion(e),d.regionList.push({id:b.get("id"),region:e}))}function e(e){var b=
new Vb;Wb(e,function(e,d){switch(e){case "MPEGT":b.integer(e+"S",d);break;case "LOCA":b.set(e+"L",Cd(d))}},/[^\d]:/,/,/);d.ontimestampmap&&d.ontimestampmap({MPEGTS:b.get("MPEGTS"),LOCAL:b.get("LOCAL")})}function l(d){d.match(/X-TIMESTAMP-MAP/)?Wb(d,function(b,d){switch(b){case "X-TIMESTAMP-MAP":e(d)}},/=/):Wb(d,function(e,d){switch(e){case "Region":b(d)}},/:/)}var d=this;k&&(d.buffer+=d.decoder.decode(k,{stream:!0}));try{if("INITIAL"===d.state){if(!/\r\n|\n/.test(d.buffer))return this;var c=g();var f=
c.match(/^WEBVTT([ \t].*)?$/);if(!f||!f[0])throw new ka(ka.Errors.BadSignature);d.state="HEADER"}for(k=!1;d.buffer;){if(!/\r\n|\n/.test(d.buffer))return this;k?k=!1:c=g();switch(d.state){case "HEADER":/:/.test(c)?l(c):c||(d.state="ID");continue;case "NOTE":c||(d.state="ID");continue;case "ID":if(/^NOTE($|[ \t])/.test(c)){d.state="NOTE";break}if(!c)continue;d.cue=new (d.vttjs.VTTCue||d.window.VTTCue)(0,0,"");d.state="CUE";if(-1===c.indexOf("--\x3e")){d.cue.id=c;continue}case "CUE":try{qj(c,d.cue,d.regionList)}catch(h){d.reportOrThrowError(h);
d.cue=null;d.state="BADCUE";continue}d.state="CUETEXT";continue;case "CUETEXT":var a=-1!==c.indexOf("--\x3e");if(!c||a&&(k=!0)){d.oncue&&d.oncue(d.cue);d.cue=null;d.state="ID";continue}d.cue.text&&(d.cue.text+="\n");d.cue.text+=c;continue;case "BADCUE":c||(d.state="ID")}}}catch(h){d.reportOrThrowError(h);if("CUETEXT"===d.state&&d.cue&&d.oncue)d.oncue(d.cue);d.cue=null;d.state="INITIAL"===d.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{this.buffer+=this.decoder.decode();if(this.cue||
"HEADER"===this.state)this.buffer+="\n\n",this.parse();if("INITIAL"===this.state)throw new ka(ka.Errors.BadSignature);}catch(k){this.reportOrThrowError(k)}this.onflush&&this.onflush();return this}};var Ag=Object.freeze({"default":Va,__moduleExports:Va}),xj={"":1,lr:1,rl:1},wj={start:1,middle:1,end:1,left:1,right:1};Gc.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Bg=Object.freeze({"default":Gc,__moduleExports:Gc}),Yj={"":!0,up:!0},de=function(){var k=100,
g=3,b=0,e=100,l=0,d=100,c="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return k},set:function(e){if(!Xb(e))throw Error("Width must be between 0 and 100.");k=e}},lines:{enumerable:!0,get:function(){return g},set:function(e){if("number"!==typeof e)throw new TypeError("Lines must be set to a number.");g=e}},regionAnchorY:{enumerable:!0,get:function(){return e},set:function(b){if(!Xb(b))throw Error("RegionAnchorX must be between 0 and 100.");e=b}},regionAnchorX:{enumerable:!0,
get:function(){return b},set:function(e){if(!Xb(e))throw Error("RegionAnchorY must be between 0 and 100.");b=e}},viewportAnchorY:{enumerable:!0,get:function(){return d},set:function(e){if(!Xb(e))throw Error("ViewportAnchorY must be between 0 and 100.");d=e}},viewportAnchorX:{enumerable:!0,get:function(){return l},set:function(e){if(!Xb(e))throw Error("ViewportAnchorX must be between 0 and 100.");l=e}},scroll:{enumerable:!0,get:function(){return c},set:function(e){e="string"!==typeof e?!1:Yj[e.toLowerCase()]?
e.toLowerCase():!1;if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");c=e}}})},Cg=Object.freeze({"default":de,__moduleExports:de}),Zj=Ag&&Va||Ag,ak=Bg&&Gc||Bg,bk=Cg&&de||Cg,Dg=J(function(k){k=k.exports={WebVTT:Zj,VTTCue:ak,VTTRegion:bk};q.vttjs=k;q.WebVTT=k.WebVTT;var g=k.VTTCue,b=k.VTTRegion,e=q.VTTCue,l=q.VTTRegion;k.shim=function(){q.VTTCue=g;q.VTTRegion=b};k.restore=function(){q.VTTCue=e;q.VTTRegion=l};q.VTTCue||k.shim()}),P=function(k){function g(){var b=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};y(this,g);b.reportTouchActivity=!1;var l=C(this,k.call(this,null,b,e));l.hasStarted_=!1;l.on("playing",function(){this.hasStarted_=!0});l.on("loadstart",function(){this.hasStarted_=!1});la.names.forEach(function(e){e=la[e];b&&b[e.getterName]&&(l[e.privateName]=b[e.getterName])});l.featuresProgressEvents||l.manualProgressOn();l.featuresTimeupdateEvents||l.manualTimeUpdatesOn();["Text","Audio",
"Video"].forEach(function(e){!1===b["native"+e+"Tracks"]&&(l["featuresNative"+e+"Tracks"]=!1)});if(!1===b.nativeCaptions||!1===b.nativeTextTracks)l.featuresNativeTextTracks=!1;else if(!0===b.nativeCaptions||!0===b.nativeTextTracks)l.featuresNativeTextTracks=!0;l.featuresNativeTextTracks||l.emulateTextTracks();l.autoRemoteTextTracks_=new la.text.ListClass;l.initTrackListeners();b.nativeControlsForTouch||l.emitTapEvents();l.constructor&&(l.name_=l.constructor.name||"Unknown Tech");return l}D(g,k);g.prototype.triggerSourceset=
function(b){var e=this;if(!this.isReady_)this.one("ready",function(){return e.setTimeout(function(){return e.triggerSourceset(b)},1)});this.trigger({src:b,type:"sourceset"})};g.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange);this.manualProgress=!0;this.one("ready",this.trackProgress)};g.prototype.manualProgressOff=function(){this.manualProgress=!1;this.stopTrackingProgress();this.off("durationchange",this.onDurationChange)};g.prototype.trackProgress=function(b){this.stopTrackingProgress();
this.progressInterval=this.setInterval(F(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress");this.bufferedPercent_=e;1===e&&this.stopTrackingProgress()}),500)};g.prototype.onDurationChange=function(b){this.duration_=this.duration()};g.prototype.buffered=function(){return hb(0,0)};g.prototype.bufferedPercent=function(){return Ff(this.buffered(),this.duration_)};g.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)};g.prototype.manualTimeUpdatesOn=
function(){this.manualTimeUpdates=!0;this.on("play",this.trackCurrentTime);this.on("pause",this.stopTrackingCurrentTime)};g.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime);this.off("pause",this.stopTrackingCurrentTime)};g.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime();this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,
manuallyTriggered:!0})},250)};g.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval);this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})};g.prototype.dispose=function(){this.clearTracks(oa.names);this.manualProgress&&this.manualProgressOff();this.manualTimeUpdates&&this.manualTimeUpdatesOff();k.prototype.dispose.call(this)};g.prototype.clearTracks=function(b){var e=this;b=[].concat(b);b.forEach(function(b){for(var d=e[b+"Tracks"]()||[],c=d.length;c--;){var l=
d[c];"text"===b&&e.removeRemoteTextTrack(l);d.removeTrack(l)}})};g.prototype.cleanupAutoTextTracks=function(){for(var b=this.autoRemoteTextTracks_||[],e=b.length;e--;)this.removeRemoteTextTrack(b[e])};g.prototype.reset=function(){};g.prototype.error=function(b){void 0!==b&&(this.error_=new na(b),this.trigger("error"));return this.error_};g.prototype.played=function(){return this.hasStarted_?hb(0,0):hb()};g.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",
target:this,manuallyTriggered:!0})};g.prototype.initTrackListeners=function(){var b=this;oa.names.forEach(function(e){var l=function(){b.trigger(e+"trackchange")},d=b[oa[e].getterName]();d.addEventListener("removetrack",l);d.addEventListener("addtrack",l);b.on("dispose",function(){d.removeEventListener("removetrack",l);d.removeEventListener("addtrack",l)})})};g.prototype.addWebVttScript_=function(){var b=this;if(!q.WebVTT)if(x.body.contains(this.el()))if(!this.options_["vtt.js"]&&Mb(Dg)&&0<Object.keys(Dg).length)this.trigger("vttjsloaded");
else{var e=x.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js";e.onload=function(){b.trigger("vttjsloaded")};e.onerror=function(){b.trigger("vttjserror")};this.on("dispose",function(){e.onload=null;e.onerror=null});q.WebVTT=!0;this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)};g.prototype.emulateTextTracks=function(){var b=this,e=this.textTracks(),l=this.remoteTextTracks(),d=function(b){return e.addTrack(b.track)},c=function(b){return e.removeTrack(b.track)};
l.on("addtrack",d);l.on("removetrack",c);this.addWebVttScript_();var g=function(){return b.trigger("texttrackchange")},a=function(){g();for(var b=0;b<e.length;b++){var d=e[b];d.removeEventListener("cuechange",g);"showing"===d.mode&&d.addEventListener("cuechange",g)}};a();e.addEventListener("change",a);e.addEventListener("addtrack",a);e.addEventListener("removetrack",a);this.on("dispose",function(){l.off("addtrack",d);l.off("removetrack",c);e.removeEventListener("change",a);e.removeEventListener("addtrack",
a);e.removeEventListener("removetrack",a);for(var b=0;b<e.length;b++)e[b].removeEventListener("cuechange",g)})};g.prototype.addTextTrack=function(b,e,l){if(!b)throw Error("TextTrack kind is required but was not provided");return yj(this,b,e,l)};g.prototype.createRemoteTextTrack=function(b){b=R(b,{tech:this});return new dc.remoteTextEl.TrackClass(b)};g.prototype.addRemoteTextTrack=function(){var b=this,e=arguments[1],l=this.createRemoteTextTrack(0<arguments.length&&void 0!==arguments[0]?arguments[0]:
{});!0!==e&&!1!==e&&(I.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),e=!0);this.remoteTextTrackEls().addTrackElement_(l);this.remoteTextTracks().addTrack(l.track);!0!==e&&this.ready(function(){return b.autoRemoteTextTracks_.addTrack(l.track)});return l};g.prototype.removeRemoteTextTrack=function(b){var e=this.remoteTextTrackEls().getTrackElementByTrack_(b);this.remoteTextTrackEls().removeTrackElement_(e);
this.remoteTextTracks().removeTrack(b);this.autoRemoteTextTracks_.removeTrack(b)};g.prototype.getVideoPlaybackQuality=function(){return{}};g.prototype.setPoster=function(){};g.prototype.playsinline=function(){};g.prototype.setPlaysinline=function(){};g.prototype.overrideNativeAudioTracks=function(){};g.prototype.overrideNativeVideoTracks=function(){};g.prototype.canPlayType=function(){return""};g.canPlayType=function(){return""};g.canPlaySource=function(b,e){return g.canPlayType(b.type)};g.isTech=
function(b){return b.prototype instanceof g||b instanceof g||b===g};g.registerTech=function(b,e){g.techs_||(g.techs_={});if(!g.isTech(e))throw Error("Tech "+b+" must be a Tech");if(!g.canPlayType)throw Error("Techs must have a static canPlayType method on them");if(!g.canPlaySource)throw Error("Techs must have a static canPlaySource method on them");b=U(b);g.techs_[b]=e;"Tech"!==b&&g.defaultTechOrder_.push(b);return e};g.getTech=function(b){if(b){b=U(b);if(g.techs_&&g.techs_[b])return g.techs_[b];
if(q&&q.videojs&&q.videojs[b])return I.warn("The "+b+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),q.videojs[b]}};return g}(v);la.names.forEach(function(k){var g=la[k];P.prototype[g.getterName]=function(){this[g.privateName]=this[g.privateName]||new g.ListClass;return this[g.privateName]}});P.prototype.featuresVolumeControl=!0;P.prototype.featuresMuteControl=!0;P.prototype.featuresFullscreenResize=!1;P.prototype.featuresPlaybackRate=!1;
P.prototype.featuresProgressEvents=!1;P.prototype.featuresSourceset=!1;P.prototype.featuresTimeupdateEvents=!1;P.prototype.featuresNativeTextTracks=!1;P.withSourceHandlers=function(k){k.registerSourceHandler=function(g,b){var e=k.sourceHandlers;e||(e=k.sourceHandlers=[]);void 0===b&&(b=e.length);e.splice(b,0,g)};k.canPlayType=function(g){for(var b=k.sourceHandlers||[],e,l=0;l<b.length;l++)if(e=b[l].canPlayType(g))return e;return""};k.selectSourceHandler=function(g,b){for(var e=k.sourceHandlers||[],
l,d=0;d<e.length;d++)if(l=e[d].canHandleSource(g,b))return e[d];return null};k.canPlaySource=function(g,b){var e=k.selectSourceHandler(g,b);return e?e.canHandleSource(g,b):""};["seekable","seeking","duration"].forEach(function(g){var b=this[g];"function"===typeof b&&(this[g]=function(){return this.sourceHandler_&&this.sourceHandler_[g]?this.sourceHandler_[g].apply(this.sourceHandler_,arguments):b.apply(this,arguments)})},k.prototype);k.prototype.setSource=function(g){var b=k.selectSourceHandler(g,
this.options_);b||(k.nativeSourceHandler?b=k.nativeSourceHandler:I.error("No source handler found for the current source."));this.disposeSourceHandler();this.off("dispose",this.disposeSourceHandler);b!==k.nativeSourceHandler&&(this.currentSource_=g);this.sourceHandler_=b.handleSource(g,this,this.options_);this.on("dispose",this.disposeSourceHandler)};k.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null);this.cleanupAutoTextTracks();
this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};v.registerComponent("Tech",P);P.registerTech("Tech",P);P.defaultTechOrder_=[];var jb={},Hd={},Hc={},ck={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1},dk={setCurrentTime:1},Eg={play:1,pause:1},ek={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL"},
Pf=function(){var k=Yd(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"");return ek[k.toLowerCase()]||""},fk=function(k,g){if(!g)return"";if(k.cache_.source.src===g&&k.cache_.source.type)return k.cache_.source.type;var b=k.cache_.sources.filter(function(e){return e.src===g});if(b.length)return b[0].type;b=k.$$("source");for(var e=0;e<b.length;e++){var l=b[e];if(l.type&&l.src&&l.src===g)return l.type}return Pf(g)},gk=function b(g){if(Array.isArray(g)){var e=[];g.forEach(function(l){l=b(l);
Array.isArray(l)?e=e.concat(l):Ua(l)&&e.push(l)});g=e}else g="string"===typeof g&&g.trim()?[Of({src:g})]:Ua(g)&&"string"===typeof g.src&&g.src&&g.src.trim()?[Of(g)]:[];return g},hk=function(g){function b(e,l,d){y(this,b);var c=R({createEl:!1},l);d=C(this,g.call(this,e,c,d));if(l.playerOptions.sources&&0!==l.playerOptions.sources.length)e.src(l.playerOptions.sources);else for(c=0,l=l.playerOptions.techOrder;c<l.length;c++){var f=U(l[c]),a=P.getTech(f);f||(a=v.getComponent(f));if(a&&a.isSupported()){e.loadTech_(f);
break}}return d}D(b,g);return b}(v);v.registerComponent("MediaLoader",hk);var Qc=function(g){function b(e,l){y(this,b);var d=C(this,g.call(this,e,l));d.emitTapEvents();d.enable();return d}D(b,g);b.prototype.createEl=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};b=Y({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),
tabIndex:0},b);"button"===e&&I.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead.");d=Y({role:"button"},d);this.tabIndex_=b.tabIndex;e=g.prototype.createEl.call(this,e,b,d);this.createControlTextEl(e);return e};b.prototype.dispose=function(){this.controlTextEl_=null;g.prototype.dispose.call(this)};b.prototype.createControlTextEl=function(e){this.controlTextEl_=ea("span",{className:"vjs-control-text"},{"aria-live":"polite"});e&&e.appendChild(this.controlTextEl_);
this.controlText(this.controlText_,e);return this.controlTextEl_};b.prototype.controlText=function(e){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.el();if(void 0===e)return this.controlText_||"Need Text";var d=this.localize(e);this.controlText_=e;Ob(this.controlTextEl_,d);this.nonIconControl||b.setAttribute("title",d)};b.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+g.prototype.buildCSSClass.call(this)};b.prototype.enable=function(){this.enabled_||(this.enabled_=
!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!==typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur))};b.prototype.disable=function(){this.enabled_=!1;this.addClass("vjs-disabled");this.el_.setAttribute("aria-disabled","true");"undefined"!==typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex");this.off(["tap","click"],
this.handleClick);this.off("focus",this.handleFocus);this.off("blur",this.handleBlur)};b.prototype.handleClick=function(e){};b.prototype.handleFocus=function(e){ua(x,"keydown",F(this,this.handleKeyPress))};b.prototype.handleKeyPress=function(e){32===e.which||13===e.which?(e.preventDefault(),this.trigger("click")):g.prototype.handleKeyPress&&g.prototype.handleKeyPress.call(this,e)};b.prototype.handleBlur=function(e){va(x,"keydown",F(this,this.handleKeyPress))};return b}(v);v.registerComponent("ClickableComponent",
Qc);var ik=function(g){function b(e,l){y(this,b);var d=C(this,g.call(this,e,l));d.update();e.on("posterchange",F(d,d.update));return d}D(b,g);b.prototype.dispose=function(){this.player().off("posterchange",this.update);g.prototype.dispose.call(this)};b.prototype.createEl=function(){return ea("div",{className:"vjs-poster",tabIndex:-1})};b.prototype.update=function(e){e=this.player().poster();this.setSrc(e);e?this.show():this.hide()};b.prototype.setSrc=function(e){var b="";e&&(b='url("'+e+'")');this.el_.style.backgroundImage=
b};b.prototype.handleClick=function(e){this.player_.controls()&&(this.player_.paused()?Ub(this.player_.play()):this.player_.pause())};return b}(Qc);v.registerComponent("PosterImage",ik);var jk={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},
kk=function(g){function b(e,l,d){y(this,b);l=C(this,g.call(this,e,l,d));e.on("loadstart",F(l,l.toggleDisplay));e.on("texttrackchange",F(l,l.updateDisplay));e.on("loadstart",F(l,l.preselectTrack));e.ready(F(l,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks)this.hide();else{e.on("fullscreenchange",F(this,this.updateDisplay));for(var b=this.options_.playerOptions.tracks||[],d=0;d<b.length;d++)this.player_.addRemoteTextTrack(b[d],!0);this.preselectTrack()}}));return l}D(b,g);b.prototype.preselectTrack=
function(){for(var e={captions:1,subtitles:1},b=this.player_.textTracks(),d=this.player_.cache_.selectedLanguage,c=void 0,g=void 0,a=void 0,h=0;h<b.length;h++){var m=b[h];d&&d.enabled&&d.language===m.language?m.kind===d.kind?a=m:a||(a=m):d&&!d.enabled?g=c=a=null:m["default"]&&("descriptions"!==m.kind||c?m.kind in e&&!g&&(g=m):c=m)}a?a.mode="showing":g?g.mode="showing":c&&(c.mode="showing")};b.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():
this.show()};b.prototype.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})};b.prototype.clearDisplay=function(){"function"===typeof q.WebVTT&&q.WebVTT.processCues(q,[],this.el_)};b.prototype.updateDisplay=function(){var e=this.player_.textTracks();this.clearDisplay();for(var b=null,d=null,c=e.length;c--;){var g=e[c];"showing"===g.mode&&("descriptions"===g.kind?b=g:d=g)}d?("off"!==this.getAttribute("aria-live")&&
this.setAttribute("aria-live","off"),this.updateForTrack(d)):b&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(b))};b.prototype.updateForTrack=function(e){if("function"===typeof q.WebVTT&&e.activeCues){for(var b=[],d=0;d<e.activeCues.length;d++)b.push(e.activeCues[d]);q.WebVTT.processCues(q,b,this.el_);e=this.player_.textTrackSettings.getValues();for(d=b.length;d--;){var c=b[d];if(c){var g=c.displayState;g.firstChild&&g.firstChild.firstChild&&
"undefined"!=typeof g.firstChild.firstChild.className&&(g.firstChild.firstChild.className=g.firstChild.firstChild.className.replace(/\./g," "));g.firstChild&&(g.firstChild.style.padding="5px 10px");g.firstChild&&g.firstChild.firstChild&&"undefined"!=typeof g.firstChild.firstChild.className&&(g.firstChild.firstChild.style.padding="5px 10px");0>c.text.indexOf("bg-font-size")&&g.firstChild&&g.firstChild.firstChild&&(g.firstChild.firstChild.style.lineHeight=Math.round(5*this.player_.textTrackDisplay.height())/
100+15+"px");e.color&&(g.firstChild.style.color=e.color);if(e.textOpacity){c=Id(e.color||"#fff",e.textOpacity);try{g.firstChild.style.color=c}catch(a){}}e.backgroundColor&&(g.firstChild.style.backgroundColor=e.backgroundColor);if(e.backgroundOpacity){c=Id(e.backgroundColor||"#000",e.backgroundOpacity);try{g.firstChild.style.backgroundColor=c}catch(a){}}if(e.windowColor)if(e.windowOpacity){c=Id(e.windowColor,e.windowOpacity);try{g.style.backgroundColor=c}catch(a){}}else g.style.backgroundColor=e.windowColor;
g.firstChild.firstChild&&"undefined"!=typeof g.firstChild.firstChild.className?(g.firstChild.style.display="block",g.firstChild.style.backgroundColor="rgba(0,0,0,0)"):(g.firstChild.style.display="inline",g.firstChild.style.backgroundColor="rgba(0,0,0,0.6)",g.firstChild.style.lineHeight="1.65em");e.edgeStyle&&("dropshadow"===e.edgeStyle?g.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===e.edgeStyle?g.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":
"depressed"===e.edgeStyle?g.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===e.edgeStyle&&(g.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222"));e.fontPercent&&1!==e.fontPercent&&(g.style.fontSize=Math.round(5*this.player_.textTrackDisplay.height())/100+"px",g.style.height="auto");e.fontFamily&&"default"!==e.fontFamily&&("small-caps"===e.fontFamily?g.firstChild.style.fontVariant="small-caps":g.firstChild.style.fontFamily=
jk[e.fontFamily])}}}};return b}(v);v.registerComponent("TextTrackDisplay",kk);var lk=function(g){function b(){y(this,b);return C(this,g.apply(this,arguments))}D(b,g);b.prototype.createEl=function(){var e=this.player_.isAudio();e=this.localize(e?"Audio Player":"Video Player");e=ea("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[e])});var b=g.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});b.appendChild(e);return b};return b}(v);v.registerComponent("LoadingSpinner",
lk);var Pa=function(g){function b(){y(this,b);return C(this,g.apply(this,arguments))}D(b,g);b.prototype.createEl=function(e){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};e="button";b=Y({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},b);d=Y({type:"button"},d);b=v.prototype.createEl.call(this,e,b,d);this.createControlTextEl(b);return b};b.prototype.addChild=function(e){var b=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};I.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead.");return v.prototype.addChild.call(this,e,b)};b.prototype.enable=function(){g.prototype.enable.call(this);this.el_.removeAttribute("disabled")};b.prototype.disable=function(){g.prototype.disable.call(this);this.el_.setAttribute("disabled","disabled")};b.prototype.handleKeyPress=function(e){32!==
e.which&&13!==e.which&&g.prototype.handleKeyPress.call(this,e)};return b}(Qc);v.registerComponent("Button",Pa);var Fg=function(g){function b(e,l){y(this,b);var d=C(this,g.call(this,e,l));d.mouseused_=!1;d.on("mousedown",d.handleMouseDown);return d}D(b,g);b.prototype.buildCSSClass=function(){return"vjs-big-play-button"};b.prototype.handleClick=function(e){if(this.mouseused_&&e.clientX&&e.clientY)Ub(b),this.player_.paused()?this.player_.play():this.player_.pause();else{var b=this.player_.play(),d=(e=
this.player_.getChild("controlBar"))&&e.getChild("playToggle");d?(e=function(){return d.focus()},Gf(b)?b.then(e,function(){}):this.setTimeout(e,1)):this.player_.focus()}};b.prototype.handleKeyPress=function(e){this.mouseused_=!1;g.prototype.handleKeyPress.call(this,e)};b.prototype.handleMouseDown=function(e){this.mouseused_=!0};return b}(Pa);Fg.prototype.controlText_="";v.registerComponent("BigPlayButton",Fg);var mk=function(g){function b(e,l){y(this,b);var d=C(this,g.call(this,e,l));d.controlText(l&&
l.controlText||d.localize("Close"));return d}D(b,g);b.prototype.buildCSSClass=function(){return"vjs-close-button "+g.prototype.buildCSSClass.call(this)};b.prototype.handleClick=function(e){this.trigger({type:"close",bubbles:!1})};return b}(Pa);v.registerComponent("CloseButton",mk);var Gg=function(g){function b(e,l){y(this,b);var d=C(this,g.call(this,e,l));d.on(e,"play",d.handlePlay);d.on(e,"pause",d.handlePause);d.on(e,"ended",d.handleEnded);return d}D(b,g);b.prototype.buildCSSClass=function(){return"vjs-play-control "+
g.prototype.buildCSSClass.call(this)};b.prototype.handleClick=function(e){Math.floor(this.player_.currentTime())===Math.floor(this.player_.duration())&&this.player_.currentTime(0);this.player_.paused()?this.player_.play():this.player_.pause()};b.prototype.handleSeeked=function(e){this.removeClass("vjs-ended");this.player_.paused()?this.handlePause(e):this.handlePlay(e)};b.prototype.handlePlay=function(e){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.controlText("Pause")};
b.prototype.handlePause=function(e){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.controlText("Play")};b.prototype.handleEnded=function(e){this.removeClass("vjs-playing");this.addClass("vjs-ended");this.controlText("Replay");this.one(this.player_,"seeked",this.handleSeeked)};return b}(Pa);Gg.prototype.controlText_="Play";v.registerComponent("PlayToggle",Gg);var Hg=function(g,b){g=0>g?0:g;var e=Math.floor(g%60),l=Math.floor(g/60%60),d=Math.floor(g/3600),c=Math.floor(b/60%60),f=Math.floor(b/
3600);if(isNaN(g)||Infinity===g)d=l=e="-";d=0<d||0<f?d+":":"";return d+(((d||10<=c)&&10>l?"0"+l:l)+":")+(10>e?"0"+e:e)},Jd=Hg,Cb=function(g){function b(e,l){y(this,b);var d=C(this,g.call(this,e,l));d.throttledUpdateContent=xb(F(d,d.updateContent),25);d.on(e,"timeupdate",d.throttledUpdateContent);return d}D(b,g);b.prototype.createEl=function(e){e=this.buildCSSClass();var b=g.prototype.createEl.call(this,"div",{className:e+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text">'+
this.localize(this.labelText_)+"\u00a0</span>"});this.contentEl_=ea("span",{className:e+"-display"},{"aria-live":"off"});this.updateTextNode_();b.appendChild(this.contentEl_);return b};b.prototype.dispose=function(){this.textNode_=this.contentEl_=null;g.prototype.dispose.call(this)};b.prototype.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=x.createTextNode(this.formattedTime_||this.formatTime_(0));
this.contentEl_.appendChild(this.textNode_)}};b.prototype.formatTime_=function(e){return ub(e)};b.prototype.updateFormattedTime_=function(e){e=this.formatTime_(e);e!==this.formattedTime_&&(this.formattedTime_=e,this.requestAnimationFrame(this.updateTextNode_))};b.prototype.updateContent=function(e){};return b}(v);Cb.prototype.labelText_="Time";Cb.prototype.controlText_="Time";v.registerComponent("TimeDisplay",Cb);var ee=function(g){function b(e,l){y(this,b);var d=C(this,g.call(this,e,l));d.on(e,"ended",
d.handleEnded);return d}D(b,g);b.prototype.buildCSSClass=function(){return"vjs-current-time"};b.prototype.updateContent=function(e){e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(e)};b.prototype.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())};return b}(Cb);ee.prototype.labelText_="Current Time";ee.prototype.controlText_="Current Time";v.registerComponent("CurrentTimeDisplay",ee);
var fe=function(g){function b(e,l){y(this,b);var d=C(this,g.call(this,e,l));d.on(e,"durationchange",d.updateContent);d.on(e,"loadedmetadata",d.throttledUpdateContent);return d}D(b,g);b.prototype.buildCSSClass=function(){return"vjs-duration"};b.prototype.updateContent=function(e){(e=this.player_.duration())&&this.duration_!==e&&(this.duration_=e,this.updateFormattedTime_(e))};return b}(Cb);fe.prototype.labelText_="Duration";fe.prototype.controlText_="Duration";v.registerComponent("DurationDisplay",
fe);var nk=function(g){function b(){y(this,b);return C(this,g.apply(this,arguments))}D(b,g);b.prototype.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})};return b}(v);v.registerComponent("TimeDivider",nk);var ge=function(g){function b(e,l){y(this,b);var d=C(this,g.call(this,e,l));d.on(e,"durationchange",d.throttledUpdateContent);d.on(e,"ended",d.handleEnded);return d}D(b,g);b.prototype.buildCSSClass=
function(){return"vjs-remaining-time"};b.prototype.formatTime_=function(e){return"-"+g.prototype.formatTime_.call(this,e)};b.prototype.updateContent=function(e){this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))};b.prototype.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(0)};return b}(Cb);ge.prototype.labelText_="Remaining Time";ge.prototype.controlText_=
"Remaining Time";v.registerComponent("RemainingTimeDisplay",ge);var ok=function(g){function b(e,l){y(this,b);var d=C(this,g.call(this,e,l));d.updateShowing();d.on(d.player(),"durationchange",d.updateShowing);return d}D(b,g);b.prototype.createEl=function(){var e=g.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});this.contentEl_=ea("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"\u00a0</span>"+this.localize("LIVE")},
{"aria-live":"off"});e.appendChild(this.contentEl_);return e};b.prototype.dispose=function(){this.contentEl_=null;g.prototype.dispose.call(this)};b.prototype.updateShowing=function(e){Infinity===this.player().duration()?this.show():this.hide()};return b}(v);v.registerComponent("LiveDisplay",ok);var he=function(g){function b(e,l){y(this,b);var d=C(this,g.call(this,e,l));d.bar=d.getChild(d.options_.barName);d.vertical(!!d.options_.vertical);d.enable();return d}D(b,g);b.prototype.enabled=function(){return this.enabled_};
b.prototype.enable=function(){if(!this.enabled()){this.on("mousedown",this.handleMouseDown);this.on("touchstart",this.handleMouseDown);this.on("focus",this.handleFocus);this.on("blur",this.handleBlur);this.on("click",this.handleClick);this.on(this.player_,"controlsvisible",this.update);if(this.playerEvent)this.on(this.player_,this.playerEvent,this.update);this.removeClass("disabled");this.setAttribute("tabindex",0);this.enabled_=!0}};b.prototype.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;
this.off("mousedown",this.handleMouseDown);this.off("touchstart",this.handleMouseDown);this.off("focus",this.handleFocus);this.off("blur",this.handleBlur);this.off("click",this.handleClick);this.off(this.player_,"controlsvisible",this.update);this.off(e,"mousemove",this.handleMouseMove);this.off(e,"mouseup",this.handleMouseUp);this.off(e,"touchmove",this.handleMouseMove);this.off(e,"touchend",this.handleMouseUp);this.removeAttribute("tabindex");this.addClass("disabled");this.playerEvent&&this.off(this.player_,
this.playerEvent,this.update);this.enabled_=!1}};b.prototype.createEl=function(e){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};b.className+=" vjs-slider";b=Y({tabIndex:0},b);d=Y({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},d);return g.prototype.createEl.call(this,e,b,d)};b.prototype.handleMouseDown=function(e){var b=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault();
"touchstart"!==e.type||Xa||e.preventDefault();tf();this.addClass("vjs-sliding");this.trigger("slideractive");this.on(b,"mousemove",this.handleMouseMove);this.on(b,"mouseup",this.handleMouseUp);this.on(b,"touchmove",this.handleMouseMove);this.on(b,"touchend",this.handleMouseUp);this.handleMouseMove(e)};b.prototype.handleMouseMove=function(e){};b.prototype.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;uf();this.removeClass("vjs-sliding");this.trigger("sliderinactive");this.off(e,"mousemove",
this.handleMouseMove);this.off(e,"mouseup",this.handleMouseUp);this.off(e,"touchmove",this.handleMouseMove);this.off(e,"touchend",this.handleMouseUp);this.update()};b.prototype.update=function(){if(this.el_){var e=this.getPercent(),b=this.bar;if(b){if("number"!==typeof e||e!==e||0>e||Infinity===e)e=0;var d=(100*e).toFixed(2)+"%";b=b.el().style;this.vertical()?b.height=d:b.width=d;return e}}};b.prototype.calculateDistance=function(e){e=vd(this.el_,e);return this.vertical()?e.y:e.x};b.prototype.handleFocus=
function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)};b.prototype.handleKeyPress=function(e){if(37===e.which||40===e.which)e.preventDefault(),this.stepBack();else if(38===e.which||39===e.which)e.preventDefault(),this.stepForward()};b.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)};b.prototype.handleClick=function(e){e.stopImmediatePropagation();e.preventDefault()};b.prototype.vertical=function(e){if(void 0===e)return this.vertical_||
!1;(this.vertical_=!!e)?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")};return b}(v);v.registerComponent("Slider",he);var pk=function(g){function b(e,l){y(this,b);var d=C(this,g.call(this,e,l));d.partEls_=[];d.on(e,"progress",d.update);return d}D(b,g);b.prototype.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})};b.prototype.dispose=
function(){this.partEls_=null;g.prototype.dispose.call(this)};b.prototype.update=function(e){e=this.player_.buffered();var b=this.player_.duration(),d=this.player_.bufferedEnd(),c=this.partEls_,g=function(e,b){var d=e/b||0;return 100*(1<=d?1:d)+"%"};this.el_.style.width=g(d,b);for(b=0;b<e.length;b++){var a=e.start(b),h=e.end(b),m=c[b];m||(m=this.el_.appendChild(ea()),c[b]=m);m.style.left=g(a,d);m.style.width=g(h-a,d)}for(d=c.length;d>e.length;d--)this.el_.removeChild(c[d-1]);c.length=e.length};return b}(v);
v.registerComponent("LoadProgressBar",pk);var qk=function(g){function b(){y(this,b);return C(this,g.apply(this,arguments))}D(b,g);b.prototype.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"})};b.prototype.update=function(e,b,d){var c=Qb(this.el_),g=Qb(this.player_.el()),a=e.width*b;g&&c&&(b=e.left-g.left+a,e=e.width-a+(g.right-e.right),g=c.width/2,b<g?g+=g-b:e<g&&(g=e),0>g?g=0:g>c.width&&(g=c.width),this.el_.style.right="-"+g+"px",Ob(this.el_,d))};return b}(v);
v.registerComponent("TimeTooltip",qk);var ie=function(g){function b(){y(this,b);return C(this,g.apply(this,arguments))}D(b,g);b.prototype.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})};b.prototype.update=function(e,b){var d=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_);this.rafId_=this.requestAnimationFrame(function(){var c=d.player_.scrubbing()?
d.player_.getCache().currentTime:d.player_.currentTime();c=ub(c,d.player_.duration());var g=d.getChild("timeTooltip");g&&g.update(e,b,c)})};return b}(v);ie.prototype.options_={children:[]};Oa||kb||ie.prototype.options_.children.push("timeTooltip");v.registerComponent("PlayProgressBar",ie);var Ig=function(g){function b(e,l){y(this,b);var d=C(this,g.call(this,e,l));d.update=xb(F(d,d.update),25);return d}D(b,g);b.prototype.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})};
b.prototype.update=function(e,b){var d=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_);this.rafId_=this.requestAnimationFrame(function(){var c=d.player_.duration();c=ub(b*c,c);d.el_.style.left=e.width*b+"px";d.getChild("timeTooltip").update(e,b,c)})};return b}(v);Ig.prototype.options_={children:["timeTooltip"]};v.registerComponent("MouseTimeDisplay",Ig);var Rc=function(g){function b(e,l){y(this,b);var d=C(this,g.call(this,e,l));d.setEventHandlers_();return d}D(b,g);b.prototype.setEventHandlers_=
function(){var e=this;this.update=xb(F(this,this.update),30);this.on(this.player_,"timeupdate",this.update);this.on(this.player_,"ended",this.handleEnded);this.updateInterval=null;this.on(this.player_,["playing"],function(){e.clearInterval(e.updateInterval);e.updateInterval=e.setInterval(function(){e.requestAnimationFrame(function(){e.update()})},30)});this.on(this.player_,["ended","pause","waiting"],function(){e.clearInterval(e.updateInterval)});this.on(this.player_,["timeupdate","ended"],this.update)};
b.prototype.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})};b.prototype.update_=function(e,b){var d=this.player_.duration();this.el_.setAttribute("aria-valuenow",(100*b).toFixed(2));this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[ub(e,d),ub(d,d)],"{1} of {2}"));this.bar.update(Qb(this.el_),b)};b.prototype.update=function(e){e=g.prototype.update.call(this);
this.update_(this.getCurrentTime_(),e);return e};b.prototype.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()};b.prototype.handleEnded=function(e){this.update_(this.player_.duration(),1)};b.prototype.getPercent=function(){var e=this.getCurrentTime_()/this.player_.duration();return 1<=e?1:e||0};b.prototype.handleMouseDown=function(e){sb(e)&&(e.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),
this.player_.pause(),g.prototype.handleMouseDown.call(this,e))};b.prototype.handleMouseMove=function(e){sb(e)&&(e=this.calculateDistance(e)*this.player_.duration(),e===this.player_.duration()&&(e-=.1),this.player_.currentTime(e))};b.prototype.enable=function(){g.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()};b.prototype.disable=function(){g.prototype.disable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.hide()};b.prototype.handleMouseUp=function(e){g.prototype.handleMouseUp.call(this,
e);e&&e.stopPropagation();this.player_.scrubbing(!1);this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0});this.videoWasPlaying&&Ub(this.player_.play())};b.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)};b.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)};b.prototype.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()};b.prototype.handleKeyPress=function(e){32===e.which||
13===e.which?(e.preventDefault(),this.handleAction(e)):g.prototype.handleKeyPress&&g.prototype.handleKeyPress.call(this,e)};return b}(he);Rc.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};Oa||kb||Rc.prototype.options_.children.splice(1,0,"mouseTimeDisplay");Rc.prototype.playerEvent="timeupdate";v.registerComponent("SeekBar",Rc);var Jg=function(g){function b(e,l){y(this,b);var d=C(this,g.call(this,e,l));d.handleMouseMove=xb(F(d,d.handleMouseMove),25);
d.throttledHandleMouseSeek=xb(F(d,d.handleMouseSeek),25);d.enable();return d}D(b,g);b.prototype.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})};b.prototype.handleMouseMove=function(e){var b=this.getChild("seekBar");if(b){var d=b.getChild("mouseTimeDisplay"),c=b.el();b=Qb(c);e=vd(c,e).x;1<e?e=1:0>e&&(e=0);d&&d.update(b,e)}};b.prototype.handleMouseSeek=function(e){var b=this.getChild("seekBar");b&&b.handleMouseMove(e)};b.prototype.enabled=
function(){return this.enabled_};b.prototype.disable=function(){this.children().forEach(function(e){return e.disable&&e.disable()});this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)};b.prototype.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()});this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,
"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)};b.prototype.handleMouseDown=function(e){var b=this.el_.ownerDocument,d=this.getChild("seekBar");d&&d.handleMouseDown(e);this.on(b,"mousemove",this.throttledHandleMouseSeek);this.on(b,"touchmove",this.throttledHandleMouseSeek);this.on(b,"mouseup",this.handleMouseUp);this.on(b,"touchend",this.handleMouseUp)};b.prototype.handleMouseUp=function(e){var b=this.el_.ownerDocument,d=this.getChild("seekBar");d&&d.handleMouseUp(e);
this.off(b,"mousemove",this.throttledHandleMouseSeek);this.off(b,"touchmove",this.throttledHandleMouseSeek);this.off(b,"mouseup",this.handleMouseUp);this.off(b,"touchend",this.handleMouseUp)};return b}(v);Jg.prototype.options_={children:["seekBar"]};v.registerComponent("ProgressControl",Jg);var Kg=function(g){function b(e,l){y(this,b);var d=C(this,g.call(this,e,l));d.on(e,"fullscreenchange",d.handleFullscreenChange);!1===x[Sa.fullscreenEnabled]&&d.disable();return d}D(b,g);b.prototype.buildCSSClass=
function(){return"vjs-fullscreen-control "+g.prototype.buildCSSClass.call(this)};b.prototype.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")};b.prototype.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()};return b}(Pa);Kg.prototype.controlText_="Fullscreen";v.registerComponent("FullscreenToggle",Kg);var rk=function(g,b){b.tech_&&!b.tech_.featuresVolumeControl&&
g.addClass("vjs-hidden");g.on(b,"loadstart",function(){b.tech_.featuresVolumeControl?g.removeClass("vjs-hidden"):g.addClass("vjs-hidden")})},sk=function(g){function b(){y(this,b);return C(this,g.apply(this,arguments))}D(b,g);b.prototype.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})};return b}(v);v.registerComponent("VolumeLevel",sk);var je=function(g){function b(e,l){y(this,b);var d=C(this,g.call(this,
e,l));d.on("slideractive",d.updateLastVolume_);d.on(e,"volumechange",d.updateARIAAttributes);e.ready(function(){return d.updateARIAAttributes()});return d}D(b,g);b.prototype.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})};b.prototype.handleMouseDown=function(e){sb(e)&&g.prototype.handleMouseDown.call(this,e)};b.prototype.handleMouseMove=function(e){sb(e)&&(this.checkMuted(),
this.player_.fvInt&&clearInterval(this.player_.fvInt),document.getElementById(this.player_.id().replace("media-video-","").replace("_html5_api","")+"_soundTopRight")&&(document.getElementById(this.player_.id().replace("media-video-","").replace("_html5_api","")+"_soundTopRight").style.opacity=0),this.player_.volume(this.calculateDistance(e)))};b.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)};b.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()};
b.prototype.stepForward=function(){this.checkMuted();this.player_.volume(this.player_.volume()+.1)};b.prototype.stepBack=function(){this.checkMuted();this.player_.volume(this.player_.volume()-.1)};b.prototype.updateARIAAttributes=function(e){e=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",e);this.el_.setAttribute("aria-valuetext",e+"%")};b.prototype.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())};b.prototype.updateLastVolume_=
function(){var e=this,b=this.player_.volume();this.one("sliderinactive",function(){0===e.player_.volume()&&e.player_.lastVolume_(b)})};return b}(he);je.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};je.prototype.playerEvent="volumechange";v.registerComponent("VolumeBar",je);var Lg=function(g){function b(e){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};y(this,b);l.vertical=l.vertical||!1;if("undefined"===typeof l.volumeBar||Mb(l.volumeBar))l.volumeBar=l.volumeBar||
{},l.volumeBar.vertical=l.vertical;var d=C(this,g.call(this,e,l));rk(d,e);d.throttledHandleMouseMove=xb(F(d,d.handleMouseMove),25);d.on("mousedown",d.handleMouseDown);d.on("touchstart",d.handleMouseDown);d.on(d.volumeBar,["focus","slideractive"],function(){d.volumeBar.addClass("vjs-slider-active");d.addClass("vjs-slider-active");d.trigger("slideractive")});d.on(d.volumeBar,["blur","sliderinactive"],function(){d.volumeBar.removeClass("vjs-slider-active");d.removeClass("vjs-slider-active");d.trigger("sliderinactive")});
return d}D(b,g);b.prototype.createEl=function(){var e="vjs-volume-horizontal";this.options_.vertical&&(e="vjs-volume-vertical");return g.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+e})};b.prototype.handleMouseDown=function(e){e=this.el_.ownerDocument;this.on(e,"mousemove",this.throttledHandleMouseMove);this.on(e,"touchmove",this.throttledHandleMouseMove);this.on(e,"mouseup",this.handleMouseUp);this.on(e,"touchend",this.handleMouseUp)};b.prototype.handleMouseUp=
function(e){e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseMove);this.off(e,"touchmove",this.throttledHandleMouseMove);this.off(e,"mouseup",this.handleMouseUp);this.off(e,"touchend",this.handleMouseUp)};b.prototype.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)};return b}(v);Lg.prototype.options_={children:["volumeBar"]};v.registerComponent("VolumeControl",Lg);var tk=function(g,b){b.tech_&&!b.tech_.featuresMuteControl&&g.addClass("vjs-hidden");g.on(b,"loadstart",
function(){b.tech_.featuresMuteControl?g.removeClass("vjs-hidden"):g.addClass("vjs-hidden")})},Mg=function(g){function b(e,l){y(this,b);var d=C(this,g.call(this,e,l));tk(d,e);d.on(e,["loadstart","volumechange"],d.update);return d}D(b,g);b.prototype.buildCSSClass=function(){return"vjs-mute-control "+g.prototype.buildCSSClass.call(this)};b.prototype.handleClick=function(e){this.player_.volume();e=Math.max(.1,this.player_.lastVolume_());this.player_.muted()?fadeVolume(this.player_,e,1):fadeVolume(this.player_,
e,0)};b.prototype.update=function(e){this.updateIcon_();this.updateControlText_()};b.prototype.updateIcon_=function(){var e=this.player_.volume(),b=3;Oa&&this.player_.muted(this.player_.tech_.el_.muted);0===e||this.player_.muted()?b=0:.33>e?b=1:.67>e&&(b=2);for(e=0;4>e;e++)Pb(this.el_,"vjs-vol-"+e);eb(this.el_,"vjs-vol-"+b)};b.prototype.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)};return b}(Pa);Mg.prototype.controlText_=
"Mute";v.registerComponent("MuteToggle",Mg);var Ng=function(g){function b(e){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};y(this,b);l.inline="undefined"!==typeof l.inline?l.inline:!0;if("undefined"===typeof l.volumeControl||Mb(l.volumeControl))l.volumeControl=l.volumeControl||{},l.volumeControl.vertical=!l.inline;l=C(this,g.call(this,e,l));l.on(e,["loadstart"],l.volumePanelState_);l.on(l.volumeControl,["slideractive"],l.sliderActive_);l.on(l.volumeControl,["sliderinactive"],l.sliderInactive_);
return l}D(b,g);b.prototype.sliderActive_=function(){this.addClass("vjs-slider-active")};b.prototype.sliderInactive_=function(){this.removeClass("vjs-slider-active")};b.prototype.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden");this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")};b.prototype.createEl=function(){var e="vjs-volume-panel-horizontal";
this.options_.inline||(e="vjs-volume-panel-vertical");return g.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+e})};return b}(v);Ng.prototype.options_={children:["muteToggle","volumeControl"]};v.registerComponent("VolumePanel",Ng);var ke=function(g){function b(e,l){y(this,b);var d=C(this,g.call(this,e,l));l&&(d.menuButton_=l.menuButton);d.focusedChild_=-1;d.on("keydown",d.handleKeyPress);return d}D(b,g);b.prototype.addItem=function(e){this.addChild(e);e.on("click",F(this,
function(b){this.menuButton_&&(this.menuButton_.unpressButton(),"CaptionSettingsMenuItem"!==e.name()&&this.menuButton_.focus())}))};b.prototype.createEl=function(){this.contentEl_=ea(this.options_.contentElType||"ul",{className:"vjs-menu-content"});this.contentEl_.setAttribute("role","menu");var e=g.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});e.appendChild(this.contentEl_);ua(e,"click",function(e){e.preventDefault();e.stopImmediatePropagation()});return e};b.prototype.dispose=
function(){this.contentEl_=null;g.prototype.dispose.call(this)};b.prototype.handleKeyPress=function(e){if(37===e.which||40===e.which)e.preventDefault(),this.stepForward();else if(38===e.which||39===e.which)e.preventDefault(),this.stepBack()};b.prototype.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1);this.focus(e)};b.prototype.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1);this.focus(e)};b.prototype.focus=function(){var e=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:0,b=this.children().slice();b.length&&b[0].className&&/vjs-menu-title/.test(b[0].className)&&b.shift();0<b.length&&(0>e?e=0:e>=b.length&&(e=b.length-1),this.focusedChild_=e,b[e].el_.focus())};return b}(v);v.registerComponent("Menu",ke);var le=function(g){function b(e){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};y(this,b);var d=C(this,g.call(this,e,l));d.menuButton_=new Pa(e,l);d.menuButton_.controlText(d.controlText_);d.menuButton_.el_.setAttribute("aria-haspopup",
"true");l=Pa.prototype.buildCSSClass();d.menuButton_.el_.className=d.buildCSSClass()+" "+l;d.menuButton_.removeClass("vjs-control");d.addChild(d.menuButton_);d.update();d.enabled_=!0;d.on(d.menuButton_,"tap",d.handleClick);d.on(d.menuButton_,"click",d.handleClick);d.on(d.menuButton_,"focus",d.handleFocus);d.on(d.menuButton_,"blur",d.handleBlur);d.on("keydown",d.handleSubmenuKeyPress);return d}D(b,g);b.prototype.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu));
this.menu=e;this.addChild(e);this.buttonPressed_=!1;this.menuButton_.el_.setAttribute("aria-expanded","false");this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()};b.prototype.createMenu=function(){var e=new ke(this.player_,{menuButton:this});this.hideThreshold_=0;if(this.options_.title){var b=ea("li",{className:"vjs-menu-title",innerHTML:U(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;e.children_.unshift(b);Cc(b,e.contentEl())}if(this.items=this.createItems())for(b=
0;b<this.items.length;b++)e.addItem(this.items[b]);return e};b.prototype.createItems=function(){};b.prototype.createEl=function(){return g.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})};b.prototype.buildWrapperCSSClass=function(){var e="vjs-menu-button";e=!0===this.options_.inline?e+"-inline":e+"-popup";var b=Pa.prototype.buildCSSClass();return"vjs-menu-button "+e+" "+b+" "+g.prototype.buildCSSClass.call(this)};b.prototype.buildCSSClass=function(){var e="vjs-menu-button";
e=!0===this.options_.inline?e+"-inline":e+"-popup";return"vjs-menu-button "+e+" "+g.prototype.buildCSSClass.call(this)};b.prototype.controlText=function(e){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.menuButton_.el();return this.menuButton_.controlText(e,b)};b.prototype.handleClick=function(e){this.one(this.menu.contentEl(),"mouseleave",F(this,function(e){this.unpressButton();this.el_.blur()}));this.buttonPressed_?this.unpressButton():this.pressButton()};b.prototype.focus=function(){this.menuButton_.focus()};
b.prototype.blur=function(){this.menuButton_.blur()};b.prototype.handleFocus=function(){ua(x,"keydown",F(this,this.handleKeyPress))};b.prototype.handleBlur=function(){va(x,"keydown",F(this,this.handleKeyPress))};b.prototype.handleKeyPress=function(e){27===e.which||9===e.which?(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus())):38!==e.which&&40!==e.which||this.buttonPressed_||(this.pressButton(),e.preventDefault())};b.prototype.handleSubmenuKeyPress=
function(e){if(27===e.which||9===e.which)this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus())};b.prototype.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Oa&&pf()||this.menu.focus())};b.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","false"))};b.prototype.disable=
function(){this.unpressButton();this.enabled_=!1;this.addClass("vjs-disabled");this.menuButton_.disable()};b.prototype.enable=function(){this.enabled_=!0;this.removeClass("vjs-disabled");this.menuButton_.enable()};return b}(v);v.registerComponent("MenuButton",le);var me=function(g){function b(e,l){y(this,b);var d=l.tracks,c=C(this,g.call(this,e,l));1>=c.items.length&&c.hide();if(!d)return C(c);var f=F(c,c.update);d.addEventListener("removetrack",f);d.addEventListener("addtrack",f);c.player_.on("ready",
f);c.player_.on("dispose",function(){d.removeEventListener("removetrack",f);d.removeEventListener("addtrack",f)});return c}D(b,g);return b}(le);v.registerComponent("TrackButton",me);var ec=function(g){function b(e,l){y(this,b);var d=C(this,g.call(this,e,l));d.selectable=l.selectable;d.isSelected_=l.selected||!1;d.multiSelectable=l.multiSelectable;d.selected(d.isSelected_);d.selectable?d.multiSelectable?d.el_.setAttribute("role","menuitemcheckbox"):d.el_.setAttribute("role","menuitemradio"):d.el_.setAttribute("role",
"menuitem");return d}D(b,g);b.prototype.createEl=function(e,b,d){this.nonIconControl=!0;return g.prototype.createEl.call(this,"li",Y({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},b),d)};b.prototype.handleClick=function(e){this.selected(!0)};b.prototype.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=
!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))};return b}(Qc);v.registerComponent("MenuItem",ec);var fc=function(g){function b(e,l){y(this,b);var d=l.track,c=e.textTracks();l.label=d.label||d.language||"Unknown";l.selected="showing"===d.mode;var f=C(this,g.call(this,e,l));f.track=d;var a=function(){for(var e=arguments.length,b=Array(e),d=0;d<e;d++)b[d]=arguments[d];f.handleTracksChange.apply(f,b)},h=function(){for(var e=
arguments.length,b=Array(e),d=0;d<e;d++)b[d]=arguments[d];f.handleSelectedLanguageChange.apply(f,b)};e.on(["loadstart","texttrackchange"],a);c.addEventListener("change",a);c.addEventListener("selectedlanguagechange",h);f.on("dispose",function(){e.off(["loadstart","texttrackchange"],a);c.removeEventListener("change",a);c.removeEventListener("selectedlanguagechange",h)});if(void 0===c.onchange){var m=void 0;f.on(["tap","click"],function(){if("object"!==da(q.Event))try{m=new q.Event("change")}catch(n){}m||
(m=x.createEvent("Event"),m.initEvent("change",!0,!0));c.dispatchEvent(m)})}f.handleTracksChange();return f}D(b,g);b.prototype.handleClick=function(e){var b=this.track.kind,d=this.track.kinds,c=this.player_.textTracks();d||(d=[b]);console.log(b,d);void 0==b?(this.player_.subShowing=!1,this.player_.addClass("vjs-sub-disabled")):(this.player_.subShowing=!0,this.player_.removeClass("vjs-sub-disabled"));b=this.player_.subShowing?"Subtitles off":"Subtitles";this.player_.controlBar.subsCapsButton.controlText()!==
b&&this.player_.controlBar.subsCapsButton.controlText(b);g.prototype.handleClick.call(this,e);if(c)for(e=0;e<c.length;e++)b=c[e],b===this.track&&-1<d.indexOf(b.kind)?"showing"!==b.mode&&(b.mode="showing"):"disabled"!==b.mode&&(b.mode="disabled")};b.prototype.handleTracksChange=function(e){e="showing"===this.track.mode;e!==this.isSelected_&&this.selected(e)};b.prototype.handleSelectedLanguageChange=function(e){"showing"===this.track.mode&&(e=this.player_.cache_.selectedLanguage,e&&e.enabled&&e.language===
this.track.language&&e.kind!==this.track.kind||(this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}))};b.prototype.dispose=function(){this.track=null;g.prototype.dispose.call(this)};return b}(ec);v.registerComponent("TextTrackMenuItem",fc);var Og=function(g){function b(e,l){y(this,b);l.track={player:e,kind:l.kind,kinds:l.kinds,"default":!1,mode:"disabled"};l.kinds||(l.kinds=[l.kind]);l.track.label=l.label?l.label:l.kinds.join(" and ")+" off";l.selectable=
!0;l.multiSelectable=!1;return C(this,g.call(this,e,l))}D(b,g);b.prototype.handleTracksChange=function(e){e=this.player().textTracks();for(var b=!0,d=0,c=e.length;d<c;d++){var g=e[d];if(-1<this.options_.kinds.indexOf(g.kind)&&"showing"===g.mode){b=!1;break}}b!==this.isSelected_&&this.selected(b)};b.prototype.handleSelectedLanguageChange=function(e){e=this.player().textTracks();for(var b=!0,d=0,c=e.length;d<c;d++){var g=e[d];if(-1<["captions","descriptions","subtitles"].indexOf(g.kind)&&"showing"===
g.mode){b=!1;break}}b&&(this.player_.cache_.selectedLanguage={enabled:!1})};return b}(fc);v.registerComponent("OffTextTrackMenuItem",Og);var Db=function(g){function b(e){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};y(this,b);l.tracks=e.textTracks();return C(this,g.call(this,e,l))}D(b,g);b.prototype.createItems=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:fc,d=void 0;this.label_&&(d=this.label_+
" off");e.push(new Og(this.player_,{kinds:this.kinds_,kind:this.kind_,label:d}));this.hideThreshold_+=1;d=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var c=0;c<d.length;c++){var g=d[c];if(-1<this.kinds_.indexOf(g.kind)){var a=new b(this.player_,{track:g,selectable:!0,multiSelectable:!1});a.addClass("vjs-"+g.kind+"-menu-item");e.push(a)}}return e};return b}(me);v.registerComponent("TextTrackButton",Db);var Pg=function(g){function b(e,l){y(this,b);var d=l.track,
c=l.cue,f=e.currentTime();l.selectable=!0;l.multiSelectable=!1;l.label=c.text;l.selected=c.startTime<=f&&f<c.endTime;f=C(this,g.call(this,e,l));f.track=d;f.cue=c;d.addEventListener("cuechange",F(f,f.update));return f}D(b,g);b.prototype.handleClick=function(e){g.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime)};b.prototype.update=function(e){e=this.cue;var b=this.player_.currentTime();this.selected(e.startTime<=b&&b<e.endTime)};return b}(ec);
v.registerComponent("ChaptersTrackMenuItem",Pg);var ne=function(g){function b(e,l,d){y(this,b);return C(this,g.call(this,e,l,d))}D(b,g);b.prototype.buildCSSClass=function(){return"vjs-chapters-button "+g.prototype.buildCSSClass.call(this)};b.prototype.buildWrapperCSSClass=function(){return"vjs-chapters-button "+g.prototype.buildWrapperCSSClass.call(this)};b.prototype.update=function(e){this.track_&&(!e||"addtrack"!==e.type&&"removetrack"!==e.type)||this.setTrack(this.findChaptersTrack());g.prototype.update.call(this)};
b.prototype.setTrack=function(e){if(this.track_!==e){this.updateHandler_||(this.updateHandler_=this.update.bind(this));if(this.track_){var b=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);b&&b.removeEventListener("load",this.updateHandler_);this.track_=null}if(this.track_=e)this.track_.mode="hidden",(e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&e.addEventListener("load",this.updateHandler_)}};b.prototype.findChaptersTrack=function(){for(var e=
this.player_.textTracks()||[],b=e.length-1;0<=b;b--){var d=e[b];if(d.kind===this.kind_)return d}};b.prototype.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(U(this.kind_))};b.prototype.createMenu=function(){this.options_.title=this.getMenuCaption();return g.prototype.createMenu.call(this)};b.prototype.createItems=function(){var e=[];if(!this.track_)return e;var b=this.track_.cues;if(!b)return e;for(var d=0,c=b.length;d<c;d++){var g=new Pg(this.player_,
{track:this.track_,cue:b[d]});e.push(g)}return e};return b}(Db);ne.prototype.kind_="chapters";ne.prototype.controlText_="Chapters";v.registerComponent("ChaptersButton",ne);var oe=function(g){function b(e,l,d){y(this,b);l=C(this,g.call(this,e,l,d));var c=e.textTracks(),f=F(l,l.handleTracksChange);c.addEventListener("change",f);l.on("dispose",function(){c.removeEventListener("change",f)});return l}D(b,g);b.prototype.handleTracksChange=function(e){e=this.player().textTracks();for(var b=!1,d=0,c=e.length;d<
c;d++){var g=e[d];if(g.kind!==this.kind_&&"showing"===g.mode){b=!0;break}}b?this.disable():this.enable()};b.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+g.prototype.buildCSSClass.call(this)};b.prototype.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+g.prototype.buildWrapperCSSClass.call(this)};return b}(Db);oe.prototype.kind_="descriptions";oe.prototype.controlText_="Descriptions";v.registerComponent("DescriptionsButton",oe);var pe=function(g){function b(e,
l,d){y(this,b);return C(this,g.call(this,e,l,d))}D(b,g);b.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+g.prototype.buildCSSClass.call(this)};b.prototype.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+g.prototype.buildWrapperCSSClass.call(this)};return b}(Db);pe.prototype.kind_="subtitles";pe.prototype.controlText_="Subtitles off";v.registerComponent("SubtitlesButton",pe);var qe=function(g){function b(e,l){y(this,b);l.track={player:e,kind:l.kind,label:l.kind+" settings",
selectable:!1,"default":!1,mode:"disabled"};l.selectable=!1;l.name="CaptionSettingsMenuItem";var d=C(this,g.call(this,e,l));d.addClass("vjs-texttrack-settings");d.controlText(", opens "+l.kind+" settings dialog");return d}D(b,g);b.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()};return b}(fc);v.registerComponent("CaptionSettingsMenuItem",qe);var re=function(g){function b(e,l,d){y(this,b);return C(this,g.call(this,e,l,d))}D(b,g);b.prototype.buildCSSClass=function(){return"vjs-captions-button "+
g.prototype.buildCSSClass.call(this)};b.prototype.buildWrapperCSSClass=function(){return"vjs-captions-button "+g.prototype.buildWrapperCSSClass.call(this)};b.prototype.createItems=function(){var e=[];this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new qe(this.player_,{kind:this.kind_})),this.hideThreshold_+=1);return g.prototype.createItems.call(this,e)};return b}(Db);re.prototype.kind_="captions";re.prototype.controlText_="Captions";
v.registerComponent("CaptionsButton",re);var Qg=function(g){function b(){y(this,b);return C(this,g.apply(this,arguments))}D(b,g);b.prototype.createEl=function(e,b,d){var c='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);"captions"===this.options_.track.kind&&(c+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      ");return g.prototype.createEl.call(this,e,Y({innerHTML:c+
"</span>"},b),d)};return b}(fc);v.registerComponent("SubsCapsMenuItem",Qg);var se=function(g){function b(e){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};y(this,b);l=C(this,g.call(this,e,l));l.label_="Subtitles";-1<["en","en-us","en-ca","fr-ca"].indexOf(l.player_.language_)&&(l.label_="captions");l.menuButton_.controlText(U(l.label_));return l}D(b,g);b.prototype.buildCSSClass=function(){return"vjs-subs-caps-button "+g.prototype.buildCSSClass.call(this)};b.prototype.buildWrapperCSSClass=
function(){return"vjs-subs-caps-button "+g.prototype.buildWrapperCSSClass.call(this)};b.prototype.handleClick=function(e){this.player_.subShowing=!this.player_.subShowing;this.player_.subShowing?this.player_.removeClass("vjs-sub-disabled"):this.player_.addClass("vjs-sub-disabled");e=this.player_.subShowing?"Subtitles off":"Subtitles";this.controlText()!==e&&this.controlText(e);if(e=this.player_.textTracks())if(this.player_.subShowing)e[0].mode="showing";else for(var b=0;b<e.length;b++)e[b].mode="disabled"};
b.prototype.createItems=function(){var e=[];this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new qe(this.player_,{kind:this.label_})),this.hideThreshold_+=1);return e=g.prototype.createItems.call(this,e,Qg)};return b}(Db);se.prototype.kinds_=["captions","subtitles"];se.prototype.controlText_="Subtitles";v.registerComponent("SubsCapsButton",se);var Rg=function(g){function b(e,l){y(this,b);var d=l.track,c=e.audioTracks();l.label=
d.label||d.language||"Unknown";l.selected=d.enabled;var f=C(this,g.call(this,e,l));f.track=d;f.addClass("vjs-"+d.kind+"-menu-item");var a=function(){for(var e=arguments.length,b=Array(e),d=0;d<e;d++)b[d]=arguments[d];f.handleTracksChange.apply(f,b)};c.addEventListener("change",a);f.on("dispose",function(){c.removeEventListener("change",a)});return f}D(b,g);b.prototype.createEl=function(e,b,d){var c='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);"main-desc"===this.options_.track.kind&&
(c+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      ");return g.prototype.createEl.call(this,e,Y({innerHTML:c+"</span>"},b),d)};b.prototype.handleClick=function(e){var b=this.player_.audioTracks();g.prototype.handleClick.call(this,e);for(e=0;e<b.length;e++){var d=b[e];d.enabled=d===this.track}};b.prototype.handleTracksChange=function(e){this.selected(this.track.enabled)};return b}(ec);
v.registerComponent("AudioTrackMenuItem",Rg);var Sg=function(g){function b(e){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};y(this,b);l.tracks=e.audioTracks();return C(this,g.call(this,e,l))}D(b,g);b.prototype.buildCSSClass=function(){return"vjs-audio-button "+g.prototype.buildCSSClass.call(this)};b.prototype.buildWrapperCSSClass=function(){return"vjs-audio-button "+g.prototype.buildWrapperCSSClass.call(this)};b.prototype.createItems=function(){var e=0<arguments.length&&void 0!==
arguments[0]?arguments[0]:[];this.hideThreshold_=1;for(var b=this.player_.audioTracks(),d=0;d<b.length;d++)e.push(new Rg(this.player_,{track:b[d],selectable:!0,multiSelectable:!1}));return e};return b}(me);Sg.prototype.controlText_="Audio Track";v.registerComponent("AudioTrackButton",Sg);var te=function(g){function b(e,l){y(this,b);var d=l.rate,c=parseFloat(d,10);l.label=d;l.selected=1===c;l.selectable=!0;l.multiSelectable=!1;var f=C(this,g.call(this,e,l));f.label=d;f.rate=c;f.on(e,"ratechange",f.update);
return f}D(b,g);b.prototype.handleClick=function(e){g.prototype.handleClick.call(this);this.player().playbackRate(this.rate)};b.prototype.update=function(e){this.selected(this.player().playbackRate()===this.rate)};return b}(ec);te.prototype.contentElType="button";v.registerComponent("PlaybackRateMenuItem",te);var Tg=function(g){function b(e,l){y(this,b);var d=C(this,g.call(this,e,l));d.updateVisibility();d.updateLabel();d.on(e,"loadstart",d.updateVisibility);d.on(e,"ratechange",d.updateLabel);return d}
D(b,g);b.prototype.createEl=function(){var e=g.prototype.createEl.call(this);this.labelEl_=ea("div",{className:"vjs-playback-rate-value",innerHTML:"1x"});e.appendChild(this.labelEl_);return e};b.prototype.dispose=function(){this.labelEl_=null;g.prototype.dispose.call(this)};b.prototype.buildCSSClass=function(){return"vjs-playback-rate "+g.prototype.buildCSSClass.call(this)};b.prototype.buildWrapperCSSClass=function(){return"vjs-playback-rate "+g.prototype.buildWrapperCSSClass.call(this)};b.prototype.createMenu=
function(){var e=new ke(this.player()),b=this.playbackRates();if(b)for(var d=b.length-1;0<=d;d--)e.addChild(new te(this.player(),{rate:b[d]+"x"}));return e};b.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())};b.prototype.handleClick=function(e){e=this.player().playbackRate();for(var b=this.playbackRates(),d=b[0],c=0;c<b.length;c++)if(b[c]>e){d=b[c];break}this.player().playbackRate(d)};b.prototype.playbackRates=function(){return this.options_.playbackRates||
this.options_.playerOptions&&this.options_.playerOptions.playbackRates};b.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length};b.prototype.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")};b.prototype.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")};return b}(le);
Tg.prototype.controlText_="Playback Rate";v.registerComponent("PlaybackRateMenuButton",Tg);var Ug=function(g){function b(){y(this,b);return C(this,g.apply(this,arguments))}D(b,g);b.prototype.buildCSSClass=function(){return"vjs-spacer "+g.prototype.buildCSSClass.call(this)};b.prototype.createEl=function(){return g.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})};return b}(v);v.registerComponent("Spacer",Ug);var uk=function(g){function b(){y(this,b);return C(this,g.apply(this,arguments))}
D(b,g);b.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+g.prototype.buildCSSClass.call(this)};b.prototype.createEl=function(){var e=g.prototype.createEl.call(this,{className:this.buildCSSClass()});e.innerHTML="\u00a0";return e};return b}(Ug);v.registerComponent("CustomControlSpacer",uk);var Vg=function(g){function b(){y(this,b);return C(this,g.apply(this,arguments))}D(b,g);b.prototype.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-control-bar",
dir:"ltr"})};return b}(v);Vg.prototype.options_={children:"playToggle currentTimeDisplay timeDivider durationDisplay progressControl volumePanel customControlSpacer playbackRateMenuButton chaptersButton descriptionsButton audioTrackButton qualityMenuButton subsCapsButton fullscreenToggle".split(" ")};v.registerComponent("ControlBar",Vg);var Wg=function(g){function b(e,l){y(this,b);var d=C(this,g.call(this,e,l));d.on(e,"error",d.open);return d}D(b,g);b.prototype.buildCSSClass=function(){return"vjs-error-display "+
g.prototype.buildCSSClass.call(this)};b.prototype.content=function(){var e=this.player().error();return e?this.localize(e.message):""};return b}(zb);Wg.prototype.options_=R(zb.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});v.registerComponent("ErrorDisplay",Wg);var Xg=["#000","Black"],Yg=["#00F","Blue"],Zg=["#0FF","Cyan"],$g=["#0F0","Green"],ah=["#F0F","Magenta"],bh=["#F00","Red"],ch=["#FFF","White"],dh=["#FF0","Yellow"],ue=["1","Opaque"],ve=["0.5","Semi-Transparent"],
eh=["0","Transparent"],lb={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Xg,ch,bh,$g,Yg,dh,ah,Zg]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[ue,ve,eh]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[ch,Xg,bh,$g,Yg,dh,ah,Zg]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none",
"None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",
id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],"default":2,parser:function(g){return"1.00"===g?null:Number(g)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[ue,ve]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",
id:"captions-window-opacity-%s",label:"Transparency",options:[eh,ve,ue]}};lb.windowColor.options=lb.backgroundColor.options;var vk=function(g){function b(e,l){y(this,b);l.temporary=!1;var d=C(this,g.call(this,e,l));d.updateDisplay=F(d,d.updateDisplay);d.fill();d.hasBeenOpened_=d.hasBeenFilled_=!0;d.endDialog=ea("p",{className:"vjs-control-text",textContent:d.localize("End of dialog window.")});d.el().appendChild(d.endDialog);d.setDefaults();void 0===l.persistTextTrackSettings&&(d.options_.persistTextTrackSettings=
d.options_.playerOptions.persistTextTrackSettings);d.on(d.$(".vjs-done-button"),"click",function(){d.saveSettings();d.close()});d.on(d.$(".vjs-default-button"),"click",function(){d.setDefaults();d.updateDisplay()});X(lb,function(e){d.on(d.$(e.selector),"change",d.updateDisplay)});d.options_.persistTextTrackSettings&&d.restoreSettings();return d}D(b,g);b.prototype.dispose=function(){this.endDialog=null;g.prototype.dispose.call(this)};b.prototype.createElSelect_=function(e){var b=this,d=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:"",c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"label",g=lb[e],a=g.id.replace("%s",this.id_),h=[d,a].join(" ").trim();return["<"+c+' id="'+a+'" class="'+("label"===c?"vjs-label":"")+'">',this.localize(g.label),"</"+c+">",'<select aria-labelledby="'+h+'">'].concat(g.options.map(function(e){var d=a+"-"+e[1].replace(/\W+/g,"");return['<option id="'+d+'" value="'+e[0]+'" ','aria-labelledby="'+h+" "+d+'">',b.localize(e[1]),"</option>"].join("")})).concat("</select>").join("")};
b.prototype.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span></fieldset>"].join("")};b.prototype.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',
this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span></fieldset>"].join("")};b.prototype.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",
e),"</span></fieldset>"].join("")};b.prototype.createElColors_=function(){return ea("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})};b.prototype.createElFont_=function(){return ea("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),'</fieldset><fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle",
"","legend"),'</fieldset><fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})};b.prototype.createElControls_=function(){var e=this.localize("restore all settings to the default values");return ea("div",{className:"vjs-track-settings-controls",innerHTML:['<button class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button class="vjs-done-button">'+this.localize("Done")+
"</button>"].join("")})};b.prototype.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]};b.prototype.label=function(){return this.localize("Caption Settings Dialog")};b.prototype.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")};b.prototype.buildCSSClass=function(){return g.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"};b.prototype.getValues=function(){var e=this;return rd(lb,
function(b,d,c){var g=e.$(d.selector);d=Qf(g.options[g.options.selectedIndex].value,d.parser);void 0!==d&&(b[c]=d);return b},{})};b.prototype.setValues=function(e){var b=this;X(lb,function(d,c){var g=b.$(d.selector),a=e[c],h=d.parser;if(a)for(var l=0;l<g.options.length;l++)if(Qf(g.options[l].value,h)===a){g.selectedIndex=l;break}})};b.prototype.setDefaults=function(){var e=this;X(lb,function(b){var d=b.hasOwnProperty("default")?b["default"]:0;e.$(b.selector).selectedIndex=d})};b.prototype.restoreSettings=
function(){var e=void 0;try{e=JSON.parse(q.localStorage.getItem("vjs-text-track-settings"))}catch(l){I.warn(l)}e&&this.setValues(e)};b.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?q.localStorage.setItem("vjs-text-track-settings",JSON.stringify(e)):q.localStorage.removeItem("vjs-text-track-settings")}catch(l){I.warn(l)}}};b.prototype.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()};
b.prototype.conditionalBlur_=function(){this.previouslyActiveEl_=null;this.off(x,"keydown",this.handleKeyDown);var e=this.player_.controlBar,b=e&&e.subsCapsButton;e=e&&e.captionsButton;b?b.focus():e&&e.focus()};return b}(zb);v.registerComponent("TextTrackSettings",vk);var wk=function(g){function b(e,l){y(this,b);var d=l.ResizeObserver||q.ResizeObserver;null===l.ResizeObserver&&(d=!1);var c=R({createEl:!d,reportTouchActivity:!1},l),f=C(this,g.call(this,e,c));f.ResizeObserver=l.ResizeObserver||q.ResizeObserver;
f.loadListener_=null;f.resizeObserver_=null;f.debouncedHandler_=Gj(function(){f.resizeHandler()},100,!1,e);d?(f.resizeObserver_=new f.ResizeObserver(f.debouncedHandler_),f.resizeObserver_.observe(e.el())):(f.loadListener_=function(){f.el_.contentWindow&&ua(f.el_.contentWindow,"resize",f.debouncedHandler_);f.off("load",f.loadListener_)},f.on("load",f.loadListener_));return f}D(b,g);b.prototype.createEl=function(){return g.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager"})};b.prototype.resizeHandler=
function(){this.player_.trigger("playerresize")};b.prototype.dispose=function(){this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect());this.el_&&this.el_.contentWindow&&va(this.el_.contentWindow,"resize",this.debouncedHandler_);this.loadListener_&&this.off("load",this.loadListener_);this.debouncedHandler_&&this.debouncedHandler_.cancel();this.loadListener_=this.debouncedHandler_=this.resizeObserver=this.ResizeObserver=null;g.prototype.dispose.call(this)};
return b}(v);v.registerComponent("ResizeManager",wk);var we=function(g){var b=g.el();if(b.hasAttribute("src"))return g.triggerSourceset(b.src),!0;b=g.$$("source");var e=[],l="";if(!b.length)return!1;for(var d=0;d<b.length;d++){var c=b[d].src;c&&-1===e.indexOf(c)&&e.push(c)}if(!e.length)return!1;1===e.length&&(l=e[0]);g.triggerSourceset(l);return!0},xk=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(g){var b=x.createElement(this.nodeName.toLowerCase());
b.innerHTML=g;for(g=x.createDocumentFragment();b.childNodes.length;)g.appendChild(b.childNodes[0]);this.innerText="";q.Element.prototype.appendChild.call(this,g);return this.innerHTML}}),fh=function(g,b){for(var e={},l=0;l<g.length&&!((e=Object.getOwnPropertyDescriptor(g[l],b))&&e.set&&e.get);l++);e.enumerable=!0;e.configurable=!0;return e},gh=function(g){var b=g.el();if(!b.resetSourceWatch_){var e={},l=fh([g.el(),q.HTMLMediaElement.prototype,q.Element.prototype,xk],"innerHTML"),d=function(e){return function(){for(var d=
arguments.length,a=Array(d),c=0;c<d;c++)a[c]=arguments[c];d=e.apply(b,a);we(g);return d}};["append","appendChild","insertAdjacentHTML"].forEach(function(c){b[c]&&(e[c]=b[c],b[c]=d(e[c]))});Object.defineProperty(b,"innerHTML",R(l,{set:d(l.set)}));b.resetSourceWatch_=function(){b.resetSourceWatch_=null;Object.keys(e).forEach(function(d){b[d]=e[d]});Object.defineProperty(b,"innerHTML",l)};g.one("sourceset",b.resetSourceWatch_)}},yk=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?
qg(q.Element.prototype.getAttribute.call(this,"src")):""},set:function(g){q.Element.prototype.setAttribute.call(this,"src",g);return g}}),zk=function(g){if(g.featuresSourceset){var b=g.el();if(!b.resetSourceset_){var e=fh([g.el(),q.HTMLMediaElement.prototype,yk],"src"),l=b.setAttribute,d=b.load;Object.defineProperty(b,"src",R(e,{set:function(d){d=e.set.call(b,d);g.triggerSourceset(b.src);return d}}));b.setAttribute=function(e,d){var a=l.call(b,e,d);/src/i.test(e)&&g.triggerSourceset(b.src);return a};
b.load=function(){var e=d.call(b);we(g)||(g.triggerSourceset(""),gh(g));return e};b.currentSrc?g.triggerSourceset(b.currentSrc):we(g)||gh(g);b.resetSourceset_=function(){b.resetSourceset_=null;b.load=d;b.setAttribute=l;Object.defineProperty(b,"src",e);b.resetSourceWatch_&&b.resetSourceWatch_()}}}},Ak=Md(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]),
w=function(g){function b(e,l){y(this,b);var d=C(this,g.call(this,e,l)),c=e.source,f=!1;c&&(d.el_.currentSrc!==c.src||e.tag&&3===e.tag.initNetworkState_)?d.setSource(c):d.handleLateInit_(d.el_);e.enableSourceset&&d.setupSourcesetHandling_();if(d.el_.hasChildNodes()){var a=d.el_.childNodes,h=a.length;for(c=[];h--;){var m=a[h];"track"===m.nodeName.toLowerCase()&&(d.featuresNativeTextTracks?(d.remoteTextTrackEls().addTrackElement_(m),d.remoteTextTracks().addTrack(m.track),d.textTracks().addTrack(m.track),
f||d.el_.hasAttribute("crossorigin")||!Pc(m.src)||(f=!0)):c.push(m))}for(a=0;a<c.length;a++)d.el_.removeChild(c[a])}d.proxyNativeTracks_();d.featuresNativeTextTracks&&f&&I.warn(td(Ak));d.restoreMetadataTracksInIOSNativePlayer_();(Kc||Qd||gg)&&!0===e.nativeControlsForTouch&&d.setControls(!0);d.proxyWebkitFullscreen_();d.triggerReady();return d}D(b,g);b.prototype.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_();b.disposeMediaElement(this.el_);this.options_=null;g.prototype.dispose.call(this)};
b.prototype.setupSourcesetHandling_=function(){zk(this)};b.prototype.restoreMetadataTracksInIOSNativePlayer_=function(){var e=this.textTracks(),b=void 0,d=function(){b=[];for(var d=0;d<e.length;d++){var a=e[d];"metadata"===a.kind&&b.push({track:a,storedMode:a.mode})}};d();e.addEventListener("change",d);this.on("dispose",function(){return e.removeEventListener("change",d)});var c=function a(){for(var d=0;d<b.length;d++){var c=b[d];"disabled"===c.track.mode&&c.track.mode!==c.storedMode&&(c.track.mode=
c.storedMode)}e.removeEventListener("change",a)};this.on("webkitbeginfullscreen",function(){e.removeEventListener("change",d);e.removeEventListener("change",c);e.addEventListener("change",c)});this.on("webkitendfullscreen",function(){e.removeEventListener("change",d);e.addEventListener("change",d);e.removeEventListener("change",c)})};b.prototype.overrideNative_=function(e,b){var d=this;if(b===this["featuresNative"+e+"Tracks"]){var c=e.toLowerCase();this[c+"TracksListeners_"]&&Object.keys(this[c+"TracksListeners_"]).forEach(function(e){d.el()[c+
"Tracks"].removeEventListener(e,d[c+"TracksListeners_"][e])});this["featuresNative"+e+"Tracks"]=!b;this[c+"TracksListeners_"]=null;this.proxyNativeTracksForType_(c)}};b.prototype.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)};b.prototype.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)};b.prototype.proxyNativeTracksForType_=function(e){var b=this;e=oa[e];var d=this.el()[e.getterName],c=this[e.getterName]();if(this["featuresNative"+e.capitalName+"Tracks"]&&
d&&d.addEventListener){var g={change:function(e){c.trigger({type:"change",target:c,currentTarget:c,srcElement:c})},addtrack:function(e){c.addTrack(e.track)},removetrack:function(e){c.removeTrack(e.track)}},a=function(){for(var e=[],b=0;b<c.length;b++){for(var a=!1,g=0;g<d.length;g++)if(d[g]===c[b]){a=!0;break}a||e.push(c[b])}for(;e.length;)c.removeTrack(e.shift())};this[e.getterName+"Listeners_"]=g;Object.keys(g).forEach(function(e){var a=g[e];d.addEventListener(e,a);b.on("dispose",function(b){return d.removeEventListener(e,
a)})});this.on("loadstart",a);this.on("dispose",function(e){return b.off("loadstart",a)})}};b.prototype.proxyNativeTracks_=function(){var e=this;oa.names.forEach(function(b){e.proxyNativeTracksForType_(b)})};b.prototype.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var g=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(g,e);b.disposeMediaElement(e);e=g}else e=x.createElement("video"),g=this.options_.tag&&Ma(this.options_.tag),
g=R({},g),Kc&&!0===this.options_.nativeControlsForTouch||delete g.controls,sf(e,Y(g,{id:this.options_.techId,"class":"vjs-tech"}));e.playerId=this.options_.playerId}"undefined"!==typeof this.options_.preload&&e.setAttribute("preload",this.options_.preload);g=["loop","muted","playsinline","autoplay"];for(var d=0;d<g.length;d++){var c=g[d],f=this.options_[c];"undefined"!==typeof f&&(f?e.setAttribute(c,c):e.removeAttribute(c),e[c]=f)}return e};b.prototype.handleLateInit_=function(e){if(0!==e.networkState&&
3!==e.networkState)if(0===e.readyState){var b=!1,d=function(){b=!0};this.on("loadstart",d);var c=function(){b||this.trigger("loadstart")};this.on("loadedmetadata",c);this.ready(function(){this.off("loadstart",d);this.off("loadedmetadata",c);b||this.trigger("loadstart")})}else{var g=["loadstart"];g.push("loadedmetadata");2<=e.readyState&&g.push("loadeddata");3<=e.readyState&&g.push("canplay");4<=e.readyState&&g.push("canplaythrough");this.ready(function(){g.forEach(function(e){this.trigger(e)},this)})}};
b.prototype.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(l){I(l,"Video is not ready. (Video.js)")}};b.prototype.duration=function(){var e=this;return Infinity===this.el_.duration&&kb&&Xa&&0===this.el_.currentTime?(this.on("timeupdate",function d(){0<e.el_.currentTime&&(Infinity===e.el_.duration&&e.trigger("durationchange"),e.off("timeupdate",d))}),NaN):this.el_.duration||NaN};b.prototype.width=function(){return this.el_.offsetWidth};b.prototype.height=function(){return this.el_.offsetHeight};
b.prototype.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var b=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},d=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",b),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",d);this.on("dispose",function(){e.off("webkitbeginfullscreen",d);e.off("webkitendfullscreen",b)})}};b.prototype.supportsFullScreen=
function(){if("function"===typeof this.el_.webkitEnterFullScreen){var e=q.navigator&&q.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1};b.prototype.enterFullScreen=function(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){e.pause();e.webkitEnterFullScreen()},0)):e.webkitEnterFullScreen()};b.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()};b.prototype.src=function(e){if(void 0===
e)return this.el_.src;this.setSrc(e)};b.prototype.reset=function(){b.resetMediaElement(this.el_)};b.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc};b.prototype.setControls=function(e){this.el_.controls=!!e};b.prototype.addTextTrack=function(e,b,d){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,b,d):g.prototype.addTextTrack.call(this,e,b,d)};b.prototype.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return g.prototype.createRemoteTextTrack.call(this,
e);var b=x.createElement("track");e.kind&&(b.kind=e.kind);e.label&&(b.label=e.label);if(e.language||e.srclang)b.srclang=e.language||e.srclang;e["default"]&&(b["default"]=e["default"]);e.id&&(b.id=e.id);e.src&&(b.src=e.src);return b};b.prototype.addRemoteTextTrack=function(e,b){var d=g.prototype.addRemoteTextTrack.call(this,e,b);this.featuresNativeTextTracks&&this.el().appendChild(d);return d};b.prototype.removeRemoteTextTrack=function(e){g.prototype.removeRemoteTextTrack.call(this,e);if(this.featuresNativeTextTracks)for(var b=
this.$$("track"),d=b.length;d--;)e!==b[d]&&e!==b[d].track||this.el().removeChild(b[d])};b.prototype.getVideoPlaybackQuality=function(){if("function"===typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};"undefined"!==typeof this.el().webkitDroppedFrameCount&&"undefined"!==typeof this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount);q.performance&&"function"===typeof q.performance.now?
e.creationTime=q.performance.now():q.performance&&q.performance.timing&&"number"===typeof q.performance.timing.navigationStart&&(e.creationTime=q.Date.now()-q.performance.timing.navigationStart);return e};return b}(P);if(qb()){w.TEST_VID=x.createElement("video");var Sc=x.createElement("track");Sc.kind="captions";Sc.srclang="en";Sc.label="English";w.TEST_VID.appendChild(Sc)}w.isSupported=function(){try{w.TEST_VID.volume=.5}catch(g){return!1}return!(!w.TEST_VID||!w.TEST_VID.canPlayType)};w.canPlayType=
function(g){return w.TEST_VID.canPlayType(g)};w.canPlaySource=function(g,b){return w.canPlayType(g.type)};w.canControlVolume=function(){try{var g=w.TEST_VID.volume;w.TEST_VID.volume=g/2+.1;return g!==w.TEST_VID.volume}catch(b){return!1}};w.canMuteVolume=function(){try{var g=w.TEST_VID.muted;w.TEST_VID.muted=!g;w.TEST_VID.muted?w.TEST_VID.setAttribute("muted","muted"):w.TEST_VID.removeAttribute("muted");return g!==w.TEST_VID.muted}catch(b){return!1}};w.canControlPlaybackRate=function(){if(kb&&Xa&&
58>ig)return!1;try{var g=w.TEST_VID.playbackRate;w.TEST_VID.playbackRate=g/2+.1;return g!==w.TEST_VID.playbackRate}catch(b){return!1}};w.canOverrideAttributes=function(){try{var g=function(){};Object.defineProperty(x.createElement("video"),"src",{get:g,set:g});Object.defineProperty(x.createElement("audio"),"src",{get:g,set:g});Object.defineProperty(x.createElement("video"),"innerHTML",{get:g,set:g});Object.defineProperty(x.createElement("audio"),"innerHTML",{get:g,set:g})}catch(b){return!1}return!0};
w.supportsNativeTextTracks=function(){return lg||Oa&&Xa};w.supportsNativeVideoTracks=function(){return!(!w.TEST_VID||!w.TEST_VID.videoTracks)};w.supportsNativeAudioTracks=function(){return!(!w.TEST_VID||!w.TEST_VID.audioTracks)};w.Events="loadstart suspend abort error emptied stalled loadedmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate progress play pause ratechange resize volumechange".split(" ");w.prototype.featuresVolumeControl=w.canControlVolume();
w.prototype.featuresMuteControl=w.canMuteVolume();w.prototype.featuresPlaybackRate=w.canControlPlaybackRate();w.prototype.featuresSourceset=w.canOverrideAttributes();w.prototype.movingMediaElementInDOM=!Oa;w.prototype.featuresFullscreenResize=!0;w.prototype.featuresProgressEvents=!0;w.prototype.featuresTimeupdateEvents=!0;w.prototype.featuresNativeTextTracks=w.supportsNativeTextTracks();w.prototype.featuresNativeVideoTracks=w.supportsNativeVideoTracks();w.prototype.featuresNativeAudioTracks=w.supportsNativeAudioTracks();
var hh=w.TEST_VID&&w.TEST_VID.constructor.prototype.canPlayType,Bk=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;w.patchCanPlayType=function(){4<=Rd&&!hg&&!Xa&&(w.TEST_VID.constructor.prototype.canPlayType=function(g){return g&&Bk.test(g)?"maybe":hh.call(this,g)})};w.unpatchCanPlayType=function(){var g=w.TEST_VID.constructor.prototype.canPlayType;w.TEST_VID.constructor.prototype.canPlayType=hh;return g};w.patchCanPlayType();w.disposeMediaElement=function(g){if(g){for(g.parentNode&&g.parentNode.removeChild(g);g.hasChildNodes();)g.removeChild(g.firstChild);
g.removeAttribute("src");if("function"===typeof g.load)try{g.load()}catch(b){}}};w.resetMediaElement=function(g){if(g){for(var b=g.querySelectorAll("source"),e=b.length;e--;)g.removeChild(b[e]);g.removeAttribute("src");if("function"===typeof g.load)try{g.load()}catch(l){}}};"muted defaultMuted autoplay controls loop playsinline".split(" ").forEach(function(g){w.prototype[g]=function(){return this.el_[g]||this.el_.hasAttribute(g)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(g){w.prototype["set"+
U(g)]=function(b){(this.el_[g]=b)?this.el_.setAttribute(g,g):this.el_.removeAttribute(g)}});"paused currentTime buffered volume poster preload error seeking seekable ended playbackRate defaultPlaybackRate played networkState readyState videoWidth videoHeight".split(" ").forEach(function(g){w.prototype[g]=function(){return this.el_[g]}});"volume src poster preload playbackRate defaultPlaybackRate".split(" ").forEach(function(g){w.prototype["set"+U(g)]=function(b){this.el_[g]=b}});["pause","load","play"].forEach(function(g){w.prototype[g]=
function(){return this.el_[g]()}});P.withSourceHandlers(w);w.nativeSourceHandler={};w.nativeSourceHandler.canPlayType=function(g){try{return w.TEST_VID.canPlayType(g)}catch(b){return""}};w.nativeSourceHandler.canHandleSource=function(g,b){if(g.type)return w.nativeSourceHandler.canPlayType(g.type);if(g.src){var e=Yd(g.src);return w.nativeSourceHandler.canPlayType("video/"+e)}return""};w.nativeSourceHandler.handleSource=function(g,b,e){b.setSrc(g.src)};w.nativeSourceHandler.dispose=function(){};w.registerSourceHandler(w.nativeSourceHandler);
P.registerTech("Html5",w);var Ck=Md(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "],["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]),ih="progress abort suspend emptied stalled loadedmetadata loadeddata timeupdate resize volumechange texttrackchange".split(" "),
xe={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},ha=function(g){function b(e,l,d){y(this,b);e.id=e.id||l.id||"vjs_video_"+gb++;l=Y(b.getTagSettings(e),l);l.initChildren=!1;l.createEl=!1;l.evented=!1;l.reportTouchActivity=!1;if(!l.language)if("function"===typeof e.closest){var c=e.closest("[lang]");c&&c.getAttribute&&(l.language=c.getAttribute("lang"))}else for(c=e;c&&1===c.nodeType;){if(Ma(c).hasOwnProperty("lang")){l.language=c.getAttribute("lang");break}c=
c.parentNode}d=C(this,g.call(this,null,l,d));d.isPosterFromTech_=!1;d.queuedCallbacks_=[];d.isReady_=!1;d.hasStarted_=!1;d.userActive_=!1;if(!d.options_||!d.options_.techOrder||!d.options_.techOrder.length)throw Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");d.tag=e;d.tagAttributes=e&&Ma(e);d.language(d.options_.language);if(l.languages){var f={};Object.getOwnPropertyNames(l.languages).forEach(function(e){f[e.toLowerCase()]=
l.languages[e]});d.languages_=f}else d.languages_=b.prototype.options_.languages;d.cache_={};d.poster_=l.poster||"";d.controls_=!!l.controls;d.cache_.lastVolume=1;e.controls=!1;e.removeAttribute("controls");e.hasAttribute("autoplay")?d.options_.autoplay=!0:d.autoplay(d.options_.autoplay);d.scrubbing_=!1;d.el_=d.createEl();d.cache_.lastPlaybackRate=d.defaultPlaybackRate();Ad(d,{eventBusKey:"el_"});c=R(d.options_);if(l.plugins){var a=l.plugins;Object.keys(a).forEach(function(e){if("function"===typeof this[e])this[e](a[e]);
else throw Error('plugin "'+e+'" does not exist');},d)}d.options_.playerOptions=c;d.middleware_=[];d.initChildren();d.isAudio("audio"===e.nodeName.toLowerCase());d.controls()?d.addClass("vjs-controls-enabled"):d.addClass("vjs-controls-disabled");d.el_.setAttribute("role","region");d.isAudio()?d.el_.setAttribute("aria-label",d.localize("Audio Player")):d.el_.setAttribute("aria-label",d.localize("Video Player"));d.isAudio()&&d.addClass("vjs-audio");d.flexNotSupported_()&&d.addClass("vjs-no-flex");Oa||
d.addClass("vjs-workinghover");b.players[d.id_]=d;d.addClass("vjs-v7");d.userActive(!0);d.reportUserActivity();d.one("play",d.listenForUserActivity_);d.on("fullscreenchange",d.handleFullscreenChange_);d.on("stageclick",d.handleStageClick_);d.changingSrc_=!1;d.playWaitingForReady_=!1;d.playOnLoadstart_=null;return d}D(b,g);b.prototype.dispose=function(){this.trigger("dispose");this.off("dispose");this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=
null);b.players[this.id_]=null;this.tag&&this.tag.player&&(this.tag.player=null);this.el_&&this.el_.player&&(this.el_.player=null);this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_="");this.playerElIngest_&&(this.playerElIngest_=null);this.tag&&(this.tag=null);Hd[this.id()]=null;g.prototype.dispose.call(this)};b.prototype.createEl=function(){var e=this.tag,b=void 0,d=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player"),c=
"video-js"===this.tag.tagName.toLowerCase();d?b=this.el_=e.parentNode:c||(b=this.el_=g.prototype.createEl.call(this,"div"));var f=Ma(e);if(c){b=this.el_=e;for(e=this.tag=x.createElement("video");b.children.length;)e.appendChild(b.firstChild);rb(b,"video-js")||eb(b,"video-js");b.appendChild(e);d=this.playerElIngest_=b;Object.keys(b).forEach(function(d){e[d]=b[d]})}e.setAttribute("tabindex","-1");jg&&e.setAttribute("role","application");e.removeAttribute("width");e.removeAttribute("height");Object.getOwnPropertyNames(f).forEach(function(d){c&&
"class"===d||b.setAttribute(d,f[d]);c&&e.setAttribute(d,f[d])});e.playerId=e.id;e.id+="_html5_api";e.className="vjs-tech";e.player=b.player=this;this.addClass("vjs-paused");if(!0!==q.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Zf("vjs-styles-dimensions");var a=Ra(".vjs-styles-defaults"),h=Ra("head");h.insertBefore(this.styleEl_,a?a.nextSibling:h.firstChild)}this.width(this.options_.width);this.height(this.options_.height);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);a=e.getElementsByTagName("a");
for(h=0;h<a.length;h++){var m=a.item(h);eb(m,"vjs-hidden");m.setAttribute("hidden","hidden")}e.initNetworkState_=e.networkState;e.parentNode&&!d&&e.parentNode.insertBefore(b,e);Cc(e,b);this.children_.unshift(e);this.el_.setAttribute("lang",this.language_);return this.el_=b};b.prototype.width=function(b){return this.dimension("width",b)};b.prototype.height=function(b){return this.dimension("height",b)};b.prototype.dimension=function(b,g){var e=b+"_";if(void 0===g)return this[e]||0;if(""===g)this[e]=
void 0,this.updateStyleEl_();else{var c=parseFloat(g);isNaN(c)?I.error('Improper value "'+g+'" supplied for for '+b):(this[e]=c,this.updateStyleEl_())}};b.prototype.fluid=function(b){if(void 0===b)return!!this.fluid_;this.fluid_=!!b;b?this.addClass("vjs-fluid"):this.removeClass("vjs-fluid");this.updateStyleEl_()};b.prototype.aspectRatio=function(b){if(void 0===b)return this.aspectRatio_;if(!/^\d+:\d+$/.test(b))throw Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");
this.aspectRatio_=b;this.fluid(!0);this.updateStyleEl_()};b.prototype.updateStyleEl_=function(){if(!0===q.VIDEOJS_NO_DYNAMIC_STYLE){var b="number"===typeof this.width_?this.width_:this.options_.width,g="number"===typeof this.height_?this.height_:this.options_.height,d=this.tech_&&this.tech_.el();d&&(0<=b&&(d.width=b),0<=g&&(d.height=g))}else{b=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":");var c=
b[1]/b[0];b=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/c:this.videoWidth()||300;g=void 0!==this.height_?this.height_:b*c;d=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions";this.addClass(d);$f(this.styleEl_,"\n      ."+d+" {\n        width: "+b+"px;\n        height: "+g+"px;\n      }\n\n      ."+d+".vjs-fluid {\n        padding-top: "+100*c+"%;\n      }\n    ")}};b.prototype.loadTech_=function(b,g){var e=this;this.tech_&&this.unloadTech_();var c=
U(b),f=b.charAt(0).toLowerCase()+b.slice(1);"Html5"!==c&&this.tag&&(P.getTech("Html5").disposeMediaElement(this.tag),this.tag=this.tag.player=null);this.techName_=c;this.isReady_=!1;var a="string"===typeof this.autoplay()?!1:this.autoplay(),h={source:g,autoplay:a,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+c+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),
language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};la.names.forEach(function(b){b=la[b];h[b.getterName]=e[b.privateName]});Y(h,this.options_[c]);Y(h,this.options_[f]);Y(h,this.options_[b.toLowerCase()]);this.tag&&(h.tag=this.tag);g&&g.src===this.cache_.src&&0<this.cache_.currentTime&&(h.startTime=this.cache_.currentTime);f=P.getTech(b);if(!f)throw Error("No Tech named '"+
c+"' exists! '"+c+"' should be registered using videojs.registerTech()'");this.tech_=new f(h);this.tech_.ready(F(this,this.handleTechReady_),!0);mg.jsonToTextTracks(this.textTracksJson_||[],this.tech_);ih.forEach(function(b){e.on(e.tech_,b,e["handleTech"+U(b)+"_"])});Object.keys(xe).forEach(function(b){e.on(e.tech_,b,function(d){if(0===e.tech_.playbackRate()&&e.tech_.seeking())e.queuedCallbacks_.push({callback:e["handleTech"+xe[b]+"_"].bind(e),event:d});else e["handleTech"+xe[b]+"_"](d)})});this.on(this.tech_,
"loadstart",this.handleTechLoadStart_);this.on(this.tech_,"sourceset",this.handleTechSourceset_);this.on(this.tech_,"waiting",this.handleTechWaiting_);this.on(this.tech_,"ended",this.handleTechEnded_);this.on(this.tech_,"seeking",this.handleTechSeeking_);this.on(this.tech_,"play",this.handleTechPlay_);this.on(this.tech_,"firstplay",this.handleTechFirstPlay_);this.on(this.tech_,"pause",this.handleTechPause_);this.on(this.tech_,"durationchange",this.handleTechDurationChange_);this.on(this.tech_,"fullscreenchange",
this.handleTechFullscreenChange_);this.on(this.tech_,"error",this.handleTechError_);this.on(this.tech_,"loadedmetadata",this.updateStyleEl_);this.on(this.tech_,"posterchange",this.handleTechPosterChange_);this.on(this.tech_,"textdata",this.handleTechTextData_);this.on(this.tech_,"ratechange",this.handleTechRateChange_);this.usingNativeControls(this.techGet_("controls"));this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_();this.tech_.el().parentNode===this.el()||"Html5"===
c&&this.tag||Cc(this.tech_.el(),this.el());this.tag&&(this.tag=this.tag.player=null)};b.prototype.unloadTech_=function(){var b=this;la.names.forEach(function(e){e=la[e];b[e.privateName]=b[e.getterName]()});this.textTracksJson_=mg.textTracksToJson(this.tech_);this.isReady_=!1;this.tech_.dispose();this.tech_=!1;this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange"));this.isPosterFromTech_=!1};b.prototype.tech=function(b){void 0===b&&I.warn(td(Ck));return this.tech_};b.prototype.addTechControlsListeners_=
function(){this.removeTechControlsListeners_();this.on(this.tech_,"mousedown",this.handleTechClick_);this.on(this.tech_,"dblclick",this.handleTechDoubleClick_);this.on(this.tech_,"touchstart",this.handleTechTouchStart_);this.on(this.tech_,"touchmove",this.handleTechTouchMove_);this.on(this.tech_,"touchend",this.handleTechTouchEnd_);this.on(this.tech_,"tap",this.handleTechTap_)};b.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_);this.off(this.tech_,"touchstart",
this.handleTechTouchStart_);this.off(this.tech_,"touchmove",this.handleTechTouchMove_);this.off(this.tech_,"touchend",this.handleTechTouchEnd_);this.off(this.tech_,"mousedown",this.handleTechClick_);this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)};b.prototype.handleTechReady_=function(){this.triggerReady();this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume);this.handleTechPosterChange_();this.handleTechDurationChange_()};b.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended");
this.removeClass("vjs-seeking");this.error(null);this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"));this.manualAutoplay_(this.autoplay())};b.prototype.manualAutoplay_=function(b){var e=this;if(this.tech_&&"string"===typeof b){var d=function(){var b=e.muted();e.muted(!0);var d=e.play();if(d&&d.then&&d["catch"])return d["catch"](function(d){e.muted(b)})},g=void 0;"any"===b?(g=this.play())&&g.then&&g["catch"]&&g["catch"](function(){return d()}):
g="muted"===b?d():this.play();if(g&&g.then&&g["catch"])return g.then(function(){e.trigger({type:"autoplay-success",autoplay:b})})["catch"](function(d){e.trigger({type:"autoplay-failure",autoplay:b})})}};b.prototype.updateSourceCaches_=function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",g=b,d="";"string"!==typeof g&&(g=b.src,d=b.type);if(!/^blob:/.test(g)){this.cache_.source=this.cache_.source||{};this.cache_.sources=this.cache_.sources||[];g&&!d&&(d=fk(this,g));this.cache_.source=
R({},b,{src:g,type:d});b=this.cache_.sources.filter(function(b){return b.src&&b.src===g});d=[];for(var c=this.$$("source"),f=[],a=0;a<c.length;a++){var h=Ma(c[a]);d.push(h);h.src&&h.src===g&&f.push(h.src)}f.length&&!b.length?this.cache_.sources=d:b.length||(this.cache_.sources=[this.cache_.source]);this.cache_.src=g}};b.prototype.handleTechSourceset_=function(b){var e=this;if(!this.changingSrc_&&(this.updateSourceCaches_(b.src),!b.src))this.tech_.one(["sourceset","loadstart"],function f(b){"sourceset"!==
b.type&&e.updateSourceCaches_(e.techGet_("currentSrc"));e.tech_.off(["sourceset","loadstart"],f)});this.trigger({src:b.src,type:"sourceset"})};b.prototype.hasStarted=function(b){if(void 0===b)return this.hasStarted_;b!==this.hasStarted_&&((this.hasStarted_=b)?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))};b.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.hasStarted(!0);
this.trigger("play")};b.prototype.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(b){return b.callback(b.event)}),this.queuedCallbacks_=[]);this.cache_.lastPlaybackRate=this.tech_.playbackRate();this.trigger("ratechange")};b.prototype.handleTechWaiting_=function(){var b=this;this.addClass("vjs-waiting");this.trigger("waiting");this.one("timeupdate",function(){return b.removeClass("vjs-waiting")})};b.prototype.handleTechCanPlay_=
function(){this.removeClass("vjs-waiting");this.trigger("canplay")};b.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting");this.trigger("canplaythrough")};b.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting");this.trigger("playing")};b.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking");this.trigger("seeking")};b.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking");this.trigger("seeked")};b.prototype.handleTechFirstPlay_=
function(){this.options_.starttime&&(I.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime));this.addClass("vjs-has-started");this.trigger("firstplay")};b.prototype.handleTechPause_=function(){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.trigger("pause")};b.prototype.handleTechEnded_=function(){this.addClass("vjs-ended");this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause();this.trigger("ended")};
b.prototype.showSuggestion=function(b){b?this.addClass("vjs-suggestion"):this.removeClass("vjs-suggestion")};b.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))};b.prototype.handleTechClick_=function(b){sb(b)&&this.controls_&&(this.paused()?Ub(this.play()):this.pause())};b.prototype.handleTechDoubleClick_=function(b){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(e){return e.contains(b.target)})||(this.isFullscreen()?
this.exitFullscreen():this.requestFullscreen()))};b.prototype.handleTechTap_=function(){this.userActive(!this.userActive())};b.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()};b.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()};b.prototype.handleTechTouchEnd_=function(b){b.preventDefault()};b.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")};b.prototype.handleStageClick_=
function(){this.reportUserActivity()};b.prototype.handleTechFullscreenChange_=function(b,g){g&&this.isFullscreen(g.isFullscreen);this.trigger("fullscreenchange")};b.prototype.handleTechError_=function(){var b=this.tech_.error();this.error(b)};b.prototype.handleTechTextData_=function(){var b=null;1<arguments.length&&(b=arguments[1]);this.trigger("textdata",b)};b.prototype.getCache=function(){return this.cache_};b.prototype.techCall_=function(b,g){this.ready(function(){if(b in dk)return this.tech_[b](this.middleware_.reduce(Gd(b),
g));if(b in Eg)return Nf(this.middleware_,this.tech_,b,g);try{if(this.tech_)this.tech_[b](g)}catch(d){throw I(d),d;}},!0)};b.prototype.techGet_=function(b){if(this.tech_&&this.tech_.isReady_){if(b in ck){var e=this.tech_;return this.middleware_.reduceRight(Gd(b),e[b]())}if(b in Eg)return Nf(this.middleware_,this.tech_,b);try{return this.tech_[b]()}catch(d){if(void 0===this.tech_[b])throw I("Video.js: "+b+" method not defined for "+this.techName_+" playback technology.",d),d;if("TypeError"===d.name)throw I("Video.js: "+
b+" unavailable on "+this.techName_+" playback technology element.",d),this.tech_.isReady_=!1,d;I(d);throw d;}}};b.prototype.play=function(){var b=this,g=this.options_.Promise||q.Promise;return g?new g(function(e){b.play_(e)}):this.play_()};b.prototype.play_=function(){var b=this,g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Ub;this.playOnLoadstart_&&this.off("loadstart",this.playOnLoadstart_);this.isReady_?this.changingSrc_||!this.src()&&!this.currentSrc()?(this.playOnLoadstart_=function(){b.playOnLoadstart_=
null;g(b.play())},this.one("loadstart",this.playOnLoadstart_)):g(this.techGet_("play")):this.playWaitingForReady_||(this.playWaitingForReady_=!0,this.ready(function(){b.playWaitingForReady_=!1;g(b.play())}))};b.prototype.pause=function(){this.techCall_("pause")};b.prototype.paused=function(){return!1===this.techGet_("paused")?!1:!0};b.prototype.played=function(){return this.techGet_("played")||hb(0,0)};b.prototype.scrubbing=function(b){if("undefined"===typeof b)return this.scrubbing_;this.scrubbing_=
!!b;b?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")};b.prototype.currentTime=function(b){if("undefined"!==typeof b)0>b&&(b=0),this.techCall_("setCurrentTime",b);else return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime};b.prototype.duration=function(b){if(void 0===b)return void 0!==this.cache_.duration?this.cache_.duration:NaN;b=parseFloat(b);0>b&&(b=Infinity);b!==this.cache_.duration&&(this.cache_.duration=b,Infinity===b?this.addClass("vjs-live"):
this.removeClass("vjs-live"),this.trigger("durationchange"))};b.prototype.remainingTime=function(){return this.duration()-this.currentTime()};b.prototype.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())};b.prototype.buffered=function(){var b=this.techGet_("buffered");b&&b.length||(b=hb(0,0));return b};b.prototype.bufferedPercent=function(){return Ff(this.buffered(),this.duration())};b.prototype.bufferedEnd=function(){var b=this.buffered(),g=this.duration();
b=b.end(b.length-1);b>g&&(b=g);return b};b.prototype.volume=function(b){if(void 0!==b)b=Math.max(0,Math.min(1,parseFloat(b))),this.cache_.volume=b,this.techCall_("setVolume",b),0<b&&this.lastVolume_(b);else return b=parseFloat(this.techGet_("volume")),isNaN(b)?1:b};b.prototype.muted=function(b){if(void 0!==b)this.techCall_("setMuted",b);else return this.techGet_("muted")||!1};b.prototype.defaultMuted=function(b){return void 0!==b?this.techCall_("setDefaultMuted",b):this.techGet_("defaultMuted")||
!1};b.prototype.lastVolume_=function(b){if(void 0!==b&&0!==b)this.cache_.lastVolume=b;else return this.cache_.lastVolume};b.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1};b.prototype.isFullscreen=function(b){if(void 0!==b)this.isFullscreen_=!!b;else return!!this.isFullscreen_};b.prototype.requestFullscreen=function(){this.isFullscreen(!0);Sa.requestFullscreen?(ua(x,Sa.fullscreenchange,F(this,function d(b){this.isFullscreen(x[Sa.fullscreenElement]);!1===this.isFullscreen()&&
va(x,Sa.fullscreenchange,d);this.trigger("fullscreenchange")})),this.el_[Sa.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))};b.prototype.exitFullscreen=function(){this.isFullscreen(!1);if(Sa.requestFullscreen)x[Sa.exitFullscreen]();else this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))};b.prototype.enterFullWindow=function(){this.isFullWindow=
!0;this.docOrigOverflow=x.documentElement.style.overflow;ua(x,"keydown",F(this,this.fullWindowOnEscKey));x.documentElement.style.overflow="hidden";eb(x.body,"vjs-full-window");this.trigger("enterFullWindow")};b.prototype.fullWindowOnEscKey=function(b){27===b.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())};b.prototype.exitFullWindow=function(){this.isFullWindow=!1;va(x,"keydown",this.fullWindowOnEscKey);x.documentElement.style.overflow=this.docOrigOverflow;Pb(x.body,
"vjs-full-window");this.trigger("exitFullWindow")};b.prototype.canPlayType=function(b){for(var e,d=0,g=this.options_.techOrder;d<g.length;d++){e=g[d];var f=P.getTech(e);f||(f=v.getComponent(e));if(!f)I.error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.');else if(f.isSupported()&&(e=f.canPlayType(b)))return e}return""};b.prototype.selectSource=function(b){var e=this,d=this.options_.techOrder.map(function(b){return[b,P.getTech(b)]}).filter(function(b){var e=b[0];if(b=
b[1])return b.isSupported();I.error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.');return!1}),g=function(b,e,d){var a=void 0;b.some(function(b){return e.some(function(e){if(a=d(b,e))return!0})});return a},f=void 0;f=function(b){return function(e,d){return b(d,e)}};var a=function(b,d){var a=b[0];if(b[1].canPlaySource(d,e.options_[a.toLowerCase()]))return{source:d,tech:a}};return(f=this.options_.sourceOrder?g(b,d,f(a)):g(d,b,a))||!1};b.prototype.src=function(b){var e=
this;if("undefined"===typeof b)return this.cache_.src||"";var d=gk(b);d.length?(this.changingSrc_=!0,this.cache_.sources=d,this.updateSourceCaches_(d[0]),zj(this,d[0],function(b,g){e.middleware_=g;e.cache_.sources=d;e.updateSourceCaches_(b);if(e.src_(b)){if(1<d.length)return e.src(d.slice(1));e.changingSrc_=!1;e.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0);e.triggerReady()}else Aj(g,e.tech_)})):this.setTimeout(function(){this.error({code:4,
message:this.localize(this.options_.notSupportedMessage)})},0)};b.prototype.src_=function(b){var e=this,d=this.selectSource([b]);if(!d)return!0;if(!lj(d.tech,this.techName_))return this.changingSrc_=!0,this.loadTech_(d.tech,d.source),this.tech_.ready(function(){e.changingSrc_=!1}),!1;this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",b):this.techCall_("src",b.src);this.changingSrc_=!1},!0);return!1};b.prototype.load=function(){this.techCall_("load")};
b.prototype.reset=function(){this.tech_&&this.tech_.clearTracks("text");this.loadTech_(this.options_.techOrder[0],null);this.techCall_("reset")};b.prototype.currentSources=function(){var b=this.currentSource(),g=[];0!==Object.keys(b).length&&g.push(b);return this.cache_.sources||g};b.prototype.currentSource=function(){return this.cache_.source||{}};b.prototype.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""};b.prototype.currentType=function(){return this.currentSource()&&
this.currentSource().type||""};b.prototype.preload=function(b){if(void 0!==b)this.techCall_("setPreload",b),this.options_.preload=b;else return this.techGet_("preload")};b.prototype.autoplay=function(b){if(void 0===b)return this.options_.autoplay||!1;var e=void 0;"string"===typeof b&&/(any|play|muted)/.test(b)?(this.options_.autoplay=b,this.manualAutoplay_(b),e=!1):this.options_.autoplay=b?!0:!1;e=e||this.options_.autoplay;this.tech_&&this.techCall_("setAutoplay",e)};b.prototype.playsinline=function(b){return void 0!==
b?(this.techCall_("setPlaysinline",b),this.options_.playsinline=b,this):this.techGet_("playsinline")};b.prototype.loop=function(b){if(void 0!==b)this.techCall_("setLoop",b),this.options_.loop=b;else return this.techGet_("loop")};b.prototype.poster=function(b){if(void 0===b)return this.poster_;b||(b="");b!==this.poster_&&(this.poster_=b,this.techCall_("setPoster",b),this.isPosterFromTech_=!1,this.trigger("posterchange"))};b.prototype.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&
this.tech_&&this.tech_.poster){var b=this.tech_.poster()||"";b!==this.poster_&&(this.poster_=b,this.isPosterFromTech_=!0,this.trigger("posterchange"))}};b.prototype.controls=function(b){if(void 0===b)return!!this.controls_;b=!!b;this.controls_!==b&&(this.controls_=b,this.usingNativeControls()&&this.techCall_("setControls",b),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):
(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))};b.prototype.usingNativeControls=function(b){if(void 0===b)return!!this.usingNativeControls_;b=!!b;this.usingNativeControls_!==b&&((this.usingNativeControls_=b)?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))};
b.prototype.error=function(b){if(void 0===b)return this.error_||null;null===b?(this.error_=b,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close()):(this.error_=new na(b),this.addClass("vjs-error"),I.error("(CODE:"+this.error_.code+" "+na.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"))};b.prototype.reportUserActivity=function(b){this.userActivity_=!0};b.prototype.userActive=function(b){if(void 0===b)return this.userActive_;b=!!b;if(b!==
this.userActive_)if(this.userActive_=b)this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");else{if(this.tech_)this.tech_.one("mousemove",function(b){b.stopPropagation();b.preventDefault()});this.userActivity_=!1;this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive")}};b.prototype.listenForUserActivity_=function(){var b=void 0,g=void 0,d=void 0,c=F(this,this.reportUserActivity);this.on("mousedown",
function(){c();this.clearInterval(b);b=this.setInterval(c,250)});this.on("mousemove",function(b){if(b.screenX!==g||b.screenY!==d)g=b.screenX,d=b.screenY,c()});this.on("mouseup",function(e){c();this.clearInterval(b)});this.on("keydown",c);this.on("keyup",c);var f=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1;this.userActive(!0);this.clearTimeout(f);var b=this.options_.inactivityTimeout;0>=b||(f=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},b))}},
250)};b.prototype.playbackRate=function(b){if(void 0!==b)this.techCall_("setPlaybackRate",b);else return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1};b.prototype.defaultPlaybackRate=function(b){return void 0!==b?this.techCall_("setDefaultPlaybackRate",b):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1};b.prototype.isAudio=function(b){if(void 0!==b)this.isAudio_=!!b;else return!!this.isAudio_};b.prototype.addTextTrack=
function(b,g,d){if(this.tech_)return this.tech_.addTextTrack(b,g,d)};b.prototype.addRemoteTextTrack=function(b,g){if(this.tech_)return this.tech_.addRemoteTextTrack(b,g)};b.prototype.removeRemoteTextTrack=function(){var b=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).track;b=void 0===b?arguments[0]:b;if(this.tech_)return this.tech_.removeRemoteTextTrack(b)};b.prototype.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")};b.prototype.videoWidth=function(){return this.tech_&&
this.tech_.videoWidth&&this.tech_.videoWidth()||0};b.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0};b.prototype.language=function(b){if(void 0===b)return this.language_;this.language_=String(b).toLowerCase()};b.prototype.languages=function(){return R(b.prototype.options_.languages,this.languages_)};b.prototype.toJSON=function(){var b=R(this.options_),g=b.tracks;b.tracks=[];for(var d=0;d<g.length;d++){var c=g[d];c=R(c);c.player=void 0;b.tracks[d]=
c}return b};b.prototype.createModal=function(b,g){var e=this;g=g||{};g.content=b||"";var c=new zb(this,g);this.addChild(c);c.on("dispose",function(){e.removeChild(c)});c.open();return c};b.getTagSettings=function(b){var e={sources:[],tracks:[]},d=Ma(b),g=d["data-setup"];rb(b,"vjs-fluid")&&(d.fluid=!0);if(null!==g){var f=null;try{var a=JSON.parse(g||"{}",void 0)}catch(h){f=h}a=[f,a];g=a[0];a=a[1];g&&I.error(g);Y(d,a)}Y(e,d);if(b.hasChildNodes())for(b=b.childNodes,d=0,g=b.length;d<g;d++)a=b[d],f=a.nodeName.toLowerCase(),
"source"===f?e.sources.push(Ma(a)):"track"===f&&e.tracks.push(Ma(a));return e};b.prototype.flexNotSupported_=function(){var b=x.createElement("i");return!("flexBasis"in b.style||"webkitFlexBasis"in b.style||"mozFlexBasis"in b.style||"msFlexBasis"in b.style||"msFlexOrder"in b.style)};return b}(v);la.names.forEach(function(g){var b=la[g];ha.prototype[b.getterName]=function(){if(this.tech_)return this.tech_[b.getterName]();this[b.privateName]=this[b.privateName]||new b.ListClass;return this[b.privateName]}});
ha.players={};var gc=q.navigator;ha.prototype.options_={techOrder:P.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2E3,playbackRates:[],children:"mediaLoader posterImage textTrackDisplay loadingSpinner bigPlayButton controlBar errorDisplay textTrackSettings resizeManager".split(" "),language:gc&&(gc.languages&&gc.languages[0]||gc.userLanguage||gc.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."};["ended","seeking","seekable","networkState","readyState"].forEach(function(g){ha.prototype[g]=
function(){return this.techGet_(g)}});ih.forEach(function(g){ha.prototype["handleTech"+U(g)+"_"]=function(){return this.trigger(g)}});v.registerComponent("Player",ha);var Ta={},Tc=function(g){return Ta.hasOwnProperty(g)?Ta[g]:void 0},Uc=function(g,b,e){e=(e?"before":"")+"pluginsetup";g.trigger(e,b);g.trigger(e+":"+b.name,b)},Dk=function(g,b){var e=function(){Uc(this,{name:g,plugin:b,instance:null},!0);var e=b.apply(this,arguments);this.activePlugins_=this.activePlugins_||{};this.activePlugins_[g]=
!0;Uc(this,{name:g,plugin:b,instance:e});return e};Object.keys(b).forEach(function(g){e[g]=b[g]});return e},jh=function(g,b){b.prototype.name=g;return function(){Uc(this,{name:g,plugin:b,instance:null},!0);for(var e=arguments.length,l=Array(e),d=0;d<e;d++)l[d]=arguments[d];var c=new (Function.prototype.bind.apply(b,[null].concat([this].concat(l))));this[g]=function(){return c};Uc(this,c.getEventHash());return c}},Qa=function(){function g(b){y(this,g);if(this.constructor===g)throw Error("Plugin must be sub-classed; not directly instantiated.");
this.player=b;Ad(this);delete this.trigger;Df(this,this.constructor.defaultState);var e=this.name;b.activePlugins_=b.activePlugins_||{};b.activePlugins_[e]=!0;this.dispose=F(this,this.dispose);b.on("dispose",this.dispose)}g.prototype.version=function(){return this.constructor.VERSION};g.prototype.getEventHash=function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};b.name=this.name;b.plugin=this.constructor;b.instance=this;return b};g.prototype.trigger=function(b){return tb(this.eventBusEl_,
b,this.getEventHash(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))};g.prototype.handleStateChanged=function(b){};g.prototype.dispose=function(){var b=this.name,e=this.player;this.trigger("dispose");this.off();e.off("dispose",this.dispose);e.activePlugins_[b]=!1;this.player=this.state=null;e[b]=jh(b,Ta[b])};g.isBasic=function(b){b="string"===typeof b?Tc(b):b;return"function"===typeof b&&!g.prototype.isPrototypeOf(b.prototype)};g.registerPlugin=function(b,e){if("string"!==typeof b)throw Error('Illegal plugin name, "'+
b+'", must be a string, was '+("undefined"===typeof b?"undefined":da(b))+".");if(Ta.hasOwnProperty(b))I.warn('A plugin named "'+b+'" already exists. You may want to avoid re-registering plugins!');else if(ha.prototype.hasOwnProperty(b))throw Error('Illegal plugin name, "'+b+'", cannot share a name with an existing player method!');if("function"!==typeof e)throw Error('Illegal plugin for "'+b+'", must be a function, was '+("undefined"===typeof e?"undefined":da(e))+".");Ta[b]=e;"plugin"!==b&&(g.isBasic(e)?
ha.prototype[b]=Dk(b,e):ha.prototype[b]=jh(b,e));return e};g.deregisterPlugin=function(b){if("plugin"===b)throw Error("Cannot de-register base plugin.");Ta.hasOwnProperty(b)&&(delete Ta[b],delete ha.prototype[b])};g.getPlugins=function(){var b=void 0;(0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object.keys(Ta)).forEach(function(e){var g=Tc(e);g&&(b=b||{},b[e]=g)});return b};g.getPluginVersion=function(b){return(b=Tc(b))&&b.VERSION||""};return g}();Qa.getPlugin=Tc;Qa.BASE_PLUGIN_NAME="plugin";
Qa.registerPlugin("plugin",Qa);ha.prototype.usingPlugin=function(g){return!!this.activePlugins_&&!0===this.activePlugins_[g]};ha.prototype.hasPlugin=function(g){return!!Ta.hasOwnProperty(g)};var Ek=function(g,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof b?"undefined":da(b)));g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}});b&&(g.super_=b)},Rf=function(g){return 0===
g.indexOf("#")?g.slice(1):g};r.hooks_={};r.hooks=function(g,b){r.hooks_[g]=r.hooks_[g]||[];b&&(r.hooks_[g]=r.hooks_[g].concat(b));return r.hooks_[g]};r.hook=function(g,b){r.hooks(g,b)};r.hookOnce=function(g,b){r.hooks(g,[].concat(b).map(function(b){return function d(){r.removeHook(g,d);return b.apply(void 0,arguments)}}))};r.removeHook=function(g,b){var e=r.hooks(g).indexOf(b);if(-1>=e)return!1;r.hooks_[g]=r.hooks_[g].slice();r.hooks_[g].splice(e,1);return!0};if(!0!==q.VIDEOJS_NO_DYNAMIC_STYLE&&qb()){var Vc=
Ra(".vjs-styles-defaults");if(!Vc){Vc=Zf("vjs-styles-defaults");var ye=Ra("head");ye&&ye.insertBefore(Vc,ye.firstChild);$f(Vc,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}yd(1,r);r.VERSION="7.2.2";r.options=ha.prototype.options_;r.getPlayers=function(){return ha.players};r.getPlayer=function(g){var b=ha.players;if("string"===typeof g){g=Rf(g);var e=b[g];if(e)return e;g=Ra("#"+g)}if(Nb(g)&&(e=g,g=e.player,
e=e.playerId,g||b[e]))return g||b[e]};r.getAllPlayers=function(){return Object.keys(ha.players).map(function(g){return ha.players[g]}).filter(Boolean)};r.players=ha.players;r.getComponent=v.getComponent;r.registerComponent=function(g,b){P.isTech(b)&&I.warn("The "+g+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)");v.registerComponent.call(v,g,b)};r.getTech=P.getTech;r.registerTech=P.registerTech;r.use=function(g,b){jb[g]=jb[g]||[];jb[g].push(b)};
Object.defineProperty(r,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(r.middleware,"TERMINATOR",{value:Hc,writeable:!1,enumerable:!0});r.browser=Jj;r.TOUCH_ENABLED=Kc;r.extend=function(g){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=function(){g.apply(this,arguments)},l={};"object"===("undefined"===typeof b?"undefined":da(b))?(b.constructor!==Object.prototype.constructor&&(e=b.constructor),l=b):"function"===typeof b&&(e=b);Ek(e,g);for(var d in l)l.hasOwnProperty(d)&&
(e.prototype[d]=l[d]);return e};r.mergeOptions=R;r.bind=F;r.registerPlugin=Qa.registerPlugin;r.deregisterPlugin=Qa.deregisterPlugin;r.plugin=function(g,b){I.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead");return Qa.registerPlugin(g,b)};r.getPlugins=Qa.getPlugins;r.getPlugin=Qa.getPlugin;r.getPluginVersion=Qa.getPluginVersion;r.addLanguage=function(g,b){var e;g=(""+g).toLowerCase();r.options.languages=R(r.options.languages,(e={},e[g]=b,e));return r.options.languages[g]};
r.log=I;r.createTimeRange=r.createTimeRanges=hb;r.formatTime=ub;r.setFormatTime=function(g){Jd=g};r.resetFormatTime=function(){Jd=Hg};r.parseUrl=Xd;r.isCrossOrigin=Pc;r.EventTarget=O;r.on=ua;r.one=Tb;r.off=va;r.trigger=tb;r.xhr=Na;r.TextTrack=cc;r.AudioTrack=yg;r.VideoTrack=zg;"isEl isTextNode createEl hasClass addClass removeClass toggleClass setAttributes getAttributes emptyEl appendContent insertContent".split(" ").forEach(function(g){r[g]=function(){I.warn("videojs."+g+"() is deprecated; use videojs.dom."+
g+"() instead");return Yf[g].apply(null,arguments)}});r.computedStyle=sd;r.dom=Yf;r.url=Sj;var Wc=J(function(g,b){(function(b){var e=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,d=/^([^\/;?#]*)(.*)$/,c=/(?:\/|^)\.(?=\/)/g,f=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,a={buildAbsoluteURL:function(b,e,g){g=g||{};b=b.trim();e=e.trim();if(!e){if(!g.alwaysNormalize)return b;g=a.parseURL(b);if(!g)throw Error("Error trying to parse base URL.");g.path=a.normalizePath(g.path);return a.buildURLFromParts(g)}var c=
a.parseURL(e);if(!c)throw Error("Error trying to parse relative URL.");if(c.scheme){if(!g.alwaysNormalize)return e;c.path=a.normalizePath(c.path);return a.buildURLFromParts(c)}e=a.parseURL(b);if(!e)throw Error("Error trying to parse base URL.");!e.netLoc&&e.path&&"/"!==e.path[0]&&(b=d.exec(e.path),e.netLoc=b[1],e.path=b[2]);e.netLoc&&!e.path&&(e.path="/");b={scheme:e.scheme,netLoc:c.netLoc,path:null,params:c.params,query:c.query,fragment:c.fragment};c.netLoc||(b.netLoc=e.netLoc,"/"!==c.path[0]&&(c.path?
(e=e.path,e=e.substring(0,e.lastIndexOf("/")+1)+c.path,b.path=a.normalizePath(e)):(b.path=e.path,c.params||(b.params=e.params,c.query||(b.query=e.query)))));null===b.path&&(b.path=g.alwaysNormalize?a.normalizePath(c.path):c.path);return a.buildURLFromParts(b)},parseURL:function(b){return(b=e.exec(b))?{scheme:b[1]||"",netLoc:b[2]||"",path:b[3]||"",params:b[4]||"",query:b[5]||"",fragment:b[6]||""}:null},normalizePath:function(b){for(b=b.split("").reverse().join("").replace(c,"");b.length!==(b=b.replace(f,
"")).length;);return b.split("").reverse().join("")},buildURLFromParts:function(b){return b.scheme+b.netLoc+b.path+b.params+b.query+b.fragment}};g.exports=a})(Zb)}),Xc=function(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function");},Fk=Object.assign||function(g){for(var b=1;b<arguments.length;b++){var e=arguments[b],l;for(l in e)Object.prototype.hasOwnProperty.call(e,l)&&(g[l]=e[l])}return g},ze=function(g,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
("undefined"===typeof b?"undefined":da(b)));g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)},Ae=function(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==("undefined"===typeof b?"undefined":da(b))&&"function"!==typeof b?g:b},Be=function(){function g(){Xc(this,g);this.listeners={}}g.prototype.on=function(b,
e){this.listeners[b]||(this.listeners[b]=[]);this.listeners[b].push(e)};g.prototype.off=function(b,e){if(!this.listeners[b])return!1;var g=this.listeners[b].indexOf(e);this.listeners[b].splice(g,1);return-1<g};g.prototype.trigger=function(b){var e=this.listeners[b],g;if(e)if(2===arguments.length){var d=e.length;for(g=0;g<d;++g)e[g].call(this,arguments[1])}else{var c=Array.prototype.slice.call(arguments,1);d=e.length;for(g=0;g<d;++g)e[g].apply(this,c)}};g.prototype.dispose=function(){this.listeners=
{}};g.prototype.pipe=function(b){this.on("data",function(e){b.push(e)})};return g}(),Gk=function(g){function b(){Xc(this,b);var e=Ae(this,g.call(this));e.buffer="";return e}ze(b,g);b.prototype.push=function(b){this.buffer+=b;for(b=this.buffer.indexOf("\n");-1<b;b=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,b)),this.buffer=this.buffer.substring(b+1)};return b}(Be),hc=function(g){g=g.split(/(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))/);for(var b={},e=g.length,l;e--;)""!==g[e]&&(l=
/([^=]*)=(.*)/.exec(g[e]).slice(1),l[0]=l[0].replace(/^\s+|\s+$/g,""),l[1]=l[1].replace(/^\s+|\s+$/g,""),l[1]=l[1].replace(/^['"](.*)['"]$/g,"$1"),b[l[0]]=l[1]);return b},Hk=function(g){function b(){Xc(this,b);var e=Ae(this,g.call(this));e.customParsers=[];return e}ze(b,g);b.prototype.push=function(b){var e;b=b.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"");if(0!==b.length)if("#"!==b[0])this.trigger("data",{type:"uri",uri:b});else{for(e=0;e<this.customParsers.length;e++)if(this.customParsers[e].call(this,
b))return;if(0!==b.indexOf("#EXT"))this.trigger("data",{type:"comment",text:b.slice(1)});else if(b=b.replace("\r",""),e=/^#EXTM3U/.exec(b))this.trigger("data",{type:"tag",tagType:"m3u"});else if(e=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(b))b={type:"tag",tagType:"inf"},e[1]&&(b.duration=parseFloat(e[1])),e[2]&&(b.title=e[2]),this.trigger("data",b);else if(e=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(b))b={type:"tag",tagType:"targetduration"},e[1]&&(b.duration=parseInt(e[1],10)),this.trigger("data",b);
else if(e=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(b))b={type:"tag",tagType:"totalduration"},e[1]&&(b.duration=parseInt(e[1],10)),this.trigger("data",b);else if(e=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(b))b={type:"tag",tagType:"version"},e[1]&&(b.version=parseInt(e[1],10)),this.trigger("data",b);else if(e=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(b))b={type:"tag",tagType:"media-sequence"},e[1]&&(b.number=parseInt(e[1],10)),this.trigger("data",b);else if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(b))b=
{type:"tag",tagType:"discontinuity-sequence"},e[1]&&(b.number=parseInt(e[1],10)),this.trigger("data",b);else if(e=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(b))b={type:"tag",tagType:"playlist-type"},e[1]&&(b.playlistType=e[1]),this.trigger("data",b);else if(e=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(b))b={type:"tag",tagType:"byterange"},e[1]&&(b.length=parseInt(e[1],10)),e[2]&&(b.offset=parseInt(e[2],10)),this.trigger("data",b);else if(e=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(b))b={type:"tag",tagType:"allow-cache"},
e[1]&&(b.allowed=!/NO/.test(e[1])),this.trigger("data",b);else if(e=/^#EXT-X-MAP:?(.*)$/.exec(b)){b={type:"tag",tagType:"map"};if(e[1]&&(e=hc(e[1]),e.URI&&(b.uri=e.URI),e.BYTERANGE)){var d=e.BYTERANGE.split("@");e=d[0];d=d[1];b.byterange={};e&&(b.byterange.length=parseInt(e,10));d&&(b.byterange.offset=parseInt(d,10))}this.trigger("data",b)}else(e=/^#EXT-X-STREAM-INF:?(.*)$/.exec(b))?(b={type:"tag",tagType:"stream-inf"},e[1]&&(b.attributes=hc(e[1]),b.attributes.RESOLUTION&&(e=b.attributes.RESOLUTION.split("x"),
d={},e[0]&&(d.width=parseInt(e[0],10)),e[1]&&(d.height=parseInt(e[1],10)),b.attributes.RESOLUTION=d),b.attributes.BANDWIDTH&&(b.attributes.BANDWIDTH=parseInt(b.attributes.BANDWIDTH,10)),b.attributes["PROGRAM-ID"]&&(b.attributes["PROGRAM-ID"]=parseInt(b.attributes["PROGRAM-ID"],10))),this.trigger("data",b)):(e=/^#EXT-X-MEDIA:?(.*)$/.exec(b))?(b={type:"tag",tagType:"media"},e[1]&&(b.attributes=hc(e[1])),this.trigger("data",b)):(e=/^#EXT-X-ENDLIST/.exec(b))?this.trigger("data",{type:"tag",tagType:"endlist"}):
(e=/^#EXT-X-DISCONTINUITY/.exec(b))?this.trigger("data",{type:"tag",tagType:"discontinuity"}):(e=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(b))?(b={type:"tag",tagType:"program-date-time"},e[1]&&(b.dateTimeString=e[1],b.dateTimeObject=new Date(e[1])),this.trigger("data",b)):(e=/^#EXT-X-KEY:?(.*)$/.exec(b))?(b={type:"tag",tagType:"key"},e[1]&&(b.attributes=hc(e[1]),b.attributes.IV&&("0x"===b.attributes.IV.substring(0,2).toLowerCase()&&(b.attributes.IV=b.attributes.IV.substring(2)),b.attributes.IV=b.attributes.IV.match(/.{8}/g),
b.attributes.IV[0]=parseInt(b.attributes.IV[0],16),b.attributes.IV[1]=parseInt(b.attributes.IV[1],16),b.attributes.IV[2]=parseInt(b.attributes.IV[2],16),b.attributes.IV[3]=parseInt(b.attributes.IV[3],16),b.attributes.IV=new Uint32Array(b.attributes.IV))),this.trigger("data",b)):(e=/^#EXT-X-START:?(.*)$/.exec(b))?(b={type:"tag",tagType:"start"},e[1]&&(b.attributes=hc(e[1]),b.attributes["TIME-OFFSET"]=parseFloat(b.attributes["TIME-OFFSET"]),b.attributes.PRECISE=/YES/.test(b.attributes.PRECISE)),this.trigger("data",
b)):(e=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(b))?(b={type:"tag",tagType:"cue-out-cont"},b.data=e[1]?e[1]:"",this.trigger("data",b)):(e=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(b))?(b={type:"tag",tagType:"cue-out"},b.data=e[1]?e[1]:"",this.trigger("data",b)):(e=/^#EXT-X-CUE-IN:?(.*)?$/.exec(b))?(b={type:"tag",tagType:"cue-in"},b.data=e[1]?e[1]:"",this.trigger("data",b)):this.trigger("data",{type:"tag",data:b.slice(4)})}};b.prototype.addParser=function(b){var e=this,d=b.expression,g=b.customType,f=b.dataParser,
a=b.segment;"function"!==typeof f&&(f=function(b){return b});this.customParsers.push(function(b){if(d.exec(b))return e.trigger("data",{type:"custom",data:f(b),customType:g,segment:a}),!0})};return b}(Be),kh=function(g){function b(){Xc(this,b);var e=Ae(this,g.call(this));e.lineStream=new Gk;e.parseStream=new Hk;e.lineStream.pipe(e.parseStream);var l=[],d={},c=void 0,f=void 0,a=function(){},h={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},m=0;e.manifest={allowCache:!0,discontinuityStarts:[],
segments:[]};e.parseStream.on("data",function(b){var g=void 0,n=void 0;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=b.allowed;"allowed"in b||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in b&&(d.byterange=e,e.length=b.length,"offset"in b||(this.trigger("info",{message:"defaulting offset to zero"}),b.offset=0));"offset"in b&&(d.byterange=e,e.offset=b.offset)},endlist:function(){this.manifest.endList=
!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"}));"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"}));0<b.duration&&(d.duration=b.duration);0===b.duration&&(d.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"}));this.manifest.segments=l},key:function(){b.attributes?
"NONE"===b.attributes.METHOD?f=null:b.attributes.URI?(b.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),f={method:b.attributes.METHOD||"AES-128",uri:b.attributes.URI},"undefined"!==typeof b.attributes.IV&&(f.iv=b.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(b.number)?this.manifest.mediaSequence=b.number:
this.trigger("warn",{message:"ignoring invalid media sequence: "+b.number})},"discontinuity-sequence":function(){isFinite(b.number)?m=this.manifest.discontinuitySequence=b.number:this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+b.number})},"playlist-type":function(){/VOD|EVENT/.test(b.playlistType)?this.manifest.playlistType=b.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+b.playlist})},map:function(){c={};b.uri&&(c.uri=b.uri);b.byterange&&(c.byterange=
b.byterange)},"stream-inf":function(){this.manifest.playlists=l;this.manifest.mediaGroups=this.manifest.mediaGroups||h;b.attributes?(d.attributes||(d.attributes={}),Fk(d.attributes,b.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){this.manifest.mediaGroups=this.manifest.mediaGroups||h;if(b.attributes&&b.attributes.TYPE&&b.attributes["GROUP-ID"]&&b.attributes.NAME){var e=this.manifest.mediaGroups[b.attributes.TYPE];e[b.attributes["GROUP-ID"]]=e[b.attributes["GROUP-ID"]]||
{};g=e[b.attributes["GROUP-ID"]];n={"default":/yes/i.test(b.attributes.DEFAULT)};n.autoselect=n["default"]?!0:/yes/i.test(b.attributes.AUTOSELECT);b.attributes.LANGUAGE&&(n.language=b.attributes.LANGUAGE);b.attributes.URI&&(n.uri=b.attributes.URI);b.attributes["INSTREAM-ID"]&&(n.instreamId=b.attributes["INSTREAM-ID"]);b.attributes.CHARACTERISTICS&&(n.characteristics=b.attributes.CHARACTERISTICS);b.attributes.FORCED&&(n.forced=/yes/i.test(b.attributes.FORCED));g[b.attributes.NAME]=n}else this.trigger("warn",
{message:"ignoring incomplete or missing media group"})},discontinuity:function(){m+=1;d.discontinuity=!0;this.manifest.discontinuityStarts.push(l.length)},"program-date-time":function(){"undefined"===typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=b.dateTimeString,this.manifest.dateTimeObject=b.dateTimeObject);d.dateTimeString=b.dateTimeString;d.dateTimeObject=b.dateTimeObject},targetduration:function(){!isFinite(b.duration)||0>b.duration?this.trigger("warn",{message:"ignoring invalid target duration: "+
b.duration}):this.manifest.targetDuration=b.duration},totalduration:function(){!isFinite(b.duration)||0>b.duration?this.trigger("warn",{message:"ignoring invalid total duration: "+b.duration}):this.manifest.totalDuration=b.duration},start:function(){!b.attributes||isNaN(b.attributes["TIME-OFFSET"])?this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"}):this.manifest.start={timeOffset:b.attributes["TIME-OFFSET"],precise:b.attributes.PRECISE}},"cue-out":function(){d.cueOut=
b.data},"cue-out-cont":function(){d.cueOutCont=b.data},"cue-in":function(){d.cueIn=b.data}}[b.tagType]||a).call(e)},uri:function(){d.uri=b.uri;l.push(d);!this.manifest.targetDuration||"duration"in d||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),d.duration=this.manifest.targetDuration);f&&(d.key=f);d.timeline=m;c&&(d.map=c);d={}},comment:function(){},custom:function(){b.segment?(d.custom=d.custom||{},d.custom[b.customType]=b.data):(this.manifest.custom=this.manifest.custom||
{},this.manifest.custom[b.customType]=b.data)}})[b.type].call(e)});return e}ze(b,g);b.prototype.push=function(b){this.lineStream.push(b)};b.prototype.end=function(){this.lineStream.push("\n")};b.prototype.addParser=function(b){this.parseStream.addParser(b)};return b}(Be),Ik=function(g){return g.reduce(function(b,e){var g=e.attributes.role&&e.attributes.role.value||"main",d=e.attributes.lang||"",c="main";d&&(c=e.attributes.lang+" ("+g+")");if(b[c]&&b[c].playlists[0].attributes.BANDWIDTH>e.attributes.bandwidth)return b;
var f,a=e.attributes,h=e.segments;h={attributes:(f={NAME:a.id,BANDWIDTH:a.bandwidth,CODECS:a.codecs},f["PROGRAM-ID"]=1,f),uri:"",endList:"static"===(a.type||"static"),timeline:a.periodIndex,resolvedUri:"",targetDuration:a.duration,segments:h,mediaSequence:h.length?h[0].number:1};a.contentProtection&&(h.contentProtection=a.contentProtection);b[c]={language:d,autoselect:!0,"default":"main"===g,playlists:[h],uri:""};return b},{})},Jk=function(g){return g.reduce(function(b,e){var g=e.attributes.lang||
"text";if(b[g])return b;var d;var c=e.attributes;var f=e.segments;"undefined"===typeof f&&(f=[{uri:c.baseUrl,timeline:c.periodIndex,resolvedUri:c.baseUrl||"",duration:c.sourceDuration,number:0}],c.duration=c.sourceDuration);c={attributes:(d={NAME:c.id,BANDWIDTH:c.bandwidth},d["PROGRAM-ID"]=1,d),uri:"",endList:"static"===(c.type||"static"),timeline:c.periodIndex,resolvedUri:c.baseUrl||"",targetDuration:c.duration,segments:f,mediaSequence:f.length?f[0].number:1};b[g]={language:g,"default":!1,autoselect:!1,
playlists:[c],uri:""};return b},{})},Kk=function(g){var b,e=g.attributes;g=g.segments;g={attributes:(b={NAME:e.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:e.width,height:e.height},CODECS:e.codecs,BANDWIDTH:e.bandwidth},b["PROGRAM-ID"]=1,b),uri:"",endList:"static"===(e.type||"static"),timeline:e.periodIndex,resolvedUri:"",targetDuration:e.duration,segments:g,mediaSequence:g.length?g[0].number:1};e.contentProtection&&(g.contentProtection=e.contentProtection);return g},Lk=function(g){var b;if(!g.length)return{};
var e=g[0].attributes,l=e.sourceDuration;e=e.minimumUpdatePeriod;var d=void 0===e?0:e,c=g.filter(function(b){b=b.attributes;return"video/mp4"===b.mimeType||"video"===b.contentType}).map(Kk);e=g.filter(function(b){b=b.attributes;return"audio/mp4"===b.mimeType||"audio"===b.contentType});g=g.filter(function(b){b=b.attributes;return"text/vtt"===b.mimeType||"text"===b.contentType});l={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(b={AUDIO:{},VIDEO:{}},b["CLOSED-CAPTIONS"]={},
b.SUBTITLES={},b),uri:"",duration:l,playlists:c,minimumUpdatePeriod:1E3*d};e.length&&(l.mediaGroups.AUDIO.audio=Ik(e));g.length&&(l.mediaGroups.SUBTITLES.subs=Jk(g));return l};$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var Mk="function"===typeof Symbol&&"symbol"===da(Symbol.iterator)?function(g){return"undefined"===typeof g?"undefined":da(g)}:function(g){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();return g&&"function"===typeof Symbol&&g.constructor===
Symbol&&g!==Symbol.prototype?"symbol":"undefined"===typeof g?"undefined":da(g)},lh=function(g){return!!g&&"object"===("undefined"===typeof g?"undefined":Mk(g))},pa=function b(){for(var e=arguments.length,l=Array(e),d=0;d<e;d++)l[d]=arguments[d];return l.reduce(function(e,d){Object.keys(d).forEach(function(a){Array.isArray(e[a])&&Array.isArray(d[a])?e[a]=e[a].concat(d[a]):lh(e[a])&&lh(d[a])?e[a]=b(e[a],d[a]):e[a]=d[a]});return e},{})},Ce=function(b,e){if(/^[a-z]+:/i.test(e))return e;/\/\//i.test(b)||
(b=Wc.buildAbsoluteURL(q.location.href,b));return Wc.buildAbsoluteURL(b,e)},ic=function(b){var e=b.baseUrl,l=b.source;l=void 0===l?"":l;b=b.range;b=void 0===b?"":b;e={uri:l,resolvedUri:Ce((void 0===e?"":e)||"",l)};b&&(b=b.split("-"),l=parseInt(b[0],10),b=parseInt(b[1],10),e.byterange={length:b-l,offset:l});return e},mh=function(b,e){var l=b.type;l=void 0===l?"static":l;var d=b.minimumUpdatePeriod;d=void 0===d?0:d;var c=b.media;c=void 0===c?"":c;var f=b.sourceDuration,a=b.timescale;a=void 0===a?1:
a;var h=b.startNumber;h=void 0===h?1:h;for(var m=b.periodIndex,n=[],p=-1,u=0;u<e.length;u++){var t=e[u],N=t.d,A=t.r||0;t=t.t||0;0>p&&(p=t);t&&t>p&&(p=t);if(0>A)if(A=u+1,A===e.length)if("dynamic"===l&&0<d&&0<c.indexOf("$Number$")){A=b.timescale;t=b.start;var r=b.minimumUpdatePeriod;A=Math.ceil((((b.NOW+b.clientOffset)/1E3+(void 0===r?0:r)-(b.availabilityStartTime+(void 0===t?0:t)))*(void 0===A?1:A)-p)/N)}else A=(f*a-p)/N;else A=(e[A].t-p)/N;else A+=1;A=h+n.length+A;for(t=h+n.length;t<A;)n.push({number:t,
duration:N/a,time:p,timeline:m}),p+=N,t++}return n},Yc=function(b){return b.reduce(function(b,l){return b.concat(l)},[])},nh=function(b){if(!b.length)return[];for(var e=[],l=0;l<b.length;l++)e.push(b[l]);return e},Nk={"static":function(b){var e=b.timescale;return{start:0,end:Math.ceil(b.sourceDuration/(b.duration/(void 0===e?1:e)))}},dynamic:function(b){var e=b.timescale;e=void 0===e?1:e;var l=b.duration,d=b.start,c=b.minimumUpdatePeriod,f=b.timeShiftBufferDepth,a=(b.NOW+b.clientOffset)/1E3;b=b.availabilityStartTime+
(void 0===d?0:d);return{start:Math.max(0,Math.floor((a-b-(void 0===f?Infinity:f))*e/l)),end:Math.min(Math.ceil((a+(void 0===c?0:c)-b)*e/l),Math.floor((a-b)*e/l))}}},Ok=function(b){return function(e,l){var d=b.duration,c=b.timescale,f=b.startNumber;return{number:(void 0===f?1:f)+e,duration:d/(void 0===c?1:c),timeline:b.periodIndex,time:l*d}}},De=function(b){var e=b.type,l=void 0===e?"static":e;e=b.duration;var d=b.timescale;d=void 0===d?1:d;var c=b.sourceDuration,f=Nk[l](b),a=f.end,h=[];for(f=f.start;f<
a;f++)h.push(f);b=h.map(Ok(b));"static"===l&&(l=b.length-1,b[l].duration=c-e/d*l);return b},oh=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,ph=function(b){return function(e,l,d,c){if("$$"===e)return"$";if("undefined"===typeof b[l])return e;e=""+b[l];if("RepresentationID"===l)return e;c=d?parseInt(c,10):1;return e.length>=c?e:""+Array(c-e.length+1).join("0")+e}},Pk=function(b,e){return b.duration||e?b.duration?De(b):mh(b,e):[{number:b.startNumber||1,duration:b.sourceDuration,time:0,timeline:b.periodIndex}]},
Qk=function(b,e){var l={RepresentationID:b.id,Bandwidth:b.bandwidth||0},d=b.initialization;d=void 0===d?{sourceURL:"",range:""}:d;var c=ic({baseUrl:b.baseUrl,source:d.sourceURL.replace(oh,ph(l)),range:d.range});return Pk(b,e).map(function(e){l.Number=e.number;l.Time=e.time;var d=(b.media||"").replace(oh,ph(l));return{uri:d,timeline:e.timeline,duration:e.duration,resolvedUri:Ce(b.baseUrl||"",d),map:c,number:e.number}})},Rk=function(b,e){var l=b.duration,d=b.segmentUrls;d=void 0===d?[]:d;if(!l&&!e||
l&&e)throw Error("SEGMENT_TIME_UNSPECIFIED");var c=d.map(function(e){var d=b.baseUrl,c=b.initialization;c=void 0===c?{}:c;c=ic({baseUrl:d,source:c.sourceURL,range:c.range});e=ic({baseUrl:d,source:e.media,range:e.mediaRange});e.map=c;return e});d=void 0;l&&(d=De(b));e&&(d=mh(b,e));return d.map(function(b,e){if(c[e]){var d=c[e];d.timeline=b.timeline;d.duration=b.duration;d.number=b.number;return d}}).filter(function(b){return b})},Sk=function(b){var e=b.baseUrl,l=b.initialization,d=void 0===l?{}:l;
l=b.sourceDuration;var c=b.timescale;c=void 0===c?1:c;var f=b.indexRange,a=void 0===f?"":f;f=b.duration;if(!e)throw Error("NO_BASE_URL");d=ic({baseUrl:e,source:d.sourceURL,range:d.range});e=ic({baseUrl:e,source:e,range:a});e.map=d;f?(b=De(b),b.length&&(e.duration=b[0].duration,e.timeline=b[0].timeline)):l&&(e.duration=l/c,e.timeline=0);e.number=0;return[e]},Tk=function(b){var e=b.attributes,l=b.segmentInfo,d=b=void 0;l.template?(d=Qk,b=pa(e,l.template)):l.base?(d=Sk,b=pa(e,l.base)):l.list&&(d=Rk,
b=pa(e,l.list));if(!d)return{attributes:e};e=d(b,l.timeline);b.duration?(l=b,d=l.timescale,b.duration=l.duration/(void 0===d?1:d)):b.duration=e.length?e.reduce(function(b,e){return Math.max(b,Math.ceil(e.duration))},0):0;return{attributes:b,segments:e}},ia=function(b,e){return nh(b.childNodes).filter(function(b){return b.tagName===e})},jc=function(b){b=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(b);if(!b)return 0;b=b.slice(1);var e=b[1],l=b[2],d=b[3],c=b[4],
f=b[5];return 31536E3*parseFloat(b[0]||0)+2592E3*parseFloat(e||0)+86400*parseFloat(l||0)+3600*parseFloat(d||0)+60*parseFloat(c||0)+parseFloat(f||0)},qh={mediaPresentationDuration:function(b){return jc(b)},availabilityStartTime:function(b){/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(b)&&(b+="Z");return Date.parse(b)/1E3},minimumUpdatePeriod:function(b){return jc(b)},timeShiftBufferDepth:function(b){return jc(b)},start:function(b){return jc(b)},width:function(b){return parseInt(b,10)},height:function(b){return parseInt(b,
10)},bandwidth:function(b){return parseInt(b,10)},startNumber:function(b){return parseInt(b,10)},timescale:function(b){return parseInt(b,10)},duration:function(b){var e=parseInt(b,10);return isNaN(e)?jc(b):e},d:function(b){return parseInt(b,10)},t:function(b){return parseInt(b,10)},r:function(b){return parseInt(b,10)},DEFAULT:function(b){return b}},qa=function(b){return b&&b.attributes?nh(b.attributes).reduce(function(b,l){b[l.name]=(qh[l.name]||qh.DEFAULT)(l.value);return b},{}):{}},Uk={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey",
"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Zc=function(b,e){return e.length?Yc(b.map(function(b){return e.map(function(e){return Ce(b,e.textContent.trim())})})):b},Ee=function(b){var e=ia(b,"SegmentTemplate")[0],l=ia(b,"SegmentList")[0],d=l&&ia(l,"SegmentURL").map(function(b){return pa({tag:"SegmentURL"},qa(b))});b=ia(b,"SegmentBase")[0];
var c=l||e;c=c&&ia(c,"SegmentTimeline")[0];var f=l||b||e;f=f&&ia(f,"Initialization")[0];(e=e&&qa(e))&&f?e.initialization=f&&qa(f):e&&e.initialization&&(e.initialization={sourceURL:e.initialization});var a={template:e,timeline:c&&ia(c,"S").map(function(b){return qa(b)}),list:l&&pa(qa(l),{segmentUrls:d,initialization:qa(f)}),base:b&&pa(qa(b),{initialization:qa(f)})};Object.keys(a).forEach(function(b){a[b]||delete a[b]});return a},Vk=function(b,e,l){return function(d){var c=ia(d,"BaseURL");c=Zc(e,c);
var f=pa(b,qa(d)),a=Ee(d);return c.map(function(b){return{segmentInfo:pa(l,a),attributes:pa(f,{baseUrl:b})}})}},Wk=function(b){return b.reduce(function(b,l){var e=qa(l),c=Uk[e.schemeIdUri];if(c&&(b[c]={attributes:e},e=ia(l,"cenc:pssh")[0])){e=e.textContent.trim();var f;if(f=e){e=q.atob(e);f=new Uint8Array(e.length);for(var a=0;a<e.length;a++)f[a]=e.charCodeAt(a)}b[c].pssh=f}return b},{})},Xk=function(b,e,l){return function(d){var c=qa(d),f=Zc(e,ia(d,"BaseURL")),a=ia(d,"Role")[0];a={role:qa(a)};c=
pa(b,c,a);a=Wk(ia(d,"ContentProtection"));Object.keys(a).length&&(c=pa(c,{contentProtection:a}));a=Ee(d);d=ia(d,"Representation");a=pa(l,a);return Yc(d.map(Vk(c,f,a)))}},Yk=function(b,e){return function(l,d){var c=Zc(e,ia(l,"BaseURL")),f=qa(l);f=pa(b,f,{periodIndex:d});var a=ia(l,"AdaptationSet"),h=Ee(l);return Yc(a.map(Xk(f,c,h)))}},Zk=function(b){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=e.manifestUri;l=void 0===l?"":l;var d=e.NOW;d=void 0===d?Date.now():d;e=e.clientOffset;
e=void 0===e?0:e;var c=ia(b,"Period");if(1!==c.length)throw Error("INVALID_NUMBER_OF_PERIOD");var f=qa(b);l=Zc([l],ia(b,"BaseURL"));f.sourceDuration=f.mediaPresentationDuration||0;f.NOW=d;f.clientOffset=e;return Yc(c.map(Yk(f,l)))},rh=function(b){if(""===b)throw Error("DASH_EMPTY_MANIFEST");b=(b=(new q.DOMParser).parseFromString(b,"application/xml"))&&"MPD"===b.documentElement.tagName?b.documentElement:null;if(!b||b&&0<b.getElementsByTagName("parsererror").length)throw Error("DASH_INVALID_XML");return b},
$k=function(b){b=ia(b,"UTCTiming")[0];if(!b)return null;b=qa(b);switch(b.schemeIdUri){case "urn:mpeg:dash:utc:http-head:2014":case "urn:mpeg:dash:utc:http-head:2012":b.method="HEAD";break;case "urn:mpeg:dash:utc:http-xsdate:2014":case "urn:mpeg:dash:utc:http-iso:2014":case "urn:mpeg:dash:utc:http-xsdate:2012":case "urn:mpeg:dash:utc:http-iso:2012":b.method="GET";break;case "urn:mpeg:dash:utc:direct:2014":case "urn:mpeg:dash:utc:direct:2012":b.method="DIRECT";b.value=Date.parse(b.value);break;default:throw Error("UNSUPPORTED_UTC_TIMING_SCHEME");
}return b},al=function(b,e){return Lk(Zk(rh(b),e).map(Tk))},$c={toUnsigned:function(b){return b>>>0}},sh=Object.freeze({"default":$c,__moduleExports:$c,toUnsigned:$c.toUnsigned}),Eb=(sh&&$c||sh).toUnsigned;var ya=function(b,e){var l=[],d;if(!e.length)return null;for(d=0;d<b.byteLength;){var c=Eb(b[d]<<24|b[d+1]<<16|b[d+2]<<8|b[d+3]);var f=Fe(b.subarray(d+4,d+8));c=1<c?d+c:b.byteLength;f===e[0]&&(1===e.length?l.push(b.subarray(d+8,c)):(d=ya(b.subarray(d+8,c),e.slice(1)),d.length&&(l=l.concat(d))));
d=c}return l};var Fe=function(b){var e=""+String.fromCharCode(b[0]);e+=String.fromCharCode(b[1]);e+=String.fromCharCode(b[2]);return e+=String.fromCharCode(b[3])};var Fa={findBox:ya,parseType:Fe,timescale:function(b){return ya(b,["moov","trak"]).reduce(function(b,l){var e=ya(l,["tkhd"])[0];if(!e)return null;var c=e[0];c=0===c?12:20;e=Eb(e[c]<<24|e[c+1]<<16|e[c+2]<<8|e[c+3]);var f=ya(l,["mdia","mdhd"])[0];if(!f)return null;c=f[0];c=0===c?12:20;b[e]=Eb(f[c]<<24|f[c+1]<<16|f[c+2]<<8|f[c+3]);return b},
{})},startTime:function(b,e){var l=ya(e,["moof","traf"]);l=[].concat.apply([],l.map(function(e){return ya(e,["tfhd"]).map(function(d){d=Eb(d[4]<<24|d[5]<<16|d[6]<<8|d[7]);d=b[d]||9E4;var c=(c=ya(e,["tfdt"]).map(function(b){var e=b[0];var d=Eb(b[4]<<24|b[5]<<16|b[6]<<8|b[7]);1===e&&(d*=Math.pow(2,32),d+=Eb(b[8]<<24|b[9]<<16|b[10]<<8|b[11]));return d})[0])||Infinity;return c/d})}));l=Math.min.apply(null,l);return isFinite(l)?l:0},videoTrackIds:function(b){var e=[];ya(b,["moov","trak"]).forEach(function(b){var d=
ya(b,["mdia","hdlr"]),c=ya(b,["tkhd"]);d.forEach(function(b,d){var a=Fe(b.subarray(8,12)),f=c[d];"vide"===a&&(a=new DataView(f.buffer,f.byteOffset,f.byteLength),f=a.getUint8(0),a=0===f?a.getUint32(12):a.getUint32(20),e.push(a))})});return e}},th=Math.pow(2,32)-1,uh,Ge,G,He,vh,wh,xh,yh,zh,Ah,Bh,Ch,Ie,Dh,Eh,Fh;(function(){var b;G={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],
stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if("undefined"!==typeof Uint8Array){for(b in G)G.hasOwnProperty(b)&&(G[b]=[b.charCodeAt(0),b.charCodeAt(1),b.charCodeAt(2),b.charCodeAt(3)]);He=new Uint8Array([105,115,111,109]);wh=new Uint8Array([97,118,99,49]);vh=new Uint8Array([0,0,0,1]);xh=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);yh=new Uint8Array([0,0,0,0,0,0,
0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);zh={video:xh,audio:yh};Ch=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);Bh=new Uint8Array([0,0,0,0,0,0,0,0]);Dh=Ie=new Uint8Array([0,0,0,0,0,0,0,0]);Eh=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);Fh=Ie;Ah=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})();var H=function(b){var e=[],l=0,d;for(d=1;d<arguments.length;d++)e.push(arguments[d]);for(d=e.length;d--;)l+=e[d].byteLength;var c=new Uint8Array(l+
8);(new DataView(c.buffer,c.byteOffset,c.byteLength)).setUint32(0,c.byteLength);c.set(b,4);d=0;for(l=8;d<e.length;d++)c.set(e[d],l),l+=e[d].byteLength;return c};var bl=function(){return H(G.dinf,H(G.dref,Ch))};var cl=function(b){return H(G.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,b.audioobjecttype<<3|b.samplingfrequencyindex>>>1,b.samplingfrequencyindex<<7|b.channelcount<<3,6,1,2]))};var Gh=function(){return H(G.ftyp,He,vh,He,wh)};var dl=function(b){return H(G.hdlr,
zh[b])};var el=function(b){var e=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,b.duration>>>24&255,b.duration>>>16&255,b.duration>>>8&255,b.duration&255,85,196,0,0]);b.samplerate&&(e[12]=b.samplerate>>>24&255,e[13]=b.samplerate>>>16&255,e[14]=b.samplerate>>>8&255,e[15]=b.samplerate&255);return H(G.mdhd,e)};var gl=function(b){return H(G.mdia,el(b),dl(b.type),fl(b))};var hl=function(b){return H(G.mfhd,new Uint8Array([0,0,0,0,(b&4278190080)>>24,(b&16711680)>>16,(b&65280)>>8,b&255]))};var fl=function(b){return H(G.minf,
"video"===b.type?H(G.vmhd,Ah):H(G.smhd,Bh),bl(),il(b))};var Hh=function(b){for(var e=b.length,l=[];e--;)l[e]=jl(b[e]);return H.apply(null,[G.moov,kl(4294967295)].concat(l).concat(ll(b)))};var ll=function(b){for(var e=b.length,l=[];e--;)l[e]=ml(b[e]);return H.apply(null,[G.mvex].concat(l))};var kl=function(b){b=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(b&4278190080)>>24,(b&16711680)>>16,(b&65280)>>8,b&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return H(G.mvhd,b)};var nl=function(b){b=b.samples||[];var e=new Uint8Array(4+b.length),l;for(l=0;l<b.length;l++){var d=b[l].flags;e[l+4]=d.dependsOn<<4|d.isDependedOn<<2|d.hasRedundancy}return H(G.sdtp,e)};var il=function(b){return H(G.stbl,uh(b),H(G.stts,Fh),H(G.stsc,Dh),H(G.stsz,Eh),H(G.stco,Ie))};(function(){uh=function(l){return H(G.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===l.type?b(l):e(l))};var b=
function(b){var e=b.sps||[],c=b.pps||[],f=[],a=[],h;for(h=0;h<e.length;h++)f.push((e[h].byteLength&65280)>>>8),f.push(e[h].byteLength&255),f=f.concat(Array.prototype.slice.call(e[h]));for(h=0;h<c.length;h++)a.push((c[h].byteLength&65280)>>>8),a.push(c[h].byteLength&255),a=a.concat(Array.prototype.slice.call(c[h]));return H(G.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(b.width&65280)>>8,b.width&255,(b.height&65280)>>8,b.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,
100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),H(G.avcC,new Uint8Array([1,b.profileIdc,b.profileCompatibility,b.levelIdc,255].concat([e.length]).concat(f).concat([c.length]).concat(a))),H(G.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))};var e=function(b){return H(G.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(b.channelcount&65280)>>8,b.channelcount&255,(b.samplesize&65280)>>8,b.samplesize&255,0,0,0,0,(b.samplerate&65280)>>
8,b.samplerate&255,0,0]),cl(b))}})();var ol=function(b){b=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(b.id&4278190080)>>24,(b.id&16711680)>>16,(b.id&65280)>>8,b.id&255,0,0,0,0,(b.duration&4278190080)>>24,(b.duration&16711680)>>16,(b.duration&65280)>>8,b.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(b.width&65280)>>8,b.width&255,0,0,(b.height&65280)>>8,b.height&255,0,0]);return H(G.tkhd,b)};var pl=function(b){var e=H(G.tfhd,new Uint8Array([0,
0,0,58,(b.id&4278190080)>>24,(b.id&16711680)>>16,(b.id&65280)>>8,b.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));var l=Math.floor(b.baseMediaDecodeTime/(th+1));var d=Math.floor(b.baseMediaDecodeTime%(th+1));l=H(G.tfdt,new Uint8Array([1,0,0,0,l>>>24&255,l>>>16&255,l>>>8&255,l&255,d>>>24&255,d>>>16&255,d>>>8&255,d&255]));if("audio"===b.type)return b=Ge(b,92),H(G.traf,e,l,b);d=nl(b);b=Ge(b,d.length+92);return H(G.traf,e,l,b,d)};var jl=function(b){b.duration=b.duration||4294967295;return H(G.trak,ol(b),gl(b))};
var ml=function(b){var e=new Uint8Array([0,0,0,0,(b.id&4278190080)>>24,(b.id&16711680)>>16,(b.id&65280)>>8,b.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);"video"!==b.type&&(e[e.length-1]=0);return H(G.trex,e)};(function(){var b=function(b,e){var d=0,a=0,c=0,m=0;b.length&&(void 0!==b[0].duration&&(d=1),void 0!==b[0].size&&(a=2),void 0!==b[0].flags&&(c=4),void 0!==b[0].compositionTimeOffset&&(m=8));return[0,0,d|a|c|m,1,(b.length&4278190080)>>>24,(b.length&16711680)>>>16,(b.length&65280)>>>8,b.length&255,
(e&4278190080)>>>24,(e&16711680)>>>16,(e&65280)>>>8,e&255]};var e=function(e,c){var d;var a=e.samples||[];c+=20+16*a.length;var h=b(a,c);for(d=0;d<a.length;d++){var m=a[d];h=h.concat([(m.duration&4278190080)>>>24,(m.duration&16711680)>>>16,(m.duration&65280)>>>8,m.duration&255,(m.size&4278190080)>>>24,(m.size&16711680)>>>16,(m.size&65280)>>>8,m.size&255,m.flags.isLeading<<2|m.flags.dependsOn,m.flags.isDependedOn<<6|m.flags.hasRedundancy<<4|m.flags.paddingValue<<1|m.flags.isNonSyncSample,m.flags.degradationPriority&
61440,m.flags.degradationPriority&15,(m.compositionTimeOffset&4278190080)>>>24,(m.compositionTimeOffset&16711680)>>>16,(m.compositionTimeOffset&65280)>>>8,m.compositionTimeOffset&255])}return H(G.trun,new Uint8Array(h))};var l=function(e,c){var d;var a=e.samples||[];c+=20+8*a.length;var h=b(a,c);for(d=0;d<a.length;d++){var m=a[d];h=h.concat([(m.duration&4278190080)>>>24,(m.duration&16711680)>>>16,(m.duration&65280)>>>8,m.duration&255,(m.size&4278190080)>>>24,(m.size&16711680)>>>16,(m.size&65280)>>>
8,m.size&255])}return H(G.trun,new Uint8Array(h))};Ge=function(b,c){return"audio"===b.type?l(b,c):e(b,c)}})();var Ya={ftyp:Gh,mdat:function(b){return H(G.mdat,b)},moof:function(b,e){for(var l=[],d=e.length;d--;)l[d]=pl(e[d]);return H.apply(null,[G.moof,hl(b)].concat(l))},moov:Hh,initSegment:function(b){var e=Gh();b=Hh(b);var l=new Uint8Array(e.byteLength+b.byteLength);l.set(e);l.set(b,e.byteLength);return l}},Ih=Object.freeze({"default":Ya,__moduleExports:Ya,ftyp:Ya.ftyp,mdat:Ya.mdat,moof:Ya.moof,
moov:Ya.moov,initSegment:Ya.initSegment}),Fb=function(){this.init=function(){var b={};this.on=function(e,l){b[e]||(b[e]=[]);b[e]=b[e].concat(l)};this.off=function(e,l){if(!b[e])return!1;var d=b[e].indexOf(l);b[e]=b[e].slice();b[e].splice(d,1);return-1<d};this.trigger=function(e){var l,d;if(l=b[e])if(2===arguments.length){var c=l.length;for(d=0;d<c;++d)l[d].call(this,arguments[1])}else{var f=[];for(d=1;d<arguments.length;++d)f.push(arguments[d]);c=l.length;for(d=0;d<c;++d)l[d].apply(this,f)}};this.dispose=
function(){b={}}}};Fb.prototype.pipe=function(b){this.on("data",function(e){b.push(e)});this.on("done",function(e){b.flush(e)});return b};Fb.prototype.push=function(b){this.trigger("data",b)};Fb.prototype.flush=function(b){this.trigger("done",b)};var Jh=Object.freeze({"default":Fb,__moduleExports:Fb}),Za={groupNalsIntoFrames:function(b){var e,l=[],d=[];for(e=l.byteLength=0;e<b.length;e++){var c=b[e];"access_unit_delimiter_rbsp"===c.nalUnitType?(l.length&&(l.duration=c.dts-l.dts,d.push(l)),l=[c],l.byteLength=
c.data.byteLength,l.pts=c.pts,l.dts=c.dts):("slice_layer_without_partitioning_rbsp_idr"===c.nalUnitType&&(l.keyFrame=!0),l.duration=c.dts-l.dts,l.byteLength+=c.data.byteLength,l.push(c))}d.length&&(!l.duration||0>=l.duration)&&(l.duration=d[d.length-1].duration);d.push(l);return d},groupFramesIntoGops:function(b){var e,l=[],d=[];l.byteLength=0;l.nalCount=0;l.duration=0;l.pts=b[0].pts;l.dts=b[0].dts;d.byteLength=0;d.nalCount=0;d.duration=0;d.pts=b[0].pts;d.dts=b[0].dts;for(e=0;e<b.length;e++){var c=
b[e];c.keyFrame?(l.length&&(d.push(l),d.byteLength+=l.byteLength,d.nalCount+=l.nalCount,d.duration+=l.duration),l=[c],l.nalCount=c.length,l.byteLength=c.byteLength,l.pts=c.pts,l.dts=c.dts,l.duration=c.duration):(l.duration+=c.duration,l.nalCount+=c.length,l.byteLength+=c.byteLength,l.push(c))}d.length&&0>=l.duration&&(l.duration=d[d.length-1].duration);d.byteLength+=l.byteLength;d.nalCount+=l.nalCount;d.duration+=l.duration;d.push(l);return d},extendFirstKeyFrame:function(b){if(!b[0][0].keyFrame&&
1<b.length){var e=b.shift();b.byteLength-=e.byteLength;b.nalCount-=e.nalCount;b[0][0].dts=e.dts;b[0][0].pts=e.pts;b[0][0].duration+=e.duration}return b},generateSampleTable:function(b,e){var l,d,c=e||0,f=[];for(l=0;l<b.length;l++){var a=b[l];for(d=0;d<a.length;d++){var h=a[d];var m={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};m.dataOffset=c;m.compositionTimeOffset=h.pts-h.dts;m.duration=h.duration;m.size=4*h.length;m.size+=h.byteLength;
h.keyFrame&&(m.flags.dependsOn=2,m.flags.isNonSyncSample=0);h=m;c+=h.size;f.push(h)}}return f},concatenateNalData:function(b){var e,l,d,c=0,f=new Uint8Array(b.byteLength+4*b.nalCount),a=new DataView(f.buffer);for(e=0;e<b.length;e++){var h=b[e];for(l=0;l<h.length;l++){var m=h[l];for(d=0;d<m.length;d++){var n=m[d];a.setUint32(c,n.data.byteLength);c+=4;f.set(n.data,c);c+=n.data.byteLength}}}return f}},Kh=Object.freeze({"default":Za,__moduleExports:Za,groupNalsIntoFrames:Za.groupNalsIntoFrames,groupFramesIntoGops:Za.groupFramesIntoGops,
extendFirstKeyFrame:Za.extendFirstKeyFrame,generateSampleTable:Za.generateSampleTable,concatenateNalData:Za.concatenateNalData}),Gb={clearDtsInfo:function(b){delete b.minSegmentDts;delete b.maxSegmentDts;delete b.minSegmentPts;delete b.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(b,e){var l=b.minSegmentDts;e||(l-=b.timelineStartInfo.dts);var d=b.timelineStartInfo.baseMediaDecodeTime;d=Math.max(0,d+l);"audio"===b.type&&(l=b.samplerate/9E4,d=Math.floor(d*l));return d},collectDtsInfo:function(b,
e){"number"===typeof e.pts&&(void 0===b.timelineStartInfo.pts&&(b.timelineStartInfo.pts=e.pts),b.minSegmentPts=void 0===b.minSegmentPts?e.pts:Math.min(b.minSegmentPts,e.pts),b.maxSegmentPts=void 0===b.maxSegmentPts?e.pts:Math.max(b.maxSegmentPts,e.pts));"number"===typeof e.dts&&(void 0===b.timelineStartInfo.dts&&(b.timelineStartInfo.dts=e.dts),b.minSegmentDts=void 0===b.minSegmentDts?e.dts:Math.min(b.minSegmentDts,e.dts),b.maxSegmentDts=void 0===b.maxSegmentDts?e.dts:Math.max(b.maxSegmentDts,e.dts))}},
Lh=Object.freeze({"default":Gb,__moduleExports:Gb,clearDtsInfo:Gb.clearDtsInfo,calculateTrackBaseMediaDecodeTime:Gb.calculateTrackBaseMediaDecodeTime,collectDtsInfo:Gb.collectDtsInfo}),$a={parseSei:function(b){for(var e=0,l={payloadType:-1,payloadSize:0},d=0,c=0;e<b.byteLength&&128!==b[e];){for(;255===b[e];)d+=255,e++;for(d+=b[e++];255===b[e];)c+=255,e++;c+=b[e++];if(!l.payload&&4===d){l.payloadType=d;l.payloadSize=c;l.payload=b.subarray(e,e+c);break}e+=c;c=d=0}return l},parseUserData:function(b){return 181!==
b.payload[0]||49!==(b.payload[1]<<8|b.payload[2])||"GA94"!==String.fromCharCode(b.payload[3],b.payload[4],b.payload[5],b.payload[6])||3!==b.payload[7]?null:b.payload.subarray(8,b.payload.length-1)},parseCaptionPackets:function(b,e){var l=[],d;if(!(e[0]&64))return l;var c=e[0]&31;for(d=0;d<c;d++){var f=3*d;var a={type:e[f+2]&3,pts:b};e[f+2]&4&&(a.ccData=e[f+3]<<8|e[f+4],l.push(a))}return l},discardEmulationPreventionBytes:function(b){for(var e=b.byteLength,l=[],d=1,c;d<e-2;)0===b[d]&&0===b[d+1]&&3===
b[d+2]?(l.push(d+2),d+=2):d++;if(0===l.length)return b;e-=l.length;c=new Uint8Array(e);var f=0;for(d=0;d<e;f++,d++)f===l[0]&&(f++,l.shift()),c[d]=b[f];return c},USER_DATA_REGISTERED_ITU_T_T35:4},Mh=Object.freeze({"default":$a,__moduleExports:$a,parseSei:$a.parseSei,parseUserData:$a.parseUserData,parseCaptionPackets:$a.parseCaptionPackets,discardEmulationPreventionBytes:$a.discardEmulationPreventionBytes,USER_DATA_REGISTERED_ITU_T_T35:$a.USER_DATA_REGISTERED_ITU_T_T35}),Z=Jh&&Fb||Jh,kc=Mh&&$a||Mh,
ab=function e(){e.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new S(0,0),new S(0,1),new S(1,0),new S(1,1)];this.reset();this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data"));e.on("done",this.trigger.bind(this,"done"))},this)};ab.prototype=new Z;ab.prototype.push=function(e){if("sei_rbsp"===e.nalUnitType){var l=kc.parseSei(e.escapedRBSP);l.payloadType===kc.USER_DATA_REGISTERED_ITU_T_T35&&(l=kc.parseUserData(l))&&(e.dts<this.latestDts_?this.ignoreNextEqualDts_=
!0:e.dts===this.latestDts_&&this.ignoreNextEqualDts_?(this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1)):(l=kc.parseCaptionPackets(e.pts,l),this.captionPackets_=this.captionPackets_.concat(l),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts))}};ab.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(e,l){e.presortIndex=l}),this.captionPackets_.sort(function(e,l){return e.pts===l.pts?e.presortIndex-l.presortIndex:
e.pts-l.pts}),this.captionPackets_.forEach(function(e){2>e.type&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(e){e.flush()},this)):this.ccStreams_.forEach(function(e){e.flush()},this)};ab.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=!1;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(e){e.reset()})};ab.prototype.dispatchCea608Packet=function(e){this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=
0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1);null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)};ab.prototype.setsChannel1Active=function(e){return 4096===(e.ccData&30720)};ab.prototype.setsChannel2Active=function(e){return 6144===(e.ccData&30720)};var ql={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,
315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,
826:216,827:248,828:9484,829:9488,830:9492,831:9496},ad=function(e){if(null===e)return"";e=ql[e]||e;return String.fromCharCode(e)},rl=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],mb=function(){for(var e=[],l=15;l--;)e.push("");return e},S=function c(l,d){c.prototype.init.call(this);this.field_=l||0;this.dataChannel_=d||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(d){var a=d.ccData&32639;if(a===this.lastControlCode_)this.lastControlCode_=
null;else{4096===(a&61440)?this.lastControlCode_=a:a!==this.PADDING_&&(this.lastControlCode_=null);var c=a>>>8;var f=a&255;a!==this.PADDING_&&(a===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":a===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(d.pts),this.flushDisplayed(d.pts),f=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=f,this.startPts_=d.pts):a===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(d.pts)):a===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=
3,this.setRollUp(d.pts)):a===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(d.pts)):a===this.CARRIAGE_RETURN_?(this.clearFormatting(d.pts),this.flushDisplayed(d.pts),this.shiftRowsUp_(),this.startPts_=d.pts):a===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):a===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(d.pts),this.displayed_=mb()):a===this.ERASE_NON_DISPLAYED_MEMORY_?
this.nonDisplayed_=mb():a===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(d.pts),this.displayed_=mb()),this.mode_="paintOn",this.startPts_=d.pts):this.isSpecialCharacter(c,f)?(a=ad((c&3)<<8|f),this[this.mode_](d.pts,a),this.column_++):this.isExtCharacter(c,f)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=ad((c&3)<<8|f),this[this.mode_](d.pts,a),this.column_++):
this.isMidRowCode(c,f)?(this.clearFormatting(d.pts),this[this.mode_](d.pts," "),this.column_++,14===(f&14)&&this.addFormatting(d.pts,["i"]),1===(f&1)&&this.addFormatting(d.pts,["u"])):this.isOffsetControlCode(c,f)?this.column_+=f&3:this.isPAC(c,f)?(c=rl.indexOf(a&7968),"rollUp"===this.mode_&&this.setRollUp(d.pts,c),c!==this.row_&&(this.clearFormatting(d.pts),this.row_=c),f&1&&-1===this.formatting_.indexOf("u")&&this.addFormatting(d.pts,["u"]),16===(a&16)&&(this.column_=4*((a&14)>>1)),this.isColorPAC(f)&&
14===(f&14)&&this.addFormatting(d.pts,["i"])):this.isNormalChar(c)&&(0===f&&(f=null),a=ad(c),a+=ad(f),this[this.mode_](d.pts,a),this.column_+=a.length))}}};S.prototype=new Z;S.prototype.flushDisplayed=function(l){var d=this.displayed_.map(function(d){return d.trim()}).join("\n").replace(/^\n+|\n+$/g,"");d.length&&this.trigger("data",{startPts:this.startPts_,endPts:l,text:d,stream:this.name_})};S.prototype.reset=function(){this.mode_="popOn";this.startPts_=this.topRow_=0;this.displayed_=mb();this.nonDisplayed_=
mb();this.lastControlCode_=null;this.column_=0;this.row_=14;this.rollUpRows_=2;this.formatting_=[]};S.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31);this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|
38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};S.prototype.isSpecialCharacter=function(l,d){return l===this.EXT_&&48<=d&&63>=d};S.prototype.isExtCharacter=function(l,d){return(l===this.EXT_+1||l===this.EXT_+2)&&32<=d&&63>=d};S.prototype.isMidRowCode=function(l,d){return l===this.EXT_&&32<=
d&&47>=d};S.prototype.isOffsetControlCode=function(l,d){return l===this.OFFSET_&&33<=d&&35>=d};S.prototype.isPAC=function(l,d){return l>=this.BASE_&&l<this.BASE_+8&&64<=d&&127>=d};S.prototype.isColorPAC=function(l){return 64<=l&&79>=l||96<=l&&127>=l};S.prototype.isNormalChar=function(l){return 32<=l&&127>=l};S.prototype.setRollUp=function(l,d){"rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(l),this.nonDisplayed_=mb(),this.displayed_=mb());if(void 0!==d&&d!==this.row_)for(var c=
0;c<this.rollUpRows_;c++)this.displayed_[d-c]=this.displayed_[this.row_-c],this.displayed_[this.row_-c]="";void 0===d&&(d=this.row_);this.topRow_=d-this.rollUpRows_+1};S.prototype.addFormatting=function(l,d){this.formatting_=this.formatting_.concat(d);var c=d.reduce(function(d,a){return d+"<"+a+">"},"");this[this.mode_](l,c)};S.prototype.clearFormatting=function(l){if(this.formatting_.length){var d=this.formatting_.reverse().reduce(function(d,f){return d+"</"+f+">"},"");this.formatting_=[];this[this.mode_](l,
d)}};S.prototype.popOn=function(l,d){this.nonDisplayed_[this.row_]+=d};S.prototype.rollUp=function(l,d){this.displayed_[this.row_]+=d};S.prototype.shiftRowsUp_=function(){var l;for(l=0;l<this.topRow_;l++)this.displayed_[l]="";for(l=this.row_+1;15>l;l++)this.displayed_[l]="";for(l=this.topRow_;l<this.row_;l++)this.displayed_[l]=this.displayed_[l+1];this.displayed_[this.row_]=""};S.prototype.paintOn=function(l,d){this.displayed_[this.row_]+=d};var lc={CaptionStream:ab,Cea608Stream:S},Nh=Object.freeze({"default":lc,
__moduleExports:lc,CaptionStream:lc.CaptionStream,Cea608Stream:lc.Cea608Stream}),Hb={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Oh=Object.freeze({"default":Hb,__moduleExports:Hb,H264_STREAM_TYPE:Hb.H264_STREAM_TYPE,ADTS_STREAM_TYPE:Hb.ADTS_STREAM_TYPE,METADATA_STREAM_TYPE:Hb.METADATA_STREAM_TYPE}),Je=function(l,d){var c=1;for(l>d&&(c=-1);4294967296<Math.abs(d-l);)l+=8589934592*c;return l},Ph=function c(d){var f,a;c.prototype.init.call(this);this.type_=d;this.push=function(d){d.type===
this.type_&&(void 0===a&&(a=d.dts),d.dts=Je(d.dts,a),d.pts=Je(d.pts,a),f=d.dts,this.trigger("data",d))};this.flush=function(){a=f;this.trigger("done")};this.discontinuity=function(){f=a=void 0}};Ph.prototype=new Z;var mc={TimestampRolloverStream:Ph,handleRollover:Je},Qh=Object.freeze({"default":mc,__moduleExports:mc,TimestampRolloverStream:mc.TimestampRolloverStream,handleRollover:mc.handleRollover}),W=Oh&&Hb||Oh,nc=function(d,c,f){for(var a="";c<f;c++)a+="%"+("00"+d[c].toString(16)).slice(-2);return a},
bd=function(d){return d[0]<<21|d[1]<<14|d[2]<<7|d[3]},Rh={TXXX:function(d){var c;if(3===d.data[0]){for(c=1;c<d.data.length;c++)if(0===d.data[c]){d.description=decodeURIComponent(nc(d.data,1,c));d.value=decodeURIComponent(nc(d.data,c+1,d.data.length)).replace(/\0*$/,"");break}d.data=d.value}},WXXX:function(d){var c;if(3===d.data[0])for(c=1;c<d.data.length;c++)if(0===d.data[c]){d.description=decodeURIComponent(nc(d.data,1,c));d.url=decodeURIComponent(nc(d.data,c+1,d.data.length));break}},PRIV:function(d){var c;
for(c=0;c<d.data.length;c++)if(0===d.data[c]){d.owner=unescape(nc(d.data,0,c));break}d.privateData=d.data.subarray(c+1);d.data=d.privateData}};var oc=function(d){var c=!(!d||!d.debug);d=d&&d.descriptor;var f=0,a=[],h=0,m;oc.prototype.init.call(this);this.dispatchType=W.METADATA_STREAM_TYPE.toString(16);if(d)for(m=0;m<d.length;m++)this.dispatchType+=("00"+d[m].toString(16)).slice(-2);this.push=function(d){var m;if("timed-metadata"===d.type)if(d.dataAlignmentIndicator&&(h=0,a.length=0),0===a.length&&
(10>d.data.length||73!==d.data[0]||68!==d.data[1]||51!==d.data[2]))c&&console.log("Skipping unrecognized metadata packet");else if(a.push(d),h+=d.data.byteLength,1===a.length&&(f=bd(d.data.subarray(6,10)),f+=10),!(h<f)){d={data:new Uint8Array(f),frames:[],pts:a[0].pts,dts:a[0].dts};for(m=0;m<f;)d.data.set(a[0].data.subarray(0,f-m),m),m+=a[0].data.byteLength,h-=a[0].data.byteLength,a.shift();m=10;d.data[5]&64&&(m=m+4+bd(d.data.subarray(10,14)),f-=bd(d.data.subarray(16,20)));do{var n=bd(d.data.subarray(m+
4,m+8));if(1>n)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");var t=String.fromCharCode(d.data[m],d.data[m+1],d.data[m+2],d.data[m+3]);t={id:t,data:d.data.subarray(m+10,m+n+10)};t.key=t.id;if(Rh[t.id]&&(Rh[t.id](t),"com.apple.streaming.transportStreamTimestamp"===t.owner)){var N=t.data,A=(N[3]&1)<<30|N[4]<<22|N[5]<<14|N[6]<<6|N[7]>>>2;A*=4;A+=N[7]&3;t.timeStamp=A;void 0===d.pts&&void 0===d.dts&&(d.pts=t.timeStamp,d.dts=t.timeStamp);this.trigger("timestamp",t)}d.frames.push(t);
m+=10;m+=n}while(m<f);this.trigger("data",d)}}};oc.prototype=new Z;var Sh=Object.freeze({"default":oc,__moduleExports:oc}),Ke=Nh&&lc||Nh,Th=Qh&&mc||Qh,sl=Sh&&oc||Sh,tl=Th.TimestampRolloverStream;var Le=function(){var d=new Uint8Array(188),c=0;Le.prototype.init.call(this);this.push=function(f){var a=0,h=188;if(c){var m=new Uint8Array(f.byteLength+c);m.set(d.subarray(0,c));m.set(f,c);c=0}else m=f;for(;h<m.byteLength;)71===m[a]&&71===m[h]?(this.trigger("data",m.subarray(a,h)),a+=188,h+=188):(a++,h++);
a<m.byteLength&&(d.set(m.subarray(a),0),c=m.byteLength-a)};this.flush=function(){188===c&&71===d[0]&&(this.trigger("data",d),c=0);this.trigger("done")}};Le.prototype=new Z;var cd=function(){cd.prototype.init.call(this);var d=this;this.packetsWaitingForPmt=[];this.programMapTable=void 0;var c=function(d,c){var h=0;c.payloadUnitStartIndicator&&(h+=d[h]+1);"pat"===c.type?f(d.subarray(h),c):a(d.subarray(h),c)};var f=function(a,c){c.section_number=a[7];c.last_section_number=a[8];d.pmtPid=(a[10]&31)<<8|
a[11];c.pmtPid=d.pmtPid};var a=function(a,c){var h;if(a[5]&1){d.programMapTable={video:null,audio:null,"timed-metadata":{}};var f=3+((a[1]&15)<<8|a[2])-4;for(h=12+((a[10]&15)<<8|a[11]);h<f;){var m=a[h],t=(a[h+1]&31)<<8|a[h+2];m===W.H264_STREAM_TYPE&&null===d.programMapTable.video?d.programMapTable.video=t:m===W.ADTS_STREAM_TYPE&&null===d.programMapTable.audio?d.programMapTable.audio=t:m===W.METADATA_STREAM_TYPE&&(d.programMapTable["timed-metadata"][t]=m);h+=((a[h+3]&15)<<8|a[h+4])+5}c.programMapTable=
d.programMapTable}};this.push=function(d){var a={},h=4;a.payloadUnitStartIndicator=!!(d[1]&64);a.pid=d[1]&31;a.pid<<=8;a.pid|=d[2];1<(d[3]&48)>>>4&&(h+=d[h]+1);if(0===a.pid)a.type="pat",c(d.subarray(h),a),this.trigger("data",a);else if(a.pid===this.pmtPid)for(a.type="pmt",c(d.subarray(h),a),this.trigger("data",a);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([d,h,a]):this.processPes_(d,
h,a)};this.processPes_=function(d,a,c){c.streamType=c.pid===this.programMapTable.video?W.H264_STREAM_TYPE:c.pid===this.programMapTable.audio?W.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][c.pid];c.type="pes";c.data=d.subarray(a);this.trigger("data",c)}};cd.prototype=new Z;cd.STREAM_TYPES={h264:27,adts:15};var Me=function(){var d=this,c={data:[],size:0},f={data:[],size:0},a={data:[],size:0},h=function(a,c,h){var f=new Uint8Array(a.size),m={type:c},n,p=0;if(a.data.length&&!(9>a.size)){m.trackId=
a.data[0].pid;for(n=0;n<a.data.length;n++){var r=a.data[n];f.set(r.data,p);p+=r.data.byteLength}m.packetLength=6+(f[4]<<8|f[5]);m.dataAlignmentIndicator=0!==(f[6]&4);n=f[7];n&192&&(m.pts=(f[9]&14)<<27|(f[10]&255)<<20|(f[11]&254)<<12|(f[12]&255)<<5|(f[13]&254)>>>3,m.pts*=4,m.pts+=(f[13]&6)>>>1,m.dts=m.pts,n&64&&(m.dts=(f[14]&14)<<27|(f[15]&255)<<20|(f[16]&254)<<12|(f[17]&255)<<5|(f[18]&254)>>>3,m.dts*=4,m.dts+=(f[18]&6)>>>1));m.data=f.subarray(9+f[8]);c="video"===c||m.packetLength<=a.size;if(h||c)a.size=
0,a.data.length=0;c&&d.trigger("data",m)}};Me.prototype.init.call(this);this.push=function(m){({pat:function(){},pes:function(){switch(m.streamType){case W.H264_STREAM_TYPE:case W.H264_STREAM_TYPE:var d=c;var p="video";break;case W.ADTS_STREAM_TYPE:d=f;p="audio";break;case W.METADATA_STREAM_TYPE:d=a;p="timed-metadata";break;default:return}m.payloadUnitStartIndicator&&h(d,p,!0);d.data.push(m);d.size+=m.data.byteLength},pmt:function(){var a={type:"metadata",tracks:[]},c=m.programMapTable;null!==c.video&&
a.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+c.video,codec:"avc",type:"video"});null!==c.audio&&a.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+c.audio,codec:"adts",type:"audio"});d.trigger("data",a)}})[m.type]()};this.flush=function(){h(c,"video");h(f,"audio");h(a,"timed-metadata");this.trigger("done")}};Me.prototype=new Z;var dd={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Le,TransportParseStream:cd,ElementaryStream:Me,TimestampRolloverStream:tl,CaptionStream:Ke.CaptionStream,
Cea608Stream:Ke.Cea608Stream,MetadataStream:sl},ed;for(ed in W)W.hasOwnProperty(ed)&&(dd[ed]=W[ed]);var Uh=Object.freeze({"default":dd,__moduleExports:dd}),Vh=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350];var pc=function(){var d;pc.prototype.init.call(this);this.push=function(c){var f=0,a=0;if("audio"===c.type){if(d){var h=d;d=new Uint8Array(h.byteLength+c.data.byteLength);d.set(h);d.set(c.data,h.byteLength)}else d=c.data;for(;f+5<d.length;)if(255!==d[f]||240!==(d[f+1]&246))f++;
else{h=2*(~d[f+1]&1);var m=(d[f+3]&3)<<11|d[f+4]<<3|(d[f+5]&224)>>5;var n=1024*((d[f+6]&3)+1);var p=9E4*n/Vh[(d[f+2]&60)>>>2];m=f+m;if(d.byteLength<m)break;this.trigger("data",{pts:c.pts+a*p,dts:c.dts+a*p,sampleCount:n,audioobjecttype:(d[f+2]>>>6&3)+1,channelcount:(d[f+2]&1)<<2|(d[f+3]&192)>>>6,samplerate:Vh[(d[f+2]&60)>>>2],samplingfrequencyindex:(d[f+2]&60)>>>2,samplesize:16,data:d.subarray(f+7+h,m)});if(d.byteLength===m){d=void 0;break}a++;d=d.subarray(m)}}};this.flush=function(){this.trigger("done")}};
pc.prototype=new Z;var Wh=Object.freeze({"default":pc,__moduleExports:pc}),Ne=function(d){var c=d.byteLength,f=0,a=0;this.length=function(){return 8*c};this.bitsAvailable=function(){return 8*c+a};this.loadWord=function(){var h=d.byteLength-c,m=new Uint8Array(4),n=Math.min(4,c);if(0===n)throw Error("no bytes available");m.set(d.subarray(h,h+n));f=(new DataView(m.buffer)).getUint32(0);a=8*n;c-=n};this.skipBits=function(d){if(!(a>d)){d-=a;var h=Math.floor(d/8);d-=8*h;c-=h;this.loadWord()}f<<=d;a-=d};
this.readBits=function(d){var h=Math.min(a,d),n=f>>>32-h;a-=h;0<a?f<<=h:0<c&&this.loadWord();h=d-h;return 0<h?n<<h|this.readBits(h):n};this.skipLeadingZeros=function(){var d;for(d=0;d<a;++d)if(0!==(f&2147483648>>>d))return f<<=d,a-=d,d;this.loadWord();return d+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var d=this.skipLeadingZeros();
return this.readBits(d+1)-1};this.readExpGolomb=function(){var d=this.readUnsignedExpGolomb();return 1&d?1+d>>>1:-1*(d>>>1)};this.readBoolean=function(){return 1===this.readBits(1)};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()},Xh=Object.freeze({"default":Ne,__moduleExports:Ne}),ul=Xh&&Ne||Xh;var fd=function(){var d=0,c,f;fd.prototype.init.call(this);this.push=function(a){if(f){var h=new Uint8Array(f.byteLength+a.data.byteLength);h.set(f);h.set(a.data,f.byteLength);f=
h}else f=a.data;for(;d<f.byteLength-3;d++)if(1===f[d+2]){c=d+5;break}for(;c<f.byteLength;)switch(f[c]){case 0:if(0!==f[c-1]){c+=2;break}else if(0!==f[c-2]){c++;break}d+3!==c-2&&this.trigger("data",f.subarray(d+3,c-2));do c++;while(1!==f[c]&&c<f.length);d=c-2;c+=3;break;case 1:if(0!==f[c-1]||0!==f[c-2]){c+=3;break}this.trigger("data",f.subarray(d+3,c-2));d=c-2;c+=3;break;default:c+=3}f=f.subarray(d);c-=d;d=0};this.flush=function(){f&&3<f.byteLength&&this.trigger("data",f.subarray(d+3));f=null;d=0;
this.trigger("done")}};fd.prototype=new Z;var vl={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0};var Oe=function(){var d=new fd,c,f,a;Oe.prototype.init.call(this);var h=this;this.push=function(h){"video"===h.type&&(c=h.trackId,f=h.pts,a=h.dts,d.push(h))};d.on("data",function(d){var m={trackId:c,pts:f,dts:a,data:d};switch(d[0]&31){case 5:m.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:m.nalUnitType="sei_rbsp";m.escapedRBSP=n(d.subarray(1));
break;case 7:m.nalUnitType="seq_parameter_set_rbsp";m.escapedRBSP=n(d.subarray(1));m.config=p(m.escapedRBSP);break;case 8:m.nalUnitType="pic_parameter_set_rbsp";break;case 9:m.nalUnitType="access_unit_delimiter_rbsp"}h.trigger("data",m)});d.on("done",function(){h.trigger("done")});this.flush=function(){d.flush()};var m=function(d,a){var c=8,h=8,f;for(f=0;f<d;f++)0!==h&&(h=a.readExpGolomb(),h=(c+h+256)%256),c=0===h?c:h};var n=function(d){for(var a=d.byteLength,c=[],h=1,f;h<a-2;)0===d[h]&&0===d[h+1]&&
3===d[h+2]?(c.push(h+2),h+=2):h++;if(0===c.length)return d;a-=c.length;f=new Uint8Array(a);var m=0;for(h=0;h<a;m++,h++)m===c[0]&&(m++,c.shift()),f[h]=d[m];return f};var p=function(d){var a=0,c=0,h=0,f=0,n=1;d=new ul(d);var p=d.readUnsignedByte();var u=d.readUnsignedByte();var r=d.readUnsignedByte();d.skipUnsignedExpGolomb();if(vl[p]){var q=d.readUnsignedExpGolomb();3===q&&d.skipBits(1);d.skipUnsignedExpGolomb();d.skipUnsignedExpGolomb();d.skipBits(1);if(d.readBoolean()){var v=3!==q?8:12;for(q=0;q<
v;q++)d.readBoolean()&&(6>q?m(16,d):m(64,d))}}d.skipUnsignedExpGolomb();q=d.readUnsignedExpGolomb();if(0===q)d.readUnsignedExpGolomb();else if(1===q)for(d.skipBits(1),d.skipExpGolomb(),d.skipExpGolomb(),v=d.readUnsignedExpGolomb(),q=0;q<v;q++)d.skipExpGolomb();d.skipUnsignedExpGolomb();d.skipBits(1);q=d.readUnsignedExpGolomb();v=d.readUnsignedExpGolomb();var w=d.readBits(1);0===w&&d.skipBits(1);d.skipBits(1);d.readBoolean()&&(a=d.readUnsignedExpGolomb(),c=d.readUnsignedExpGolomb(),h=d.readUnsignedExpGolomb(),
f=d.readUnsignedExpGolomb());if(d.readBoolean()&&d.readBoolean()){var x=d.readUnsignedByte();switch(x){case 1:var E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:E=[d.readUnsignedByte()<<
8|d.readUnsignedByte(),d.readUnsignedByte()<<8|d.readUnsignedByte()]}E&&(n=E[0]/E[1])}return{profileIdc:p,levelIdc:r,profileCompatibility:u,width:Math.ceil((16*(q+1)-2*a-2*c)*n),height:(2-w)*(v+1)*16-2*h-2*f}}};Oe.prototype=new Z;var qc={H264Stream:Oe,NalByteStream:fd},Yh=Object.freeze({"default":qc,__moduleExports:qc,H264Stream:qc.H264Stream,NalByteStream:qc.NalByteStream});var rc=function(){var d=new Uint8Array,c=0;rc.prototype.init.call(this);this.setTimestamp=function(d){c=d};this.parseId3TagSize=
function(d,a){var c=d[a+6]<<21|d[a+7]<<14|d[a+8]<<7|d[a+9];return(d[a+5]&16)>>4?c+20:c+10};this.parseAdtsSize=function(d,a){return d[a+3]&6144|d[a+4]<<3|(d[a+5]&224)>>5};this.push=function(f){var a=0;if(d.length){var h=d.length;d=new Uint8Array(f.byteLength+h);d.set(d.subarray(0,h));d.set(f,h)}else d=f;for(;3<=d.length-a;)if(73===d[a]&&68===d[a+1]&&51===d[a+2]){if(10>d.length-a)break;f=this.parseId3TagSize(d,a);if(f>d.length)break;h={type:"timed-metadata",data:d.subarray(a,a+f)};this.trigger("data",
h);a+=f}else if(d[a]&1&&240===(d[a+1]&240)){if(7>d.length-a)break;f=this.parseAdtsSize(d,a);if(f>d.length)break;h={type:"audio",data:d.subarray(a,a+f),pts:c,dts:c};this.trigger("data",h);a+=f}else a++;d=0<d.length-a?d.subarray(a):new Uint8Array}};rc.prototype=new Z;var Zh=Object.freeze({"default":rc,__moduleExports:rc}),bb=[33,16,5,32,164,27],Pe=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],M=function(d){for(var c=[];d--;)c.push(0);return c},Qe=function(d){return Object.keys(d).reduce(function(c,f){c[f]=
new Uint8Array(d[f].reduce(function(d,c){return d.concat(c)},[]));return c},{})}({96E3:[bb,[227,64],M(154),[56]],88200:[bb,[231],M(170),[56]],64E3:[bb,[248,192],M(240),[56]],48E3:[bb,[255,192],M(268),[55,148,128],M(54),[112]],44100:[bb,[255,192],M(268),[55,163,128],M(84),[112]],32E3:[bb,[255,192],M(268),[55,234],M(226),[112]],24E3:[bb,[255,192],M(268),[55,255,128],M(268),[111,112],M(126),[224]],16E3:[bb,[255,192],M(268),[55,255,128],M(268),[111,255],M(269),[223,108],M(195),[1,192]],12E3:[Pe,M(268),
[3,127,248],M(268),[6,255,240],M(268),[13,255,224],M(268),[27,253,128],M(259),[56]],11025:[Pe,M(268),[3,127,248],M(268),[6,255,240],M(268),[13,255,224],M(268),[27,255,192],M(268),[55,175,128],M(108),[112]],8E3:[Pe,M(268),[3,121,16],M(47),[7]]}),$h=Object.freeze({"default":Qe,__moduleExports:Qe});var ai=function(d){return 9E4*d};var bi=function(d,c){return d*c};var ci=function(d){return d/9E4};var di=function(d,c){return d/c};var Da={secondsToVideoTs:ai,secondsToAudioTs:bi,videoTsToSeconds:ci,audioTsToSeconds:di,
audioTsToVideoTs:function(d,c){return ai(di(d,c))},videoTsToAudioTs:function(d,c){return bi(ci(d),c)}},ei=Object.freeze({"default":Da,__moduleExports:Da,secondsToVideoTs:Da.secondsToVideoTs,secondsToAudioTs:Da.secondsToAudioTs,videoTsToSeconds:Da.videoTsToSeconds,audioTsToSeconds:Da.audioTsToSeconds,audioTsToVideoTs:Da.audioTsToVideoTs,videoTsToAudioTs:Da.videoTsToAudioTs}),sc=Ih&&Ya||Ih,tc=Kh&&Za||Kh,Ga=Lh&&Gb||Lh,Ha=Uh&&dd||Uh,fi=Wh&&pc||Wh,wl=Zh&&rc||Zh,xl=$h&&Qe||$h,gi=ei&&Da||ei,yl=(Yh&&qc||
Yh).H264Stream,Re=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Se=["width","height","profileIdc","levelIdc","profileCompatibility"];var zl=function(d){return 73===d[0]&&68===d[1]&&51===d[2]?!0:!1};var hi=function(d,c){var f;if(d.length!==c.length)return!1;for(f=0;f<d.length;f++)if(d[f]!==c[f])return!1;return!0};var Al=function(d){var c,f=0;for(c=0;c<d.length;c++){var a=d[c];f+=a.data.byteLength}return f};var uc=function(d,c){var f=[],a=0,h=0,m=0,n=Infinity;
c=c||{};uc.prototype.init.call(this);this.push=function(a){Ga.collectDtsInfo(d,a);d&&Re.forEach(function(c){d[c]=a[c]});f.push(a)};this.setEarliestDts=function(a){h=a-d.timelineStartInfo.baseMediaDecodeTime};this.setVideoBaseMediaDecodeTime=function(d){n=d};this.setAudioAppendStart=function(d){m=d};this.flush=function(){if(0!==f.length){var h=this.trimAdtsFramesByEarliestDts_(f);d.baseMediaDecodeTime=Ga.calculateTrackBaseMediaDecodeTime(d,c.keepOriginalTimestamps);this.prefixWithSilence_(d,h);d.samples=
this.generateSampleTable_(h);var m=sc.mdat(this.concatenateFrameData_(h));f=[];h=sc.moof(a,[d]);var n=new Uint8Array(h.byteLength+m.byteLength);a++;n.set(h);n.set(m,h.byteLength);Ga.clearDtsInfo(d);this.trigger("data",{track:d,boxes:n})}this.trigger("done","AudioSegmentStream")};this.prefixWithSilence_=function(d,a){var c,h=c=0;if(a.length){var f=gi.audioTsToVideoTs(d.baseMediaDecodeTime,d.samplerate);var p=Math.ceil(9E4/(d.samplerate/1024));m&&n&&(c=f-Math.max(m,n),c=Math.floor(c/p),h=c*p);if(!(1>
c||45E3<h)){p=xl[d.samplerate];p||(p=a[0].data);for(f=0;f<c;f++)a.splice(f,0,{data:p});d.baseMediaDecodeTime-=Math.floor(gi.videoTsToAudioTs(h,d.samplerate))}}};this.trimAdtsFramesByEarliestDts_=function(a){if(d.minSegmentDts>=h)return a;d.minSegmentDts=Infinity;return a.filter(function(a){return a.dts>=h?(d.minSegmentDts=Math.min(d.minSegmentDts,a.dts),d.minSegmentPts=d.minSegmentDts,!0):!1})};this.generateSampleTable_=function(d){var a,c=[];for(a=0;a<d.length;a++){var h=d[a];c.push({size:h.data.byteLength,
duration:1024})}return c};this.concatenateFrameData_=function(d){var a,c=0,h=new Uint8Array(Al(d));for(a=0;a<d.length;a++){var f=d[a];h.set(f.data,c);c+=f.data.byteLength}return h}};uc.prototype=new Z;var hd=function(d,c){var f=0,a=[],h=[],m,n;c=c||{};hd.prototype.init.call(this);delete d.minPTS;this.gopCache_=[];this.push=function(c){Ga.collectDtsInfo(d,c);"seq_parameter_set_rbsp"!==c.nalUnitType||m||(m=c.config,d.sps=[c.data],Se.forEach(function(a){d[a]=m[a]},this));"pic_parameter_set_rbsp"!==c.nalUnitType||
n||(n=c.data,d.pps=[c.data]);a.push(c)};this.flush=function(){for(var m,n,t;a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0!==a.length){m=tc.groupNalsIntoFrames(a);m=tc.groupFramesIntoGops(m);m[0][0].keyFrame||((n=this.getGopForFusion_(a[0],d))?(m.unshift(n),m.byteLength+=n.byteLength,m.nalCount+=n.nalCount,m.pts=n.pts,m.dts=n.dts,m.duration+=n.duration):m=tc.extendFirstKeyFrame(m));if(h.length){n=c.alignGopsAtEnd?this.alignGopsAtEnd_(m):this.alignGopsAtStart_(m);if(!n){this.gopCache_.unshift({gop:m.pop(),
pps:d.pps,sps:d.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);a=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}Ga.clearDtsInfo(d);m=n}Ga.collectDtsInfo(d,m);d.samples=tc.generateSampleTable(m);n=sc.mdat(tc.concatenateNalData(m));d.baseMediaDecodeTime=Ga.calculateTrackBaseMediaDecodeTime(d,c.keepOriginalTimestamps);this.trigger("processedGopsInfo",m.map(function(d){return{pts:d.pts,dts:d.dts,byteLength:d.byteLength}}));this.gopCache_.unshift({gop:m.pop(),pps:d.pps,
sps:d.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);a=[];this.trigger("baseMediaDecodeTime",d.baseMediaDecodeTime);this.trigger("timelineStartInfo",d.timelineStartInfo);m=sc.moof(f,[d]);t=new Uint8Array(m.byteLength+n.byteLength);f++;t.set(m);t.set(n,m.byteLength);this.trigger("data",{track:d,boxes:t})}this.resetStream_();this.trigger("done","VideoSegmentStream")};this.resetStream_=function(){Ga.clearDtsInfo(d);n=m=void 0};this.getGopForFusion_=function(a){var c=Infinity,h;for(h=0;h<
this.gopCache_.length;h++){var f=this.gopCache_[h];var m=f.gop;if(d.pps&&hi(d.pps[0],f.pps[0])&&d.sps&&hi(d.sps[0],f.sps[0])&&!(m.dts<d.timelineStartInfo.dts)&&(m=a.dts-m.dts-m.duration,-1E4<=m&&45E3>=m&&(!n||c>m))){var n=f;c=m}}return n?n.gop:null};this.alignGopsAtStart_=function(d){var a,c;var f=d.byteLength;var m=d.nalCount;var n=d.duration;for(a=c=0;a<h.length&&c<d.length;){var p=h[a];var q=d[c];if(p.pts===q.pts)break;q.pts>p.pts?a++:(c++,f-=q.byteLength,m-=q.nalCount,n-=q.duration)}if(0===c)return d;
if(c===d.length)return null;d=d.slice(c);d.byteLength=f;d.duration=n;d.nalCount=m;d.pts=d[0].pts;d.dts=d[0].dts;return d};this.alignGopsAtEnd_=function(d){var a;var c=h.length-1;var f=d.length-1;var m=null;for(a=!1;0<=c&&0<=f;){var n=h[c];var p=d[f];if(n.pts===p.pts){a=!0;break}n.pts>p.pts?c--:(c===h.length-1&&(m=f),f--)}if(!a&&null===m)return null;c=a?f:m;if(0===c)return d;d=d.slice(c);c=d.reduce(function(d,a){d.byteLength+=a.byteLength;d.duration+=a.duration;d.nalCount+=a.nalCount;return d},{byteLength:0,
duration:0,nalCount:0});d.byteLength=c.byteLength;d.duration=c.duration;d.nalCount=c.nalCount;d.pts=d[0].pts;d.dts=d[0].dts;return d};this.alignGopsWith=function(d){h=d}};hd.prototype=new Z;var vc=function(d,c){this.numberOfTracks=0;this.metadataStream=c;this.remuxTracks="undefined"!==typeof d.remux?!!d.remux:!0;this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.emittedTracks=this.pendingBytes=0;vc.prototype.init.call(this);this.push=
function(d){if(d.text)return this.pendingCaptions.push(d);if(d.frames)return this.pendingMetadata.push(d);this.pendingTracks.push(d.track);this.pendingBoxes.push(d.boxes);this.pendingBytes+=d.boxes.byteLength;"video"===d.track.type&&(this.videoTrack=d.track);"audio"===d.track.type&&(this.audioTrack=d.track)}};vc.prototype=new Z;vc.prototype.flush=function(d){var c=0,f={captions:[],captionStreams:{},metadata:[],info:{}},a=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==
d&&"AudioSegmentStream"!==d||this.remuxTracks)return;if(0===this.pendingTracks.length){this.emittedTracks++;this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}this.videoTrack?(a=this.videoTrack.timelineStartInfo.pts,Se.forEach(function(d){f.info[d]=this.videoTrack[d]},this)):this.audioTrack&&(a=this.audioTrack.timelineStartInfo.pts,Re.forEach(function(d){f.info[d]=this.audioTrack[d]},this));f.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined";
this.emittedTracks+=this.pendingTracks.length;d=sc.initSegment(this.pendingTracks);f.initSegment=new Uint8Array(d.byteLength);f.initSegment.set(d);f.data=new Uint8Array(this.pendingBytes);for(d=0;d<this.pendingBoxes.length;d++)f.data.set(this.pendingBoxes[d],c),c+=this.pendingBoxes[d].byteLength;for(d=0;d<this.pendingCaptions.length;d++)c=this.pendingCaptions[d],c.startTime=c.startPts-a,c.startTime/=9E4,c.endTime=c.endPts-a,c.endTime/=9E4,f.captionStreams[c.stream]=!0,f.captions.push(c);for(d=0;d<
this.pendingMetadata.length;d++)c=this.pendingMetadata[d],c.cueTime=c.pts-a,c.cueTime/=9E4,f.metadata.push(c);f.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingBytes=this.pendingCaptions.length=0;this.pendingMetadata.length=0;this.trigger("data",f);this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)};var Te=function(d){var c=this,f=!0,a,h;Te.prototype.init.call(this);d=d||
{};this.baseMediaDecodeTime=d.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var a={};this.transmuxPipeline_=a;a.type="aac";a.metadataStream=new Ha.MetadataStream;a.aacStream=new wl;a.audioTimestampRolloverStream=new Ha.TimestampRolloverStream("audio");a.timedMetadataTimestampRolloverStream=new Ha.TimestampRolloverStream("timed-metadata");a.adtsStream=new fi;a.coalesceStream=new vc(d,a.metadataStream);a.headOfPipeline=a.aacStream;a.aacStream.pipe(a.audioTimestampRolloverStream).pipe(a.adtsStream);
a.aacStream.pipe(a.timedMetadataTimestampRolloverStream).pipe(a.metadataStream).pipe(a.coalesceStream);a.metadataStream.on("timestamp",function(d){a.aacStream.setTimestamp(d.timeStamp)});a.aacStream.on("data",function(f){"timed-metadata"!==f.type||a.audioSegmentStream||(h=h||{timelineStartInfo:{baseMediaDecodeTime:c.baseMediaDecodeTime},codec:"adts",type:"audio"},a.coalesceStream.numberOfTracks++,a.audioSegmentStream=new uc(h,d),a.adtsStream.pipe(a.audioSegmentStream).pipe(a.coalesceStream))});a.coalesceStream.on("data",
this.trigger.bind(this,"data"));a.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var f={};this.transmuxPipeline_=f;f.type="ts";f.metadataStream=new Ha.MetadataStream;f.packetStream=new Ha.TransportPacketStream;f.parseStream=new Ha.TransportParseStream;f.elementaryStream=new Ha.ElementaryStream;f.videoTimestampRolloverStream=new Ha.TimestampRolloverStream("video");f.audioTimestampRolloverStream=new Ha.TimestampRolloverStream("audio");f.timedMetadataTimestampRolloverStream=
new Ha.TimestampRolloverStream("timed-metadata");f.adtsStream=new fi;f.h264Stream=new yl;f.captionStream=new Ha.CaptionStream;f.coalesceStream=new vc(d,f.metadataStream);f.headOfPipeline=f.packetStream;f.packetStream.pipe(f.parseStream).pipe(f.elementaryStream);f.elementaryStream.pipe(f.videoTimestampRolloverStream).pipe(f.h264Stream);f.elementaryStream.pipe(f.audioTimestampRolloverStream).pipe(f.adtsStream);f.elementaryStream.pipe(f.timedMetadataTimestampRolloverStream).pipe(f.metadataStream).pipe(f.coalesceStream);
f.h264Stream.pipe(f.captionStream).pipe(f.coalesceStream);f.elementaryStream.on("data",function(m){var n;if("metadata"===m.type){for(n=m.tracks.length;n--;)a||"video"!==m.tracks[n].type?h||"audio"!==m.tracks[n].type||(h=m.tracks[n],h.timelineStartInfo.baseMediaDecodeTime=c.baseMediaDecodeTime):(a=m.tracks[n],a.timelineStartInfo.baseMediaDecodeTime=c.baseMediaDecodeTime);a&&!f.videoSegmentStream&&(f.coalesceStream.numberOfTracks++,f.videoSegmentStream=new hd(a,d),f.videoSegmentStream.on("timelineStartInfo",
function(d){h&&(h.timelineStartInfo=d,f.audioSegmentStream.setEarliestDts(d.dts))}),f.videoSegmentStream.on("processedGopsInfo",c.trigger.bind(c,"gopInfo")),f.videoSegmentStream.on("baseMediaDecodeTime",function(d){h&&f.audioSegmentStream.setVideoBaseMediaDecodeTime(d)}),f.h264Stream.pipe(f.videoSegmentStream).pipe(f.coalesceStream));h&&!f.audioSegmentStream&&(f.coalesceStream.numberOfTracks++,f.audioSegmentStream=new uc(h,d),f.adtsStream.pipe(f.audioSegmentStream).pipe(f.coalesceStream))}});f.coalesceStream.on("data",
this.trigger.bind(this,"data"));f.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(d){var c=this.transmuxPipeline_;this.baseMediaDecodeTime=d;h&&(h.timelineStartInfo.dts=void 0,h.timelineStartInfo.pts=void 0,Ga.clearDtsInfo(h),h.timelineStartInfo.baseMediaDecodeTime=d,c.audioTimestampRolloverStream&&c.audioTimestampRolloverStream.discontinuity());a&&(c.videoSegmentStream&&(c.videoSegmentStream.gopCache_=[],c.videoTimestampRolloverStream.discontinuity()),
a.timelineStartInfo.dts=void 0,a.timelineStartInfo.pts=void 0,Ga.clearDtsInfo(a),c.captionStream.reset(),a.timelineStartInfo.baseMediaDecodeTime=d);c.timedMetadataTimestampRolloverStream&&c.timedMetadataTimestampRolloverStream.discontinuity()};this.setAudioAppendStart=function(d){h&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(d)};this.alignGopsWith=function(d){a&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(d)};this.push=function(d){if(f){var a=
zl(d);a&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():a||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline();f=!1}this.transmuxPipeline_.headOfPipeline.push(d)};this.flush=function(){f=!0;this.transmuxPipeline_.headOfPipeline.flush()};this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}};Te.prototype=new Z;var nb={Transmuxer:Te,VideoSegmentStream:hd,AudioSegmentStream:uc,AUDIO_PROPERTIES:Re,VIDEO_PROPERTIES:Se};Object.freeze({"default":nb,
__moduleExports:nb,Transmuxer:nb.Transmuxer,VideoSegmentStream:nb.VideoSegmentStream,AudioSegmentStream:nb.AudioSegmentStream,AUDIO_PROPERTIES:nb.AUDIO_PROPERTIES,VIDEO_PROPERTIES:nb.VIDEO_PROPERTIES});var id=Fa.parseType,xa=function(d){return new Date(1E3*d-20828448E5)},ii=function(d){return{isLeading:(d[0]&12)>>>2,dependsOn:d[0]&3,isDependedOn:(d[1]&192)>>>6,hasRedundancy:(d[1]&48)>>>4,paddingValue:(d[1]&14)>>>1,isNonSyncSample:d[1]&1,degradationPriority:d[2]<<8|d[3]}},Ib={avc1:function(d){var c=
new DataView(d.buffer,d.byteOffset,d.byteLength);return{dataReferenceIndex:c.getUint16(6),width:c.getUint16(24),height:c.getUint16(26),horizresolution:c.getUint16(28)+c.getUint16(30)/16,vertresolution:c.getUint16(32)+c.getUint16(34)/16,frameCount:c.getUint16(40),depth:c.getUint16(74),config:ja(d.subarray(78,d.byteLength))}},avcC:function(d){var c=new DataView(d.buffer,d.byteOffset,d.byteLength),f={configurationVersion:d[0],avcProfileIndication:d[1],profileCompatibility:d[2],avcLevelIndication:d[3],
lengthSizeMinusOne:d[4]&3,sps:[],pps:[]},a=d[5]&31,h;var m=6;for(h=0;h<a;h++){var n=c.getUint16(m);m+=2;f.sps.push(new Uint8Array(d.subarray(m,m+n)));m+=n}a=d[m];m++;for(h=0;h<a;h++)n=c.getUint16(m),m+=2,f.pps.push(new Uint8Array(d.subarray(m,m+n))),m+=n;return f},btrt:function(d){d=new DataView(d.buffer,d.byteOffset,d.byteLength);return{bufferSizeDB:d.getUint32(0),maxBitrate:d.getUint32(4),avgBitrate:d.getUint32(8)}},esds:function(d){return{version:d[0],flags:new Uint8Array(d.subarray(1,4)),esId:d[6]<<
8|d[7],streamPriority:d[8]&31,decoderConfig:{objectProfileIndication:d[11],streamType:d[12]>>>2&63,bufferSize:d[13]<<16|d[14]<<8|d[15],maxBitrate:d[16]<<24|d[17]<<16|d[18]<<8|d[19],avgBitrate:d[20]<<24|d[21]<<16|d[22]<<8|d[23],decoderConfigDescriptor:{tag:d[24],length:d[25],audioObjectType:d[26]>>>3&31,samplingFrequencyIndex:(d[26]&7)<<1|d[27]>>>7&1,channelConfiguration:d[27]>>>3&15}}}},ftyp:function(d){var c=new DataView(d.buffer,d.byteOffset,d.byteLength);c={majorBrand:id(d.subarray(0,4)),minorVersion:c.getUint32(4),
compatibleBrands:[]};for(var f=8;f<d.byteLength;)c.compatibleBrands.push(id(d.subarray(f,f+4))),f+=4;return c},dinf:function(d){return{boxes:ja(d)}},dref:function(d){return{version:d[0],flags:new Uint8Array(d.subarray(1,4)),dataReferences:ja(d.subarray(8))}},hdlr:function(d){var c={version:(new DataView(d.buffer,d.byteOffset,d.byteLength)).getUint8(0),flags:new Uint8Array(d.subarray(1,4)),handlerType:id(d.subarray(8,12)),name:""},f;for(f=24;f<d.byteLength&&0!==d[f];f++)c.name+=String.fromCharCode(d[f]);
c.name=decodeURIComponent(escape(c.name));return c},mdat:function(d){var c=d.byteLength,f=new DataView(d.buffer,d.byteOffset,d.byteLength),a=[],h;for(h=0;h+4<d.length;h+=m){var m=f.getUint32(h);h+=4;if(0>=m)a.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(d[h]&31){case 1:a.push("slice_layer_without_partitioning_rbsp");break;case 5:a.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:a.push("sei_rbsp");break;case 7:a.push("seq_parameter_set_rbsp");break;case 8:a.push("pic_parameter_set_rbsp");
break;case 9:a.push("access_unit_delimiter_rbsp");break;default:a.push("UNKNOWN NAL - "+d[h]&31)}}return{byteLength:c,nals:a}},mdhd:function(d){var c=new DataView(d.buffer,d.byteOffset,d.byteLength),f=4;d={version:c.getUint8(0),flags:new Uint8Array(d.subarray(1,4)),language:""};1===d.version?(f+=4,d.creationTime=xa(c.getUint32(f)),f+=8,d.modificationTime=xa(c.getUint32(f)),f+=4,d.timescale=c.getUint32(f),f+=8):(d.creationTime=xa(c.getUint32(f)),f+=4,d.modificationTime=xa(c.getUint32(f)),f+=4,d.timescale=
c.getUint32(f),f+=4);d.duration=c.getUint32(f);c=c.getUint16(f+4);d.language+=String.fromCharCode((c>>10)+96);d.language+=String.fromCharCode(((c&992)>>5)+96);d.language+=String.fromCharCode((c&31)+96);return d},mdia:function(d){return{boxes:ja(d)}},mfhd:function(d){return{version:d[0],flags:new Uint8Array(d.subarray(1,4)),sequenceNumber:d[4]<<24|d[5]<<16|d[6]<<8|d[7]}},minf:function(d){return{boxes:ja(d)}},mp4a:function(d){var c=new DataView(d.buffer,d.byteOffset,d.byteLength);c={dataReferenceIndex:c.getUint16(6),
channelcount:c.getUint16(16),samplesize:c.getUint16(18),samplerate:c.getUint16(24)+c.getUint16(26)/65536};28<d.byteLength&&(c.streamDescriptor=ja(d.subarray(28))[0]);return c},moof:function(d){return{boxes:ja(d)}},moov:function(d){return{boxes:ja(d)}},mvex:function(d){return{boxes:ja(d)}},mvhd:function(d){var c=new DataView(d.buffer,d.byteOffset,d.byteLength),f=4,a={version:c.getUint8(0),flags:new Uint8Array(d.subarray(1,4))};1===a.version?(f+=4,a.creationTime=xa(c.getUint32(f)),f+=8,a.modificationTime=
xa(c.getUint32(f)),f+=4,a.timescale=c.getUint32(f),f+=8):(a.creationTime=xa(c.getUint32(f)),f+=4,a.modificationTime=xa(c.getUint32(f)),f+=4,a.timescale=c.getUint32(f),f+=4);a.duration=c.getUint32(f);f+=4;a.rate=c.getUint16(f)+c.getUint16(f+2)/16;f+=4;a.volume=c.getUint8(f)+c.getUint8(f+1)/8;f=f+2+2+8;a.matrix=new Uint32Array(d.subarray(f,f+36));a.nextTrackId=c.getUint32(f+36+24);return a},pdin:function(d){var c=new DataView(d.buffer,d.byteOffset,d.byteLength);return{version:c.getUint8(0),flags:new Uint8Array(d.subarray(1,
4)),rate:c.getUint32(4),initialDelay:c.getUint32(8)}},sdtp:function(d){var c={version:d[0],flags:new Uint8Array(d.subarray(1,4)),samples:[]},f;for(f=4;f<d.byteLength;f++)c.samples.push({dependsOn:(d[f]&48)>>4,isDependedOn:(d[f]&12)>>2,hasRedundancy:d[f]&3});return c},sidx:function(d){var c=new DataView(d.buffer,d.byteOffset,d.byteLength),f={version:d[0],flags:new Uint8Array(d.subarray(1,4)),references:[],referenceId:c.getUint32(4),timescale:c.getUint32(8),earliestPresentationTime:c.getUint32(12),
firstOffset:c.getUint32(16)},a=c.getUint16(22),h;for(h=24;a;h+=12,a--)f.references.push({referenceType:(d[h]&128)>>>7,referencedSize:c.getUint32(h)&2147483647,subsegmentDuration:c.getUint32(h+4),startsWithSap:!!(d[h+8]&128),sapType:(d[h+8]&112)>>>4,sapDeltaTime:c.getUint32(h+8)&268435455});return f},smhd:function(d){return{version:d[0],flags:new Uint8Array(d.subarray(1,4)),balance:d[4]+d[5]/256}},stbl:function(d){return{boxes:ja(d)}},stco:function(d){var c=new DataView(d.buffer,d.byteOffset,d.byteLength);
d={version:d[0],flags:new Uint8Array(d.subarray(1,4)),chunkOffsets:[]};var f=c.getUint32(4),a;for(a=8;f;a+=4,f--)d.chunkOffsets.push(c.getUint32(a));return d},stsc:function(d){var c=new DataView(d.buffer,d.byteOffset,d.byteLength),f=c.getUint32(4);d={version:d[0],flags:new Uint8Array(d.subarray(1,4)),sampleToChunks:[]};var a;for(a=8;f;a+=12,f--)d.sampleToChunks.push({firstChunk:c.getUint32(a),samplesPerChunk:c.getUint32(a+4),sampleDescriptionIndex:c.getUint32(a+8)});return d},stsd:function(d){return{version:d[0],
flags:new Uint8Array(d.subarray(1,4)),sampleDescriptions:ja(d.subarray(8))}},stsz:function(d){var c=new DataView(d.buffer,d.byteOffset,d.byteLength),f={version:d[0],flags:new Uint8Array(d.subarray(1,4)),sampleSize:c.getUint32(4),entries:[]},a;for(a=12;a<d.byteLength;a+=4)f.entries.push(c.getUint32(a));return f},stts:function(d){var c=new DataView(d.buffer,d.byteOffset,d.byteLength);d={version:d[0],flags:new Uint8Array(d.subarray(1,4)),timeToSamples:[]};var f=c.getUint32(4),a;for(a=8;f;a+=8,f--)d.timeToSamples.push({sampleCount:c.getUint32(a),
sampleDelta:c.getUint32(a+4)});return d},styp:function(d){return Ib.ftyp(d)},tfdt:function(d){var c={version:d[0],flags:new Uint8Array(d.subarray(1,4)),baseMediaDecodeTime:d[4]<<24|d[5]<<16|d[6]<<8|d[7]};1===c.version&&(c.baseMediaDecodeTime*=Math.pow(2,32),c.baseMediaDecodeTime+=d[8]<<24|d[9]<<16|d[10]<<8|d[11]);return c},tfhd:function(d){var c=new DataView(d.buffer,d.byteOffset,d.byteLength);d={version:d[0],flags:new Uint8Array(d.subarray(1,4)),trackId:c.getUint32(4)};var f=d.flags[2]&1,a=d.flags[2]&
2,h=d.flags[2]&8,m=d.flags[2]&16,n=d.flags[2]&32,p=d.flags[0]&65536,u=d.flags[0]&131072;var t=8;f&&(t+=4,d.baseDataOffset=c.getUint32(12),t+=4);a&&(d.sampleDescriptionIndex=c.getUint32(t),t+=4);h&&(d.defaultSampleDuration=c.getUint32(t),t+=4);m&&(d.defaultSampleSize=c.getUint32(t),t+=4);n&&(d.defaultSampleFlags=c.getUint32(t));p&&(d.durationIsEmpty=!0);!f&&u&&(d.baseDataOffsetIsMoof=!0);return d},tkhd:function(d){var c=new DataView(d.buffer,d.byteOffset,d.byteLength),f=4,a={version:c.getUint8(0),
flags:new Uint8Array(d.subarray(1,4))};1===a.version?(f+=4,a.creationTime=xa(c.getUint32(f)),f+=8,a.modificationTime=xa(c.getUint32(f)),f+=4,a.trackId=c.getUint32(f),f=f+4+8):(a.creationTime=xa(c.getUint32(f)),f+=4,a.modificationTime=xa(c.getUint32(f)),f+=4,a.trackId=c.getUint32(f),f=f+4+4);a.duration=c.getUint32(f);f=f+4+8;a.layer=c.getUint16(f);f+=2;a.alternateGroup=c.getUint16(f);f+=2;a.volume=c.getUint8(f)+c.getUint8(f+1)/8;f=f+2+2;a.matrix=new Uint32Array(d.subarray(f,f+36));f+=36;a.width=c.getUint16(f)+
c.getUint16(f+2)/16;f+=4;a.height=c.getUint16(f)+c.getUint16(f+2)/16;return a},traf:function(d){return{boxes:ja(d)}},trak:function(d){return{boxes:ja(d)}},trex:function(d){var c=new DataView(d.buffer,d.byteOffset,d.byteLength);return{version:d[0],flags:new Uint8Array(d.subarray(1,4)),trackId:c.getUint32(4),defaultSampleDescriptionIndex:c.getUint32(8),defaultSampleDuration:c.getUint32(12),defaultSampleSize:c.getUint32(16),sampleDependsOn:d[20]&3,sampleIsDependedOn:(d[21]&192)>>6,sampleHasRedundancy:(d[21]&
48)>>4,samplePaddingValue:(d[21]&14)>>1,sampleIsDifferenceSample:!!(d[21]&1),sampleDegradationPriority:c.getUint16(22)}},trun:function(d){var c={version:d[0],flags:new Uint8Array(d.subarray(1,4)),samples:[]},f=new DataView(d.buffer,d.byteOffset,d.byteLength),a=c.flags[2]&1,h=c.flags[2]&4,m=c.flags[1]&1,n=c.flags[1]&2,p=c.flags[1]&4,u=c.flags[1]&8,t=f.getUint32(4),q=8;a&&(c.dataOffset=f.getInt32(q),q+=4);h&&t&&(a={flags:ii(d.subarray(q,q+4))},q+=4,m&&(a.duration=f.getUint32(q),q+=4),n&&(a.size=f.getUint32(q),
q+=4),u&&(a.compositionTimeOffset=f.getUint32(q),q+=4),c.samples.push(a),t--);for(;t--;)a={},m&&(a.duration=f.getUint32(q),q+=4),n&&(a.size=f.getUint32(q),q+=4),p&&(a.flags=ii(d.subarray(q,q+4)),q+=4),u&&(a.compositionTimeOffset=f.getUint32(q),q+=4),c.samples.push(a);return c},"url ":function(d){return{version:d[0],flags:new Uint8Array(d.subarray(1,4))}},vmhd:function(d){var c=new DataView(d.buffer,d.byteOffset,d.byteLength);return{version:d[0],flags:new Uint8Array(d.subarray(1,4)),graphicsmode:c.getUint16(4),
opcolor:new Uint16Array([c.getUint16(6),c.getUint16(8),c.getUint16(10)])}}};var ja=function(d){var c=0,f=[],a;var h=new ArrayBuffer(d.length);var m=new Uint8Array(h);for(a=0;a<d.length;++a)m[a]=d[a];for(h=new DataView(h);c<d.byteLength;){m=h.getUint32(c);a=id(d.subarray(c+4,c+8));var n=1<m?c+m:d.byteLength;c=(Ib[a]||function(d){return{data:d}})(d.subarray(c+8,n));c.size=m;c.type=a;f.push(c);c=n}return f};var ji=function(d,c){c=c||0;var f=Array(2*c+1).join(" ");return d.map(function(d,h){return f+
d.type+"\n"+Object.keys(d).filter(function(d){return"type"!==d&&"boxes"!==d}).map(function(a){var c=f+"  "+a+": ";a=d[a];return a instanceof Uint8Array||a instanceof Uint32Array?(a=Array.prototype.slice.call(new Uint8Array(a.buffer,a.byteOffset,a.byteLength)).map(function(d){return" "+("00"+d.toString(16)).slice(-2)}).join("").match(/.{1,24}/g))?1===a.length?c+"<"+a.join("").slice(1)+">":c+"<\n"+a.map(function(d){return f+"  "+d}).join("\n")+"\n"+f+"  >":c+"<>":c+JSON.stringify(a,null,2).split("\n").map(function(d,
a){return 0===a?d:f+"  "+d}).join("\n")}).join("\n")+(d.boxes?"\n"+ji(d.boxes,c+1):"")}).join("\n")};var Ia={inspect:ja,textify:ji,parseTfdt:Ib.tfdt,parseHdlr:Ib.hdlr,parseTfhd:Ib.tfhd,parseTrun:Ib.trun},ki=Object.freeze({"default":Ia,__moduleExports:Ia,inspect:Ia.inspect,textify:Ia.textify,parseTfdt:Ia.parseTfdt,parseHdlr:Ia.parseHdlr,parseTfhd:Ia.parseTfhd,parseTrun:Ia.parseTrun}),Ue=ki&&Ia||ki,Bl=kc.discardEmulationPreventionBytes,Cl=Ke.CaptionStream,Dl=function(d,c,f){var a=c,h=f.defaultSampleDuration||
0,m=f.defaultSampleSize||0,n=f.trackId,p=[];d.forEach(function(d){d=Ue.parseTrun(d).samples;d.forEach(function(d){void 0===d.duration&&(d.duration=h);void 0===d.size&&(d.size=m);d.trackId=n;d.dts=a;void 0===d.compositionTimeOffset&&(d.compositionTimeOffset=0);d.pts=a+d.compositionTimeOffset;a+=d.duration});p=p.concat(d)});return p},El=function(d,c){var f=Fa.findBox(d,["moof","traf"]),a={},h=[];Fa.findBox(d,["mdat"]).forEach(function(d,a){h.push({mdat:d,traf:f[a]})});h.forEach(function(d){var f=d.mdat,
h=d.traf;d=Fa.findBox(h,["tfhd"]);var m=Ue.parseTfhd(d[0]);d=m.trackId;var t=Fa.findBox(h,["tfdt"]);t=0<t.length?Ue.parseTfdt(t[0]).baseMediaDecodeTime:0;h=Fa.findBox(h,["trun"]);if(c===d&&0<h.length){h=Dl(h,t,m);m=new DataView(f.buffer,f.byteOffset,f.byteLength);t=[];var q;for(q=0;q+4<f.length;q+=r){var r=m.getUint32(q);q+=4;if(!(0>=r))switch(f[q]&31){case 6:var Wa=f.subarray(q+1,q+1+r);a:{var v=q;for(var B=0;B<h.length;B++){var z=h[B];if(v<z.size){v=z;break a}v-=z.size}v=null}Wa={nalUnitType:"sei_rbsp",
size:r,data:Wa,escapedRBSP:Bl(Wa),trackId:d};if(v){Wa.pts=v.pts;Wa.dts=v.dts;var V=v}else Wa.pts=V.pts,Wa.dts=V.dts;t.push(Wa)}}a[d]||(a[d]=[]);a[d]=a[d].concat(t)}});return a},Ve=function(){var d=!1,c,f,a,h,m;this.isInitialized=function(){return d};this.init=function(){c=new Cl;d=!0;c.on("data",function(d){d.startTime=d.startPts/h;d.endTime=d.endPts/h;m.captions.push(d);m.captionStreams[d.stream]=!0})};this.isNewInit=function(d,c){return d&&0===d.length||c&&"object"===("undefined"===typeof c?"undefined":
da(c))&&0===Object.keys(c).length?!1:a!==d[0]||h!==c[a]};this.parse=function(d,c,u){if(this.isInitialized()){if(!c||!u)return null;if(this.isNewInit(c,u))a=c[0],h=u[a];else if(!a||!h)return f.push(d),null}else return null;for(;0<f.length;){var n=f.shift();this.parse(n,c,u)}c=a;u=h;d=c?{seiNals:El(d,c)[c],timescale:u}:null;if(null===d||!d.seiNals)return null;this.pushNals(d.seiNals);this.flushStream();return m};this.pushNals=function(d){if(!this.isInitialized()||!d||0===d.length)return null;d.forEach(function(d){c.push(d)})};
this.flushStream=function(){if(!this.isInitialized())return null;c.flush()};this.clearParsedCaptions=function(){m.captions=[];m.captionStreams={}};this.resetCaptionStream=function(){if(!this.isInitialized())return null;c.reset()};this.clearAllCaptions=function(){this.clearParsedCaptions();this.resetCaptionStream()};this.reset=function(){f=[];h=a=null;m?this.clearParsedCaptions():m={captions:[],captionStreams:{}};this.resetCaptionStream()};this.reset()},li=Object.freeze({"default":Ve,__moduleExports:Ve}),
Fl=li&&Ve||li,mi=function(d){var c=d[1]&31;return c=c<<8|d[2]},jd=function(d){return!!(d[1]&64)},kd=function(d){var c=0;1<(d[3]&48)>>>4&&(c+=d[4]+1);return c},We=function(d){switch(d){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Ja={parseType:function(d,c){var f=mi(d);return 0===f?"pat":f===c?"pmt":c?"pes":null},parsePat:function(d){var c=
jd(d),f=4+kd(d);c&&(f+=d[f]+1);return(d[f+10]&31)<<8|d[f+11]},parsePmt:function(d){var c={},f=jd(d),a=4+kd(d);f&&(a+=d[a]+1);if(d[a+5]&1){f=3+((d[a+1]&15)<<8|d[a+2])-4;for(var h=12+((d[a+10]&15)<<8|d[a+11]);h<f;){var m=a+h;c[(d[m+1]&31)<<8|d[m+2]]=d[m];h+=((d[m+3]&15)<<8|d[m+4])+5}return c}},parsePayloadUnitStartIndicator:jd,parsePesType:function(d,c){var f=mi(d);switch(c[f]){case W.H264_STREAM_TYPE:return"video";case W.ADTS_STREAM_TYPE:return"audio";case W.METADATA_STREAM_TYPE:return"timed-metadata";
default:return null}},parsePesTime:function(d){if(!jd(d))return null;var c=4+kd(d);if(c>=d.byteLength)return null;var f=null;var a=d[c+7];a&192&&(f={},f.pts=(d[c+9]&14)<<27|(d[c+10]&255)<<20|(d[c+11]&254)<<12|(d[c+12]&255)<<5|(d[c+13]&254)>>>3,f.pts*=4,f.pts+=(d[c+13]&6)>>>1,f.dts=f.pts,a&64&&(f.dts=(d[c+14]&14)<<27|(d[c+15]&255)<<20|(d[c+16]&254)<<12|(d[c+17]&255)<<5|(d[c+18]&254)>>>3,f.dts*=4,f.dts+=(d[c+18]&6)>>>1));return f},videoPacketContainsKeyFrame:function(d){var c=4+kd(d);d=d.subarray(c);
for(var f=c=0,a=!1;f<d.byteLength-3;f++)if(1===d[f+2]){c=f+5;break}for(;c<d.byteLength;)switch(d[c]){case 0:if(0!==d[c-1]){c+=2;break}else if(0!==d[c-2]){c++;break}f+3!==c-2&&(f=We(d[f+3]&31),"slice_layer_without_partitioning_rbsp_idr"===f&&(a=!0));do c++;while(1!==d[c]&&c<d.length);f=c-2;c+=3;break;case 1:if(0!==d[c-1]||0!==d[c-2]){c+=3;break}f=We(d[f+3]&31);"slice_layer_without_partitioning_rbsp_idr"===f&&(a=!0);f=c-2;c+=3;break;default:c+=3}(d=d.subarray(f))&&3<d.byteLength&&(f=We(d[3]&31),"slice_layer_without_partitioning_rbsp_idr"===
f&&(a=!0));return a}},ni=Object.freeze({"default":Ja,__moduleExports:Ja,parseType:Ja.parseType,parsePat:Ja.parsePat,parsePmt:Ja.parsePmt,parsePayloadUnitStartIndicator:Ja.parsePayloadUnitStartIndicator,parsePesType:Ja.parsePesType,parsePesTime:Ja.parsePesTime,videoPacketContainsKeyFrame:Ja.videoPacketContainsKeyFrame}),Gl=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],oi=function(d){return d[0]<<21|d[1]<<14|d[2]<<7|d[3]},cb={parseId3TagSize:function(d,c){var f=d[c+6]<<21|d[c+
7]<<14|d[c+8]<<7|d[c+9];return(d[c+5]&16)>>4?f+20:f+10},parseAdtsSize:function(d,c){return d[c+3]&6144|d[c+4]<<3|(d[c+5]&224)>>5},parseType:function(d,c){return 73===d[c]&&68===d[c+1]&&51===d[c+2]?"timed-metadata":d[c]&1&&240===(d[c+1]&240)?"audio":null},parseSampleRate:function(d){for(var c=0;c+5<d.length;)if(255!==d[c]||240!==(d[c+1]&246))c++;else return Gl[(d[c+2]&60)>>>2];return null},parseAacTimestamp:function(d){var c=10;d[5]&64&&(c=c+4+oi(d.subarray(10,14)));do{var f=oi(d.subarray(c+4,c+8));
if(1>f)break;var a=String.fromCharCode(d[c],d[c+1],d[c+2],d[c+3]);if("PRIV"===a){a=d.subarray(c+10,c+f+10);for(var h=0;h<a.byteLength;h++)if(0===a[h]){var m=unescape,n,p=a,u=h,t="";for(n=0;n<u;n++)t+="%"+("00"+p[n].toString(16)).slice(-2);if("com.apple.streaming.transportStreamTimestamp"===m(t))return d=a.subarray(h+1),c=(d[3]&1)<<30|d[4]<<22|d[5]<<14|d[6]<<6|d[7]>>>2,c*=4,c+=d[7]&3;break}}c+=10;c+=f}while(c<d.byteLength);return null}},pi=Object.freeze({"default":cb,__moduleExports:cb,parseId3TagSize:cb.parseId3TagSize,
parseAdtsSize:cb.parseAdtsSize,parseType:cb.parseType,parseSampleRate:cb.parseSampleRate,parseAacTimestamp:cb.parseAacTimestamp}),wc=pi&&cb||pi,Jb=Th.handleRollover;var aa=ni&&Ja||ni;var Hl=function(d,c){if(d.audio&&d.audio.length){var f=c;"undefined"===typeof f&&(f=d.audio[0].dts);d.audio.forEach(function(d){d.dts=Jb(d.dts,f);d.pts=Jb(d.pts,f);d.dtsTime=d.dts/9E4;d.ptsTime=d.pts/9E4})}if(d.video&&d.video.length){var a=c;"undefined"===typeof a&&(a=d.video[0].dts);d.video.forEach(function(d){d.dts=
Jb(d.dts,a);d.pts=Jb(d.pts,a);d.dtsTime=d.dts/9E4;d.ptsTime=d.pts/9E4});if(d.firstKeyFrame){var h=d.firstKeyFrame;h.dts=Jb(h.dts,a);h.pts=Jb(h.pts,a);h.dtsTime=h.dts/9E4;h.ptsTime=h.dts/9E4}}},ld=function(d,c){if(!(d instanceof c))throw new TypeError("Cannot call a class as a function");},Il=function(){function d(d,f){for(var a=0;a<f.length;a++){var c=f[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}return function(c,f,a){f&&d(c.prototype,
f);a&&d(c,a);return c}}(),Jl=function(d,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof c?"undefined":da(c)));d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)},T=null,Kl=function(){function d(c){ld(this,d);if(!T){var f=[[[],[],[],[],[]],[[],[],[],[],[]]],a=f[0],h=f[1],m=a[4],n=h[4],
p,u,t,q=[],r=[],v;for(p=0;256>p;p++)r[(q[p]=p<<1^283*(p>>7))^p]=p;for(u=t=0;!m[u];u^=v||1,t=r[t]||1){var w=t^t<<1^t<<2^t<<3^t<<4;w=w>>8^w&255^99;m[u]=w;n[w]=u;var B=q[p=q[v=q[u]]];var z=16843009*B^65537*p^257*v^16843008*u;B=257*q[w]^16843008*w;for(p=0;4>p;p++)a[p][u]=B=B<<24^B>>>8,h[p][w]=z=z<<24^z>>>8}for(p=0;5>p;p++)a[p]=a[p].slice(0),h[p]=h[p].slice(0);T=f}this._tables=[[T[0][0].slice(),T[0][1].slice(),T[0][2].slice(),T[0][3].slice(),T[0][4].slice()],[T[1][0].slice(),T[1][1].slice(),T[1][2].slice(),
T[1][3].slice(),T[1][4].slice()]];f=this._tables[0][4];a=this._tables[1];u=c.length;t=1;if(4!==u&&6!==u&&8!==u)throw Error("Invalid aes key size");m=c.slice(0);n=[];this._key=[m,n];for(c=u;c<4*u+28;c++){h=m[c-1];if(0===c%u||8===u&&4===c%u)h=f[h>>>24]<<24^f[h>>16&255]<<16^f[h>>8&255]<<8^f[h&255],0===c%u&&(h=h<<8^h>>>24^t<<24,t=t<<1^283*(t>>7));m[c]=m[c-u]^h}for(u=0;c;u++,c--)h=m[u&3?c:c-4],n[u]=4>=c||4>u?h:a[0][f[h>>>24]]^a[1][f[h>>16&255]]^a[2][f[h>>8&255]]^a[3][f[h&255]]}d.prototype.decrypt=function(d,
f,a,h,m,n){var c=this._key[1];d^=c[0];h^=c[1];a^=c[2];f^=c[3];var u=c.length/4-2,t,q=4;var r=this._tables[1];var v=r[0],w=r[1],B=r[2],z=r[3],V=r[4];for(t=0;t<u;t++){r=v[d>>>24]^w[h>>16&255]^B[a>>8&255]^z[f&255]^c[q];var x=v[h>>>24]^w[a>>16&255]^B[f>>8&255]^z[d&255]^c[q+1];var gd=v[a>>>24]^w[f>>16&255]^B[d>>8&255]^z[h&255]^c[q+2];f=v[f>>>24]^w[d>>16&255]^B[h>>8&255]^z[a&255]^c[q+3];q+=4;d=r;h=x;a=gd}for(t=0;4>t;t++)m[(3&-t)+n]=V[d>>>24]<<24^V[h>>16&255]<<16^V[a>>8&255]<<8^V[f&255]^c[q++],r=d,d=h,h=
a,a=f,f=r};return d}(),qi=function(){function d(){ld(this,d);this.listeners={}}d.prototype.on=function(d,f){this.listeners[d]||(this.listeners[d]=[]);this.listeners[d].push(f)};d.prototype.off=function(d,f){if(!this.listeners[d])return!1;var a=this.listeners[d].indexOf(f);this.listeners[d].splice(a,1);return-1<a};d.prototype.trigger=function(d){var c=this.listeners[d];if(c)if(2===arguments.length)for(var a=c.length,h=0;h<a;++h)c[h].call(this,arguments[1]);else{a=Array.prototype.slice.call(arguments,
1);h=c.length;for(var m=0;m<h;++m)c[m].apply(this,a)}};d.prototype.dispose=function(){this.listeners={}};d.prototype.pipe=function(d){this.on("data",function(c){d.push(c)})};return d}(),ri=function(d){function c(){ld(this,c);var f=d.call(this,qi);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");f=!f||"object"!==("undefined"===typeof f?"undefined":da(f))&&"function"!==typeof f?this:f;f.jobs=[];f.delay=1;f.timeout_=null;return f}Jl(c,d);c.prototype.processJob_=
function(){this.jobs.shift()();this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null};c.prototype.push=function(d){this.jobs.push(d);this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))};return c}(qi),ra=function(d){return d<<24|(d&65280)<<8|(d&16711680)>>8|d>>>24},si=function(d,c,f){var a=new Int32Array(d.buffer,d.byteOffset,d.byteLength>>2);c=new Kl(Array.prototype.slice.call(c));d=new Uint8Array(d.byteLength);var h=new Int32Array(d.buffer),
m;var n=f[0];var p=f[1];var u=f[2];f=f[3];for(m=0;m<a.length;m+=4){var t=ra(a[m]);var q=ra(a[m+1]);var r=ra(a[m+2]);var v=ra(a[m+3]);c.decrypt(t,q,r,v,h,m);h[m]=ra(h[m]^n);h[m+1]=ra(h[m+1]^p);h[m+2]=ra(h[m+2]^u);h[m+3]=ra(h[m+3]^f);n=t;p=q;u=r;f=v}return d},Ll=function(){function d(c,f,a,h){ld(this,d);var m=d.STEP,n=new Int32Array(c.buffer),p=new Uint8Array(c.byteLength);c=0;this.asyncStream_=new ri;this.asyncStream_.push(this.decryptChunk_(n.subarray(c,c+m),f,a,p));for(c=m;c<n.length;c+=m)a=new Uint32Array([ra(n[c-
4]),ra(n[c-3]),ra(n[c-2]),ra(n[c-1])]),this.asyncStream_.push(this.decryptChunk_(n.subarray(c,c+m),f,a,p));this.asyncStream_.push(function(){h(null,p.subarray(0,p.byteLength-p[p.byteLength-1]))})}d.prototype.decryptChunk_=function(d,f,a,h){return function(){var c=si(d,f,a);h.set(c,d.byteOffset)}};Il(d,null,[{key:"STEP",get:function(){return 32E3}}]);return d}(),za=function(d,c){if(/^[a-z]+:/i.test(c))return c;/\/\//i.test(d)||(d=Wc.buildAbsoluteURL(q.location.href,d));return Wc.buildAbsoluteURL(d,
c)},Aa=function(d,c){if(!(d instanceof c))throw new TypeError("Cannot call a class as a function");},Ba=function(){function d(d,f){for(var a=0;a<f.length;a++){var c=f[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(d,c.key,c)}}return function(c,f,a){f&&d(c.prototype,f);a&&d(c,a);return c}}(),Ml=function h(c,f,a){null===c&&(c=Function.prototype);var m=Object.getOwnPropertyDescriptor(c,f);if(void 0===m){if(c=Object.getPrototypeOf(c),null!==c)return h(c,
f,a)}else{if("value"in m)return m.value;f=m.get;return void 0===f?void 0:f.call(a)}},Ka=function(c,f){if("function"!==typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof f?"undefined":da(f)));c.prototype=Object.create(f&&f.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});f&&(Object.setPrototypeOf?Object.setPrototypeOf(c,f):c.__proto__=f)},La=function(c,f){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!f||"object"!==("undefined"===typeof f?"undefined":da(f))&&"function"!==typeof f?c:f},Nl=function(){return function(c,f){if(Array.isArray(c))return c;$jscomp.initSymbol();$jscomp.initSymbolIterator();if(Symbol.iterator in Object(c)){var a=[],h=!0,m=!1,n=void 0;try{$jscomp.initSymbol();$jscomp.initSymbolIterator();for(var p=c[Symbol.iterator](),u;!(h=(u=p.next()).done)&&(a.push(u.value),!f||a.length!==f);h=!0);}catch(t){m=!0,n=t}finally{try{if(!h&&p["return"])p["return"]()}finally{if(m)throw n;
}}return a}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),Xe=r.mergeOptions,Ol=r.log,Ye=function(c,f){["AUDIO","SUBTITLES"].forEach(function(a){for(var h in c.mediaGroups[a])for(var m in c.mediaGroups[a][h])f(c.mediaGroups[a][h][m],a,h,m)})},Pl=function(c,f,a){var h=f.slice();a=a||0;f=Math.min(c.length,f.length+a);for(var m=a;m<f;m++)h[m-a]=Xe(c[m],h[m-a]);return h},Ze=function(c,f){var a=Xe(c,{}),h=a.playlists[f.uri];if(!h||h.segments&&f.segments&&h.segments.length===
f.segments.length&&h.mediaSequence===f.mediaSequence)return null;var m=Xe(h,f);h.segments&&(m.segments=Pl(h.segments,f.segments,f.mediaSequence-h.mediaSequence));m.segments.forEach(function(a){var c=m.resolvedUri;a.resolvedUri||(a.resolvedUri=za(c,a.uri));a.key&&!a.key.resolvedUri&&(a.key.resolvedUri=za(c,a.key.uri));a.map&&!a.map.resolvedUri&&(a.map.resolvedUri=za(c,a.map.uri))});for(h=0;h<a.playlists.length;h++)a.playlists[h].uri===f.uri&&(a.playlists[h]=m);a.playlists[f.uri]=m;return a},ti=function(c){for(var f=
c.playlists.length;f--;){var a=c.playlists[f];c.playlists[a.uri]=a;a.resolvedUri=za(c.uri,a.uri);a.id=f;a.attributes||(a.attributes={},Ol.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}},ui=function(c){Ye(c,function(f){f.uri&&(f.resolvedUri=za(c.uri,f.uri))})},vi=function(c,f){var a=c.segments[c.segments.length-1];return f&&a&&a.duration?1E3*a.duration:500*(c.targetDuration||10)},md=function(c){function f(a,c,m){Aa(this,f);var h=La(this,(f.__proto__||Object.getPrototypeOf(f)).call(this));
h.srcUrl=a;h.hls_=c;h.withCredentials=m;if(!h.srcUrl)throw Error("A non-empty playlist URL is required");h.state="HAVE_NOTHING";h.on("mediaupdatetimeout",function(){"HAVE_METADATA"===h.state&&(h.state="HAVE_CURRENT_METADATA",h.request=h.hls_.xhr({uri:za(h.master.uri,h.media().uri),withCredentials:h.withCredentials},function(a,c){if(h.request){if(a)return h.playlistRequestError(h.request,h.media().uri,"HAVE_METADATA");h.haveMetadata(h.request,h.media().uri)}}))});return h}Ka(f,c);Ba(f,[{key:"playlistRequestError",
value:function(a,c,f){this.request=null;f&&(this.state=f);this.error={playlist:this.master.playlists[c],status:a.status,message:"HLS playlist request error at URL: "+c,responseText:a.responseText,code:500<=a.status?4:2};this.trigger("error")}},{key:"haveMetadata",value:function(a,c){var h=this;this.request=null;this.state="HAVE_METADATA";var f=new kh;f.push(a.responseText);f.end();f.manifest.uri=c;f.manifest.attributes=f.manifest.attributes||{};var p=Ze(this.master,f.manifest);this.targetDuration=
f.manifest.targetDuration;p?(this.master=p,this.media_=this.master.playlists[f.manifest.uri]):this.trigger("playlistunchanged");this.media().endList||(q.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=q.setTimeout(function(){h.trigger("mediaupdatetimeout")},vi(this.media(),!!p)));this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest();q.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var a=this.request;this.request=
null;a.onreadystatechange=null;a.abort()}}},{key:"media",value:function(a){var c=this;if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);var f=this.state;if("string"===typeof a){if(!this.master.playlists[a])throw Error("Unknown playlist URI: "+a);a=this.master.playlists[a]}var n=!this.media_||a.uri!==this.media_.uri;if(this.master.playlists[a.uri].endList)this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=
null),this.state="HAVE_METADATA",this.media_=a,n&&(this.trigger("mediachanging"),this.trigger("mediachange"));else if(n){this.state="SWITCHING_MEDIA";if(this.request){if(za(this.master.uri,a.uri)===this.request.url)return;this.request.onreadystatechange=null;this.request.abort();this.request=null}this.media_&&this.trigger("mediachanging");this.request=this.hls_.xhr({uri:za(this.master.uri,a.uri),withCredentials:this.withCredentials},function(h,m){if(c.request){if(h)return c.playlistRequestError(c.request,
a.uri,f);c.haveMetadata(m,a.uri);"HAVE_MASTER"===f?c.trigger("loadedmetadata"):c.trigger("mediachange")}})}}},{key:"pause",value:function(){this.stopRequest();q.clearTimeout(this.mediaUpdateTimeout);"HAVE_NOTHING"===this.state&&(this.started=!1);"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(a){var c=this;q.clearTimeout(this.mediaUpdateTimeout);var f=this.media();a?
this.mediaUpdateTimeout=q.setTimeout(function(){return c.load()},f?f.targetDuration/2*1E3:5E3):this.started?f&&!f.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function(){var a=this;this.started=!0;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(c,f){if(a.request){a.request=null;if(c)return a.error={status:f.status,message:"HLS playlist request error at URL: "+a.srcUrl,responseText:f.responseText,
code:2},"HAVE_NOTHING"===a.state&&(a.started=!1),a.trigger("error");var h=new kh;h.push(f.responseText);h.end();a.state="HAVE_MASTER";h.manifest.uri=a.srcUrl;if(h.manifest.playlists)a.master=h.manifest,ti(a.master),ui(a.master),a.trigger("loadedplaylist"),a.request||a.media(h.manifest.playlists[0]);else return a.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:q.location.href,playlists:[{uri:a.srcUrl,id:0}]},a.master.playlists[a.srcUrl]=a.master.playlists[0],a.master.playlists[0].resolvedUri=
a.srcUrl,a.master.playlists[0].attributes=a.master.playlists[0].attributes||{},a.haveMetadata(f,a.srcUrl),a.trigger("loadedmetadata")}})}}]);return f}(r.EventTarget),wi=r.createTimeRange,Ql=function(c,f){var a=0,h=f-c.mediaSequence,m=c.segments[h];if(m){if("undefined"!==typeof m.start)return{result:m.start,precise:!0};if("undefined"!==typeof m.end)return{result:m.end-m.duration,precise:!0}}for(;h--;){m=c.segments[h];if("undefined"!==typeof m.end)return{result:a+m.end,precise:!0};a+=m.duration;if("undefined"!==
typeof m.start)return{result:a+m.start,precise:!0}}return{result:a,precise:!1}},xi=function(c,f,a){"undefined"===typeof f&&(f=c.mediaSequence+c.segments.length);if(f<c.mediaSequence)return 0;var h=Ql(c,f);if(h.precise)return h.result;a:{var m=0;for(var n=f-c.mediaSequence;n<c.segments.length;n++){f=c.segments[n];if("undefined"!==typeof f.start){c=f.start-m;m=!0;break a}m+=f.duration;if("undefined"!==typeof f.end){c=f.end-m;m=!0;break a}}c=-1;m=!1}return m?c:h.result+a},yi=function(c,f,a){if(!c)return 0;
"number"!==typeof a&&(a=0);if("undefined"===typeof f){if(c.totalDuration)return c.totalDuration;if(!c.endList)return q.Infinity}return xi(c,f,a)},xc=function(c,f,a){var h=0;f>a&&(a=[a,f],f=a[0],a=a[1]);if(0>f){for(;f<Math.min(0,a);f++)h+=c.targetDuration;f=0}for(;f<a;f++)h+=c.segments[f].duration;return h},zi=function(c){if(!c.segments.length)return 0;for(var f=c.segments.length-1,a=c.segments[f].duration||c.targetDuration,h=a+2*c.targetDuration;f--&&!(a+=c.segments[f].duration,a>=h););return Math.max(0,
f)},Ai=function(c,f,a){if(!c||!c.segments)return null;if(c.endList)return yi(c);if(null===f)return null;f=f||0;a=a?zi(c):c.segments.length;return xi(c,c.mediaSequence+a,f)},Bi=function(c,f){if(0===f-Math.floor(f))return f+.1*c;for(var a=f.toString().split(".")[1].length,h=1;h<=a;h++){var m=Math.pow(10,h),n=f*m;if(0===n-Math.floor(n)||h===a)return(n+c)/m}},Rl=Bi.bind(null,1),Sl=Bi.bind(null,-1),Ci=function(c){return c.excludeUntil&&c.excludeUntil>Date.now()},$e=function(c){return c.excludeUntil&&Infinity===
c.excludeUntil},nd=function(c){var f=Ci(c);return!c.disabled&&!f},Di=function(c,f){return f.attributes&&f.attributes[c]},af=function(c,f){if(1===c.playlists.length)return!0;var a=f.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===c.playlists.filter(function(c){return nd(c)?(c.attributes.BANDWIDTH||0)<a:!1}).length},sa={duration:yi,seekable:function(c,f){var a=f||0,h=Ai(c,f,!0);return null===h?wi():wi(a,h)},safeLiveIndex:zi,getMediaInfoForTime:function(c,f,a,h){var m,n=c.segments.length,p=f-h;if(0>
p){if(0<a)for(m=a-1;0<=m;m--){var u=c.segments[m];p+=Sl(u.duration);if(0<p)return{mediaIndex:m,startTime:h-xc(c,a,m)}}return{mediaIndex:0,startTime:f}}if(0>a){for(m=a;0>m;m++)if(p-=c.targetDuration,0>p)return{mediaIndex:0,startTime:f};a=0}for(m=a;m<n;m++)if(u=c.segments[m],p-=Rl(u.duration),0>p)return{mediaIndex:m,startTime:h+xc(c,a,m)};return{mediaIndex:n-1,startTime:f}},isEnabled:nd,isDisabled:function(c){return c.disabled},isBlacklisted:Ci,isIncompatible:$e,playlistEnd:Ai,isAes:function(c){for(var f=
0;f<c.segments.length;f++)if(c.segments[f].key)return!0;return!1},isFmp4:function(c){for(var f=0;f<c.segments.length;f++)if(c.segments[f].map)return!0;return!1},hasAttribute:Di,estimateSegmentRequestTime:function(c,f,a){var h=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;return Di("BANDWIDTH",a)?(c*a.attributes.BANDWIDTH-8*h)/f:NaN},isLowestEnabledRendition:af},Tl=r.xhr,Ul=r.mergeOptions,Ei=function(){return function h(f,a){f=Ul({timeout:45E3},f);var m=h.beforeRequest||r.Hls.xhr.beforeRequest;
m&&"function"===typeof m&&(m=m(f))&&(f=m);var n=Tl(f,function(f,h){var m=n.response;!f&&m&&(n.responseTime=Date.now(),n.roundTripTime=n.responseTime-n.requestTime,n.bytesReceived=m.byteLength||m.length,n.bandwidth||(n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8E3)));h.headers&&(n.responseHeaders=h.headers);f&&"ETIMEDOUT"===f.code&&(n.timedout=!0);f||n.aborted||200===h.statusCode||206===h.statusCode||0===h.statusCode||(f=Error("XHR Failed with a response of: "+(n&&(m||n.responseText))));
a(f,n)}),p=n.abort;n.abort=function(){n.aborted=!0;return p.apply(n,arguments)};n.uri=f.uri;n.requestTime=Date.now();return n}},Vl=function(c,f){var a=c.toString(16);return"00".substring(0,2-a.length)+a+(f%2?" ":"")},Wl=function(c){return 32<=c&&126>c?String.fromCharCode(c):"."},Fi=function(c){var f={};Object.keys(c).forEach(function(a){var h=c[a];ArrayBuffer.isView(h)?f[a]={bytes:h.buffer,byteOffset:h.byteOffset,byteLength:h.byteLength}:f[a]=h});return f},od=function(c){var f=c.byterange||{length:Infinity,
offset:0};return[f.length,f.offset,c.resolvedUri].join()},Gi=function(c){c=Array.prototype.slice.call(c);for(var f="",a,h,m=0;m<c.length/16;m++)a=c.slice(16*m,16*m+16).map(Vl).join(""),h=c.slice(16*m,16*m+16).map(Wl).join(""),f+=a+" "+h+"\n";return f},Xl=Object.freeze({createTransferableMessage:Fi,initSegmentId:od,hexDump:Gi,tagDump:function(c){return Gi(c.bytes)},textRanges:function(c){var f="",a;for(a=0;a<c.length;a++){var h=c;var m=a;h=h.start(m)+"-"+h.end(m);f+=h+" "}return f}}),Kb=1/30,ob=3*
Kb,Hi=function(c,f){var a=[],h;if(c&&c.length)for(h=0;h<c.length;h++)f(c.start(h),c.end(h))&&a.push([c.start(h),c.end(h)]);return r.createTimeRanges(a)},Ii=function(c,f){return Hi(c,function(a,c){return a-Kb<=f&&c+Kb>=f})},Ji=function(c,f){return Hi(c,function(a){return a-Kb>=f})},bf=function(c){var f=[];if(!c||!c.length)return"";for(var a=0;a<c.length;a++)f.push(c.start(a)+" => "+c.end(a));return f.join(", ")},Yl=function(c,f){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return((c.length?
c.end(c.length-1):0)-f)/a},Ki=function(c){for(var f=[],a=0;a<c.length;a++)f.push({start:c.start(a),end:c.end(a)});return f},Lb=function(c,f,a){var h;if(a&&a.cues)for(h=a.cues.length;h--;){var m=a.cues[h];m.startTime<=f&&m.endTime>=c&&a.removeCue(m)}},Zl=function(c){Object.defineProperties(c.frame,{id:{get:function(){r.log.warn("cue.frame.id is deprecated. Use cue.value.key instead.");return c.value.key}},value:{get:function(){r.log.warn("cue.frame.value is deprecated. Use cue.value.data instead.");
return c.value.data}},privateData:{get:function(){r.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead.");return c.value.data}}})},Li=function(c){return isNaN(c)||Infinity===Math.abs(c)?Number.MAX_VALUE:c},$l=function(c,f,a){var h=q.WebKitDataCue||q.VTTCue;f&&f.forEach(function(a){this.inbandTextTracks_[a.stream].addCue(new h(a.startTime+this.timestampOffset,a.endTime+this.timestampOffset,a.text))},c);if(a){var m=Li(c.mediaSource_.duration);a.forEach(function(a){var c=a.cueTime+
this.timestampOffset;a.frames.forEach(function(a){var f=new h(c,c,a.value||a.url||a.data||"");f.frame=a;f.value=a;Zl(f);this.metadataTrack_.addCue(f)},this)},c);if(c.metadataTrack_&&c.metadataTrack_.cues&&c.metadataTrack_.cues.length){c=c.metadataTrack_.cues;f=[];for(a=0;a<c.length;a++)c[a]&&f.push(c[a]);var n=f.reduce(function(a,c){var f=a[c.startTime]||[];f.push(c);a[c.startTime]=f;return a},{}),p=Object.keys(n).sort(function(a,c){return Number(a)-Number(c)});p.forEach(function(a,c){var f=Number(p[c+
1])||m;n[a].forEach(function(a){a.endTime=f})})}}};$jscomp.initSymbol();$jscomp.initSymbol();var pb="undefined"!==typeof window?window:{},Kd="undefined"===typeof Symbol?"__target":Symbol(),Dj=pb.BlobBuilder||pb.WebKitBlobBuilder||pb.MozBlobBuilder||pb.MSBlobBuilder,wb=pb.URL||pb.webkitURL||wb&&wb.msURL,vb=pb.Worker;if(vb){var Mi=Tf("self.onmessage = function () {}"),Ni=new Uint8Array(1);try{var cf=new vb(Mi);cf.postMessage(Ni,[Ni.buffer])}catch(c){vb=null}finally{wb.revokeObjectURL(Mi),cf&&cf.terminate()}}var bm=
new Sf("./transmuxer-worker.worker.js",function(c,f){var a=this;(function(){var c=Math.pow(2,32)-1,f,n,p,u,t,q,r,v,w,B,z,V,x,gd,y,C;(function(){var a;p={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if("undefined"!==typeof Uint8Array){for(a in p)p.hasOwnProperty(a)&&
(p[a]=[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]);u=new Uint8Array([105,115,111,109]);q=new Uint8Array([97,118,99,49]);t=new Uint8Array([0,0,0,1]);r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);v=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);w={video:r,audio:v};V=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);
z=new Uint8Array([0,0,0,0,0,0,0,0]);gd=x=new Uint8Array([0,0,0,0,0,0,0,0]);y=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);C=x;B=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})();var E=function(a){var c=[],f=0,h;for(h=1;h<arguments.length;h++)c.push(arguments[h]);for(h=c.length;h--;)f+=c[h].byteLength;var m=new Uint8Array(f+8);(new DataView(m.buffer,m.byteOffset,m.byteLength)).setUint32(0,m.byteLength);m.set(a,4);h=0;for(f=8;h<c.length;h++)m.set(c[h],f),f+=c[h].byteLength;return m};var D=function(){return E(p.dinf,
E(p.dref,V))};var F=function(a){return E(p.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,a.audioobjecttype<<3|a.samplingfrequencyindex>>>1,a.samplingfrequencyindex<<7|a.channelcount<<3,6,1,2]))};var G=function(){return E(p.ftyp,u,t,u,q)};var H=function(a){return E(p.hdlr,w[a])};var I=function(a){var c=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,a.duration>>>24&255,a.duration>>>16&255,a.duration>>>8&255,a.duration&255,85,196,0,0]);a.samplerate&&(c[12]=
a.samplerate>>>24&255,c[13]=a.samplerate>>>16&255,c[14]=a.samplerate>>>8&255,c[15]=a.samplerate&255);return E(p.mdhd,c)};var J=function(a){return E(p.mdia,I(a),H(a.type),P(a))};var M=function(a){return E(p.mfhd,new Uint8Array([0,0,0,0,(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255]))};var P=function(a){return E(p.minf,"video"===a.type?E(p.vmhd,B):E(p.smhd,z),D(),aa(a))};var R=function(a){for(var c=a.length,f=[];c--;)f[c]=ha(a[c]);return E.apply(null,[p.moov,U(4294967295)].concat(f).concat(S(a)))};
var S=function(a){for(var c=a.length,f=[];c--;)f[c]=ia(a[c]);return E.apply(null,[p.mvex].concat(f))};var U=function(a){a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return E(p.mvhd,a)};var Y=function(a){a=a.samples||[];var c=new Uint8Array(4+a.length),f;for(f=0;f<a.length;f++){var h=
a[f].flags;c[f+4]=h.dependsOn<<4|h.isDependedOn<<2|h.hasRedundancy}return E(p.sdtp,c)};var aa=function(a){return E(p.stbl,f(a),E(p.stts,C),E(p.stsc,gd),E(p.stsz,y),E(p.stco,x))};(function(){f=function(f){return E(p.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===f.type?a(f):c(f))};var a=function(a){var c=a.sps||[],f=a.pps||[],h=[],m=[],n;for(n=0;n<c.length;n++)h.push((c[n].byteLength&65280)>>>8),h.push(c[n].byteLength&255),h=h.concat(Array.prototype.slice.call(c[n]));for(n=0;n<f.length;n++)m.push((f[n].byteLength&
65280)>>>8),m.push(f[n].byteLength&255),m=m.concat(Array.prototype.slice.call(f[n]));return E(p.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(a.width&65280)>>8,a.width&255,(a.height&65280)>>8,a.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),E(p.avcC,new Uint8Array([1,a.profileIdc,a.profileCompatibility,a.levelIdc,255].concat([c.length]).concat(h).concat([f.length]).concat(m))),
E(p.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))};var c=function(a){return E(p.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(a.channelcount&65280)>>8,a.channelcount&255,(a.samplesize&65280)>>8,a.samplesize&255,0,0,0,0,(a.samplerate&65280)>>8,a.samplerate&255,0,0]),F(a))}})();var da=function(a){a=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(a.id&4278190080)>>24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,0,0,0,0,(a.duration&4278190080)>>24,(a.duration&16711680)>>16,(a.duration&
65280)>>8,a.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(a.width&65280)>>8,a.width&255,0,0,(a.height&65280)>>8,a.height&255,0,0]);return E(p.tkhd,a)};var ea=function(a){var f=E(p.tfhd,new Uint8Array([0,0,0,58,(a.id&4278190080)>>24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));var h=Math.floor(a.baseMediaDecodeTime/(c+1));var m=Math.floor(a.baseMediaDecodeTime%(c+1));h=E(p.tfdt,new Uint8Array([1,
0,0,0,h>>>24&255,h>>>16&255,h>>>8&255,h&255,m>>>24&255,m>>>16&255,m>>>8&255,m&255]));if("audio"===a.type)return a=n(a,92),E(p.traf,f,h,a);m=Y(a);a=n(a,m.length+92);return E(p.traf,f,h,a,m)};var ha=function(a){a.duration=a.duration||4294967295;return E(p.trak,da(a),J(a))};var ia=function(a){var c=new Uint8Array([0,0,0,0,(a.id&4278190080)>>24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);"video"!==a.type&&(c[c.length-1]=0);return E(p.trex,c)};(function(){var a=function(a,
c){var f=0,h=0,m=0,n=0;a.length&&(void 0!==a[0].duration&&(f=1),void 0!==a[0].size&&(h=2),void 0!==a[0].flags&&(m=4),void 0!==a[0].compositionTimeOffset&&(n=8));return[0,0,f|h|m|n,1,(a.length&4278190080)>>>24,(a.length&16711680)>>>16,(a.length&65280)>>>8,a.length&255,(c&4278190080)>>>24,(c&16711680)>>>16,(c&65280)>>>8,c&255]};var c=function(c,f){var h;var m=c.samples||[];f+=20+16*m.length;var n=a(m,f);for(h=0;h<m.length;h++){var K=m[h];n=n.concat([(K.duration&4278190080)>>>24,(K.duration&16711680)>>>
16,(K.duration&65280)>>>8,K.duration&255,(K.size&4278190080)>>>24,(K.size&16711680)>>>16,(K.size&65280)>>>8,K.size&255,K.flags.isLeading<<2|K.flags.dependsOn,K.flags.isDependedOn<<6|K.flags.hasRedundancy<<4|K.flags.paddingValue<<1|K.flags.isNonSyncSample,K.flags.degradationPriority&61440,K.flags.degradationPriority&15,(K.compositionTimeOffset&4278190080)>>>24,(K.compositionTimeOffset&16711680)>>>16,(K.compositionTimeOffset&65280)>>>8,K.compositionTimeOffset&255])}return E(p.trun,new Uint8Array(n))};
var f=function(c,f){var h;var m=c.samples||[];f+=20+8*m.length;var n=a(m,f);for(h=0;h<m.length;h++){var K=m[h];n=n.concat([(K.duration&4278190080)>>>24,(K.duration&16711680)>>>16,(K.duration&65280)>>>8,K.duration&255,(K.size&4278190080)>>>24,(K.size&16711680)>>>16,(K.size&65280)>>>8,K.size&255])}return E(p.trun,new Uint8Array(n))};n=function(a,h){return"audio"===a.type?f(a,h):c(a,h)}})();var W={ftyp:G,mdat:function(a){return E(p.mdat,a)},moof:function(a,c){for(var f=[],h=c.length;h--;)f[h]=ea(c[h]);
return E.apply(null,[p.moof,M(a)].concat(f))},moov:R,initSegment:function(a){var c=G();a=R(a);var f=new Uint8Array(c.byteLength+a.byteLength);f.set(c);f.set(a,c.byteLength);return f}},ma=function(){this.init=function(){var a={};this.on=function(c,f){a[c]||(a[c]=[]);a[c]=a[c].concat(f)};this.off=function(c,f){if(!a[c])return!1;var h=a[c].indexOf(f);a[c]=a[c].slice();a[c].splice(h,1);return-1<h};this.trigger=function(c){var f,h;if(f=a[c])if(2===arguments.length){var m=f.length;for(h=0;h<m;++h)f[h].call(this,
arguments[1])}else{var n=[];for(h=1;h<arguments.length;++h)n.push(arguments[h]);m=f.length;for(h=0;h<m;++h)f[h].apply(this,n)}};this.dispose=function(){a={}}}};ma.prototype.pipe=function(a){this.on("data",function(c){a.push(c)});this.on("done",function(c){a.flush(c)});return a};ma.prototype.push=function(a){this.trigger("data",a)};ma.prototype.flush=function(a){this.trigger("done",a)};var X={groupNalsIntoFrames:function(a){var c,f=[],h=[];for(c=f.byteLength=0;c<a.length;c++){var m=a[c];"access_unit_delimiter_rbsp"===
m.nalUnitType?(f.length&&(f.duration=m.dts-f.dts,h.push(f)),f=[m],f.byteLength=m.data.byteLength,f.pts=m.pts,f.dts=m.dts):("slice_layer_without_partitioning_rbsp_idr"===m.nalUnitType&&(f.keyFrame=!0),f.duration=m.dts-f.dts,f.byteLength+=m.data.byteLength,f.push(m))}h.length&&(!f.duration||0>=f.duration)&&(f.duration=h[h.length-1].duration);h.push(f);return h},groupFramesIntoGops:function(a){var c,f=[],h=[];f.byteLength=0;f.nalCount=0;f.duration=0;f.pts=a[0].pts;f.dts=a[0].dts;h.byteLength=0;h.nalCount=
0;h.duration=0;h.pts=a[0].pts;h.dts=a[0].dts;for(c=0;c<a.length;c++){var m=a[c];m.keyFrame?(f.length&&(h.push(f),h.byteLength+=f.byteLength,h.nalCount+=f.nalCount,h.duration+=f.duration),f=[m],f.nalCount=m.length,f.byteLength=m.byteLength,f.pts=m.pts,f.dts=m.dts,f.duration=m.duration):(f.duration+=m.duration,f.nalCount+=m.length,f.byteLength+=m.byteLength,f.push(m))}h.length&&0>=f.duration&&(f.duration=h[h.length-1].duration);h.byteLength+=f.byteLength;h.nalCount+=f.nalCount;h.duration+=f.duration;
h.push(f);return h},extendFirstKeyFrame:function(a){if(!a[0][0].keyFrame&&1<a.length){var c=a.shift();a.byteLength-=c.byteLength;a.nalCount-=c.nalCount;a[0][0].dts=c.dts;a[0][0].pts=c.pts;a[0][0].duration+=c.duration}return a},generateSampleTable:function(a,c){var f,h,m=c||0,n=[];for(f=0;f<a.length;f++){var p=a[f];for(h=0;h<p.length;h++){var u=p[h];var t={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};t.dataOffset=m;t.compositionTimeOffset=
u.pts-u.dts;t.duration=u.duration;t.size=4*u.length;t.size+=u.byteLength;u.keyFrame&&(t.flags.dependsOn=2,t.flags.isNonSyncSample=0);u=t;m+=u.size;n.push(u)}}return n},concatenateNalData:function(a){var c,f,h,m=0,n=new Uint8Array(a.byteLength+4*a.nalCount),p=new DataView(n.buffer);for(c=0;c<a.length;c++){var u=a[c];for(f=0;f<u.length;f++){var t=u[f];for(h=0;h<t.length;h++){var q=t[h];p.setUint32(m,q.data.byteLength);m+=4;n.set(q.data,m);m+=q.data.byteLength}}}return n}},O={clearDtsInfo:function(a){delete a.minSegmentDts;
delete a.maxSegmentDts;delete a.minSegmentPts;delete a.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(a,c){var f=a.minSegmentDts;c||(f-=a.timelineStartInfo.dts);var h=a.timelineStartInfo.baseMediaDecodeTime;h=Math.max(0,h+f);"audio"===a.type&&(f=a.samplerate/9E4,h=Math.floor(h*f));return h},collectDtsInfo:function(a,c){"number"===typeof c.pts&&(void 0===a.timelineStartInfo.pts&&(a.timelineStartInfo.pts=c.pts),a.minSegmentPts=void 0===a.minSegmentPts?c.pts:Math.min(a.minSegmentPts,c.pts),
a.maxSegmentPts=void 0===a.maxSegmentPts?c.pts:Math.max(a.maxSegmentPts,c.pts));"number"===typeof c.dts&&(void 0===a.timelineStartInfo.dts&&(a.timelineStartInfo.dts=c.dts),a.minSegmentDts=void 0===a.minSegmentDts?c.dts:Math.min(a.minSegmentDts,c.dts),a.maxSegmentDts=void 0===a.maxSegmentDts?c.dts:Math.max(a.maxSegmentDts,c.dts))}},ca={parseSei:function(a){for(var c=0,f={payloadType:-1,payloadSize:0},h=0,m=0;c<a.byteLength&&128!==a[c];){for(;255===a[c];)h+=255,c++;for(h+=a[c++];255===a[c];)m+=255,
c++;m+=a[c++];if(!f.payload&&4===h){f.payloadType=h;f.payloadSize=m;f.payload=a.subarray(c,c+m);break}c+=m;m=h=0}return f},parseUserData:function(a){return 181!==a.payload[0]||49!==(a.payload[1]<<8|a.payload[2])||"GA94"!==String.fromCharCode(a.payload[3],a.payload[4],a.payload[5],a.payload[6])||3!==a.payload[7]?null:a.payload.subarray(8,a.payload.length-1)},parseCaptionPackets:function(a,c){var f=[],h;if(!(c[0]&64))return f;var m=c[0]&31;for(h=0;h<m;h++){var n=3*h;var p={type:c[n+2]&3,pts:a};c[n+
2]&4&&(p.ccData=c[n+3]<<8|c[n+4],f.push(p))}return f},discardEmulationPreventionBytes:function(a){for(var c=a.byteLength,f=[],h=1,m;h<c-2;)0===a[h]&&0===a[h+1]&&3===a[h+2]?(f.push(h+2),h+=2):h++;if(0===f.length)return a;c-=f.length;m=new Uint8Array(c);var n=0;for(h=0;h<c;n++,h++)n===f[0]&&(n++,f.shift()),m[h]=a[n];return m},USER_DATA_REGISTERED_ITU_T_T35:4},ta=function am(){am.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new ba(0,0),new ba(0,1),new ba(1,0),new ba(1,1)];this.reset();
this.ccStreams_.forEach(function(a){a.on("data",this.trigger.bind(this,"data"));a.on("done",this.trigger.bind(this,"done"))},this)};ta.prototype=new ma;ta.prototype.push=function(a){if("sei_rbsp"===a.nalUnitType){var c=ca.parseSei(a.escapedRBSP);c.payloadType===ca.USER_DATA_REGISTERED_ITU_T_T35&&(c=ca.parseUserData(c))&&(a.dts<this.latestDts_?this.ignoreNextEqualDts_=!0:a.dts===this.latestDts_&&this.ignoreNextEqualDts_?(this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1)):(c=ca.parseCaptionPackets(a.pts,
c),this.captionPackets_=this.captionPackets_.concat(c),this.latestDts_!==a.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=a.dts))}};ta.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(a,c){a.presortIndex=c}),this.captionPackets_.sort(function(a,c){return a.pts===c.pts?a.presortIndex-c.presortIndex:a.pts-c.pts}),this.captionPackets_.forEach(function(a){2>a.type&&this.dispatchCea608Packet(a)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(a){a.flush()},
this)):this.ccStreams_.forEach(function(a){a.flush()},this)};ta.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=!1;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(a){a.reset()})};ta.prototype.dispatchCea608Packet=function(a){this.setsChannel1Active(a)?this.activeCea608Channel_[a.type]=0:this.setsChannel2Active(a)&&(this.activeCea608Channel_[a.type]=1);null!==this.activeCea608Channel_[a.type]&&this.ccStreams_[(a.type<<1)+this.activeCea608Channel_[a.type]].push(a)};
ta.prototype.setsChannel1Active=function(a){return 4096===(a.ccData&30720)};ta.prototype.setsChannel2Active=function(a){return 6144===(a.ccData&30720)};var na={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,
561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},fa=function(a){if(null===a)return"";a=na[a]||a;return String.fromCharCode(a)},qa=[4352,4384,4608,4640,5376,5408,5632,5664,
5888,5920,4096,4864,4896,5120,5152],Z=function(){for(var a=[],c=15;c--;)a.push("");return a},ba=function df(a,c){df.prototype.init.call(this);this.field_=a||0;this.dataChannel_=c||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(a){var c=a.ccData&32639;if(c===this.lastControlCode_)this.lastControlCode_=null;else{4096===(c&61440)?this.lastControlCode_=c:c!==this.PADDING_&&(this.lastControlCode_=null);var f=c>>>8;var h=c&255;c!==this.PADDING_&&
(c===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":c===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(a.pts),this.flushDisplayed(a.pts),h=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=h,this.startPts_=a.pts):c===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(a.pts)):c===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(a.pts)):c===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(a.pts)):c===this.CARRIAGE_RETURN_?(this.clearFormatting(a.pts),
this.flushDisplayed(a.pts),this.shiftRowsUp_(),this.startPts_=a.pts):c===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):c===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(a.pts),this.displayed_=Z()):c===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=Z():c===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(a.pts),this.displayed_=Z()),this.mode_=
"paintOn",this.startPts_=a.pts):this.isSpecialCharacter(f,h)?(c=fa((f&3)<<8|h),this[this.mode_](a.pts,c),this.column_++):this.isExtCharacter(f,h)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),c=fa((f&3)<<8|h),this[this.mode_](a.pts,c),this.column_++):this.isMidRowCode(f,h)?(this.clearFormatting(a.pts),this[this.mode_](a.pts," "),this.column_++,14===(h&14)&&this.addFormatting(a.pts,["i"]),
1===(h&1)&&this.addFormatting(a.pts,["u"])):this.isOffsetControlCode(f,h)?this.column_+=h&3:this.isPAC(f,h)?(f=qa.indexOf(c&7968),"rollUp"===this.mode_&&this.setRollUp(a.pts,f),f!==this.row_&&(this.clearFormatting(a.pts),this.row_=f),h&1&&-1===this.formatting_.indexOf("u")&&this.addFormatting(a.pts,["u"]),16===(c&16)&&(this.column_=4*((c&14)>>1)),this.isColorPAC(h)&&14===(h&14)&&this.addFormatting(a.pts,["i"])):this.isNormalChar(f)&&(0===h&&(h=null),c=fa(f),c+=fa(h),this[this.mode_](a.pts,c),this.column_+=
c.length))}}};ba.prototype=new ma;ba.prototype.flushDisplayed=function(a){var c=this.displayed_.map(function(a){return a.trim()}).join("\n").replace(/^\n+|\n+$/g,"");c.length&&this.trigger("data",{startPts:this.startPts_,endPts:a,text:c,stream:this.name_})};ba.prototype.reset=function(){this.mode_="popOn";this.startPts_=this.topRow_=0;this.displayed_=Z();this.nonDisplayed_=Z();this.lastControlCode_=null;this.column_=0;this.row_=14;this.rollUpRows_=2;this.formatting_=[]};ba.prototype.setConstants=
function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31);this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|
41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};ba.prototype.isSpecialCharacter=function(a,c){return a===this.EXT_&&48<=c&&63>=c};ba.prototype.isExtCharacter=function(a,c){return(a===this.EXT_+1||a===this.EXT_+2)&&32<=c&&63>=c};ba.prototype.isMidRowCode=function(a,c){return a===this.EXT_&&32<=c&&47>=c};ba.prototype.isOffsetControlCode=function(a,c){return a===this.OFFSET_&&33<=c&&35>=c};ba.prototype.isPAC=function(a,
c){return a>=this.BASE_&&a<this.BASE_+8&&64<=c&&127>=c};ba.prototype.isColorPAC=function(a){return 64<=a&&79>=a||96<=a&&127>=a};ba.prototype.isNormalChar=function(a){return 32<=a&&127>=a};ba.prototype.setRollUp=function(a,c){"rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(a),this.nonDisplayed_=Z(),this.displayed_=Z());if(void 0!==c&&c!==this.row_)for(var f=0;f<this.rollUpRows_;f++)this.displayed_[c-f]=this.displayed_[this.row_-f],this.displayed_[this.row_-f]="";void 0===
c&&(c=this.row_);this.topRow_=c-this.rollUpRows_+1};ba.prototype.addFormatting=function(a,c){this.formatting_=this.formatting_.concat(c);var f=c.reduce(function(a,c){return a+"<"+c+">"},"");this[this.mode_](a,f)};ba.prototype.clearFormatting=function(a){if(this.formatting_.length){var c=this.formatting_.reverse().reduce(function(a,c){return a+"</"+c+">"},"");this.formatting_=[];this[this.mode_](a,c)}};ba.prototype.popOn=function(a,c){this.nonDisplayed_[this.row_]+=c};ba.prototype.rollUp=function(a,
c){this.displayed_[this.row_]+=c};ba.prototype.shiftRowsUp_=function(){var a;for(a=0;a<this.topRow_;a++)this.displayed_[a]="";for(a=this.row_+1;15>a;a++)this.displayed_[a]="";for(a=this.topRow_;a<this.row_;a++)this.displayed_[a]=this.displayed_[a+1];this.displayed_[this.row_]=""};ba.prototype.paintOn=function(a,c){this.displayed_[this.row_]+=c};var ja=ba,Q={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},va=function(a,c){var f=1;for(a>c&&(f=-1);4294967296<Math.abs(c-a);)a+=8589934592*
f;return a},L=function df(a){var c,f;df.prototype.init.call(this);this.type_=a;this.push=function(a){a.type===this.type_&&(void 0===f&&(f=a.dts),a.dts=va(a.dts,f),a.pts=va(a.pts,f),c=a.dts,this.trigger("data",a))};this.flush=function(){f=c;this.trigger("done")};this.discontinuity=function(){c=f=void 0}};L.prototype=new ma;var ka=function(a,c,f){for(var h="";c<f;c++)h+="%"+("00"+a[c].toString(16)).slice(-2);return h},la=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},wa={TXXX:function(a){var c;
if(3===a.data[0]){for(c=1;c<a.data.length;c++)if(0===a.data[c]){a.description=decodeURIComponent(ka(a.data,1,c));a.value=decodeURIComponent(ka(a.data,c+1,a.data.length)).replace(/\0*$/,"");break}a.data=a.value}},WXXX:function(a){var c;if(3===a.data[0])for(c=1;c<a.data.length;c++)if(0===a.data[c]){a.description=decodeURIComponent(ka(a.data,1,c));a.url=decodeURIComponent(ka(a.data,c+1,a.data.length));break}},PRIV:function(a){var c;for(c=0;c<a.data.length;c++)if(0===a.data[c]){a.owner=unescape(ka(a.data,
0,c));break}a.privateData=a.data.subarray(c+1);a.data=a.privateData}};var pa=function(a){var c=!(!a||!a.debug);a=a&&a.descriptor;var f=0,h=[],m=0,n;pa.prototype.init.call(this);this.dispatchType=Q.METADATA_STREAM_TYPE.toString(16);if(a)for(n=0;n<a.length;n++)this.dispatchType+=("00"+a[n].toString(16)).slice(-2);this.push=function(a){var n;if("timed-metadata"===a.type)if(a.dataAlignmentIndicator&&(m=0,h.length=0),0===h.length&&(10>a.data.length||73!==a.data[0]||68!==a.data[1]||51!==a.data[2]))c&&console.log("Skipping unrecognized metadata packet");
else if(h.push(a),m+=a.data.byteLength,1===h.length&&(f=la(a.data.subarray(6,10)),f+=10),!(m<f)){a={data:new Uint8Array(f),frames:[],pts:h[0].pts,dts:h[0].dts};for(n=0;n<f;)a.data.set(h[0].data.subarray(0,f-n),n),n+=h[0].data.byteLength,m-=h[0].data.byteLength,h.shift();n=10;a.data[5]&64&&(n=n+4+la(a.data.subarray(10,14)),f-=la(a.data.subarray(16,20)));do{var p=la(a.data.subarray(n+4,n+8));if(1>p)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");var u=String.fromCharCode(a.data[n],
a.data[n+1],a.data[n+2],a.data[n+3]);u={id:u,data:a.data.subarray(n+10,n+p+10)};u.key=u.id;if(wa[u.id]&&(wa[u.id](u),"com.apple.streaming.transportStreamTimestamp"===u.owner)){var t=u.data,q=(t[3]&1)<<30|t[4]<<22|t[5]<<14|t[6]<<6|t[7]>>>2;q*=4;q+=t[7]&3;u.timeStamp=q;void 0===a.pts&&void 0===a.dts&&(a.pts=u.timeStamp,a.dts=u.timeStamp);this.trigger("timestamp",u)}a.frames.push(u);n+=10;n+=p}while(n<f);this.trigger("data",a)}}};pa.prototype=new ma;var sa=function(){var a=new Uint8Array(188),c=0;sa.prototype.init.call(this);
this.push=function(f){var h=0,m=188;if(c){var n=new Uint8Array(f.byteLength+c);n.set(a.subarray(0,c));n.set(f,c);c=0}else n=f;for(;m<n.byteLength;)71===n[h]&&71===n[m]?(this.trigger("data",n.subarray(h,m)),h+=188,m+=188):(h++,m++);h<n.byteLength&&(a.set(n.subarray(h),0),c=n.byteLength-h)};this.flush=function(){188===c&&71===a[0]&&(this.trigger("data",a),c=0);this.trigger("done")}};sa.prototype=new ma;var oa=function(){oa.prototype.init.call(this);var a=this;this.packetsWaitingForPmt=[];this.programMapTable=
void 0;var c=function(a,c){var m=0;c.payloadUnitStartIndicator&&(m+=a[m]+1);"pat"===c.type?f(a.subarray(m),c):h(a.subarray(m),c)};var f=function(c,f){f.section_number=c[7];f.last_section_number=c[8];a.pmtPid=(c[10]&31)<<8|c[11];f.pmtPid=a.pmtPid};var h=function(c,f){var h;if(c[5]&1){a.programMapTable={video:null,audio:null,"timed-metadata":{}};var m=3+((c[1]&15)<<8|c[2])-4;for(h=12+((c[10]&15)<<8|c[11]);h<m;){var n=c[h],p=(c[h+1]&31)<<8|c[h+2];n===Q.H264_STREAM_TYPE&&null===a.programMapTable.video?
a.programMapTable.video=p:n===Q.ADTS_STREAM_TYPE&&null===a.programMapTable.audio?a.programMapTable.audio=p:n===Q.METADATA_STREAM_TYPE&&(a.programMapTable["timed-metadata"][p]=n);h+=((c[h+3]&15)<<8|c[h+4])+5}f.programMapTable=a.programMapTable}};this.push=function(a){var f={},h=4;f.payloadUnitStartIndicator=!!(a[1]&64);f.pid=a[1]&31;f.pid<<=8;f.pid|=a[2];1<(a[3]&48)>>>4&&(h+=a[h]+1);if(0===f.pid)f.type="pat",c(a.subarray(h),f),this.trigger("data",f);else if(f.pid===this.pmtPid)for(f.type="pmt",c(a.subarray(h),
f),this.trigger("data",f);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([a,h,f]):this.processPes_(a,h,f)};this.processPes_=function(a,c,f){f.streamType=f.pid===this.programMapTable.video?Q.H264_STREAM_TYPE:f.pid===this.programMapTable.audio?Q.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][f.pid];f.type="pes";f.data=a.subarray(c);this.trigger("data",f)}};oa.prototype=new ma;
oa.STREAM_TYPES={h264:27,adts:15};var xa=function(){var a=this,c={data:[],size:0},f={data:[],size:0},h={data:[],size:0},m=function(c,f,h){var m=new Uint8Array(c.size),n={type:f},p,u=0;if(c.data.length&&!(9>c.size)){n.trackId=c.data[0].pid;for(p=0;p<c.data.length;p++){var t=c.data[p];m.set(t.data,u);u+=t.data.byteLength}n.packetLength=6+(m[4]<<8|m[5]);n.dataAlignmentIndicator=0!==(m[6]&4);p=m[7];p&192&&(n.pts=(m[9]&14)<<27|(m[10]&255)<<20|(m[11]&254)<<12|(m[12]&255)<<5|(m[13]&254)>>>3,n.pts*=4,n.pts+=
(m[13]&6)>>>1,n.dts=n.pts,p&64&&(n.dts=(m[14]&14)<<27|(m[15]&255)<<20|(m[16]&254)<<12|(m[17]&255)<<5|(m[18]&254)>>>3,n.dts*=4,n.dts+=(m[18]&6)>>>1));n.data=m.subarray(9+m[8]);f="video"===f||n.packetLength<=c.size;if(h||f)c.size=0,c.data.length=0;f&&a.trigger("data",n)}};xa.prototype.init.call(this);this.push=function(n){({pat:function(){},pes:function(){switch(n.streamType){case Q.H264_STREAM_TYPE:case Q.H264_STREAM_TYPE:var a=c;var p="video";break;case Q.ADTS_STREAM_TYPE:a=f;p="audio";break;case Q.METADATA_STREAM_TYPE:a=
h;p="timed-metadata";break;default:return}n.payloadUnitStartIndicator&&m(a,p,!0);a.data.push(n);a.size+=n.data.byteLength},pmt:function(){var c={type:"metadata",tracks:[]},f=n.programMapTable;null!==f.video&&c.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+f.video,codec:"avc",type:"video"});null!==f.audio&&c.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+f.audio,codec:"adts",type:"audio"});a.trigger("data",c)}})[n.type]()};this.flush=function(){m(c,"video");m(f,"audio");m(h,
"timed-metadata");this.trigger("done")}};xa.prototype=new ma;var T={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:sa,TransportParseStream:oa,ElementaryStream:xa,TimestampRolloverStream:L,CaptionStream:ta,Cea608Stream:ja,MetadataStream:pa},ra;for(ra in Q)Q.hasOwnProperty(ra)&&(T[ra]=Q[ra]);var Aa=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350];var ua=function(){var a;ua.prototype.init.call(this);this.push=function(c){var f=0,h=0;if("audio"===c.type){if(a){var m=a;a=new Uint8Array(m.byteLength+
c.data.byteLength);a.set(m);a.set(c.data,m.byteLength)}else a=c.data;for(;f+5<a.length;)if(255!==a[f]||240!==(a[f+1]&246))f++;else{m=2*(~a[f+1]&1);var n=(a[f+3]&3)<<11|a[f+4]<<3|(a[f+5]&224)>>5;var p=1024*((a[f+6]&3)+1);var u=9E4*p/Aa[(a[f+2]&60)>>>2];n=f+n;if(a.byteLength<n)break;this.trigger("data",{pts:c.pts+h*u,dts:c.dts+h*u,sampleCount:p,audioobjecttype:(a[f+2]>>>6&3)+1,channelcount:(a[f+2]&1)<<2|(a[f+3]&192)>>>6,samplerate:Aa[(a[f+2]&60)>>>2],samplingfrequencyindex:(a[f+2]&60)>>>2,samplesize:16,
data:a.subarray(f+7+m,n)});if(a.byteLength===n){a=void 0;break}h++;a=a.subarray(n)}}};this.flush=function(){this.trigger("done")}};ua.prototype=new ma;var Ea=function(a){var c=a.byteLength,f=0,h=0;this.length=function(){return 8*c};this.bitsAvailable=function(){return 8*c+h};this.loadWord=function(){var m=a.byteLength-c,n=new Uint8Array(4),p=Math.min(4,c);if(0===p)throw Error("no bytes available");n.set(a.subarray(m,m+p));f=(new DataView(n.buffer)).getUint32(0);h=8*p;c-=p};this.skipBits=function(a){if(!(h>
a)){a-=h;var m=Math.floor(a/8);a-=8*m;c-=m;this.loadWord()}f<<=a;h-=a};this.readBits=function(a){var m=Math.min(h,a),n=f>>>32-m;h-=m;0<h?f<<=m:0<c&&this.loadWord();m=a-m;return 0<m?n<<m|this.readBits(m):n};this.skipLeadingZeros=function(){var a;for(a=0;a<h;++a)if(0!==(f&2147483648>>>a))return f<<=a,h-=a,a;this.loadWord();return a+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};
this.readUnsignedExpGolomb=function(){var a=this.skipLeadingZeros();return this.readBits(a+1)-1};this.readExpGolomb=function(){var a=this.readUnsignedExpGolomb();return 1&a?1+a>>>1:-1*(a>>>1)};this.readBoolean=function(){return 1===this.readBits(1)};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};var ya=function(){var a=0,c,f;ya.prototype.init.call(this);this.push=function(h){if(f){var m=new Uint8Array(f.byteLength+h.data.byteLength);m.set(f);m.set(h.data,f.byteLength);
f=m}else f=h.data;for(;a<f.byteLength-3;a++)if(1===f[a+2]){c=a+5;break}for(;c<f.byteLength;)switch(f[c]){case 0:if(0!==f[c-1]){c+=2;break}else if(0!==f[c-2]){c++;break}a+3!==c-2&&this.trigger("data",f.subarray(a+3,c-2));do c++;while(1!==f[c]&&c<f.length);a=c-2;c+=3;break;case 1:if(0!==f[c-1]||0!==f[c-2]){c+=3;break}this.trigger("data",f.subarray(a+3,c-2));a=c-2;c+=3;break;default:c+=3}f=f.subarray(a);c-=a;a=0};this.flush=function(){f&&3<f.byteLength&&this.trigger("data",f.subarray(a+3));f=null;a=
0;this.trigger("done")}};ya.prototype=new ma;var Ha={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0};var Ba=function(){var a=new ya,c,f,h;Ba.prototype.init.call(this);var m=this;this.push=function(m){"video"===m.type&&(c=m.trackId,f=m.pts,h=m.dts,a.push(m))};a.on("data",function(a){var n={trackId:c,pts:f,dts:h,data:a};switch(a[0]&31){case 5:n.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:n.nalUnitType="sei_rbsp";n.escapedRBSP=p(a.subarray(1));
break;case 7:n.nalUnitType="seq_parameter_set_rbsp";n.escapedRBSP=p(a.subarray(1));n.config=u(n.escapedRBSP);break;case 8:n.nalUnitType="pic_parameter_set_rbsp";break;case 9:n.nalUnitType="access_unit_delimiter_rbsp"}m.trigger("data",n)});a.on("done",function(){m.trigger("done")});this.flush=function(){a.flush()};var n=function(a,c){var f=8,h=8,m;for(m=0;m<a;m++)0!==h&&(h=c.readExpGolomb(),h=(f+h+256)%256),f=0===h?f:h};var p=function(a){for(var c=a.byteLength,f=[],h=1,m;h<c-2;)0===a[h]&&0===a[h+1]&&
3===a[h+2]?(f.push(h+2),h+=2):h++;if(0===f.length)return a;c-=f.length;m=new Uint8Array(c);var n=0;for(h=0;h<c;n++,h++)n===f[0]&&(n++,f.shift()),m[h]=a[n];return m};var u=function(a){var c=0,f=0,h=0,m=0,p=1;a=new Ea(a);var u=a.readUnsignedByte();var t=a.readUnsignedByte();var q=a.readUnsignedByte();a.skipUnsignedExpGolomb();if(Ha[u]){var r=a.readUnsignedExpGolomb();3===r&&a.skipBits(1);a.skipUnsignedExpGolomb();a.skipUnsignedExpGolomb();a.skipBits(1);if(a.readBoolean()){var K=3!==r?8:12;for(r=0;r<
K;r++)a.readBoolean()&&(6>r?n(16,a):n(64,a))}}a.skipUnsignedExpGolomb();r=a.readUnsignedExpGolomb();if(0===r)a.readUnsignedExpGolomb();else if(1===r)for(a.skipBits(1),a.skipExpGolomb(),a.skipExpGolomb(),K=a.readUnsignedExpGolomb(),r=0;r<K;r++)a.skipExpGolomb();a.skipUnsignedExpGolomb();a.skipBits(1);r=a.readUnsignedExpGolomb();K=a.readUnsignedExpGolomb();var z=a.readBits(1);0===z&&a.skipBits(1);a.skipBits(1);a.readBoolean()&&(c=a.readUnsignedExpGolomb(),f=a.readUnsignedExpGolomb(),h=a.readUnsignedExpGolomb(),
m=a.readUnsignedExpGolomb());if(a.readBoolean()&&a.readBoolean()){var v=a.readUnsignedByte();switch(v){case 1:var A=[1,1];break;case 2:A=[12,11];break;case 3:A=[10,11];break;case 4:A=[16,11];break;case 5:A=[40,33];break;case 6:A=[24,11];break;case 7:A=[20,11];break;case 8:A=[32,11];break;case 9:A=[80,33];break;case 10:A=[18,11];break;case 11:A=[15,11];break;case 12:A=[64,33];break;case 13:A=[160,99];break;case 14:A=[4,3];break;case 15:A=[3,2];break;case 16:A=[2,1];break;case 255:A=[a.readUnsignedByte()<<
8|a.readUnsignedByte(),a.readUnsignedByte()<<8|a.readUnsignedByte()]}A&&(p=A[0]/A[1])}return{profileIdc:u,levelIdc:q,profileCompatibility:t,width:Math.ceil((16*(r+1)-2*c-2*f)*p),height:(2-z)*(K+1)*16-2*h-2*m}}};Ba.prototype=new ma;var Ca=function(){var a=new Uint8Array,c=0;Ca.prototype.init.call(this);this.setTimestamp=function(a){c=a};this.parseId3TagSize=function(a,c){var f=a[c+6]<<21|a[c+7]<<14|a[c+8]<<7|a[c+9];return(a[c+5]&16)>>4?f+20:f+10};this.parseAdtsSize=function(a,c){return a[c+3]&6144|
a[c+4]<<3|(a[c+5]&224)>>5};this.push=function(f){var h=0;if(a.length){var m=a.length;a=new Uint8Array(f.byteLength+m);a.set(a.subarray(0,m));a.set(f,m)}else a=f;for(;3<=a.length-h;)if(73===a[h]&&68===a[h+1]&&51===a[h+2]){if(10>a.length-h)break;f=this.parseId3TagSize(a,h);if(f>a.length)break;m={type:"timed-metadata",data:a.subarray(h,h+f)};this.trigger("data",m);h+=f}else if(a[h]&1&&240===(a[h+1]&240)){if(7>a.length-h)break;f=this.parseAdtsSize(a,h);if(f>a.length)break;m={type:"audio",data:a.subarray(h,
h+f),pts:c,dts:c};this.trigger("data",m);h+=f}else h++;a=0<a.length-h?a.subarray(h):new Uint8Array}};Ca.prototype=new ma;ta=[33,16,5,32,164,27];ja=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252];L=function(a){for(var c=[];a--;)c.push(0);return c};var Qa=function(a){return Object.keys(a).reduce(function(c,f){c[f]=new Uint8Array(a[f].reduce(function(a,c){return a.concat(c)},[]));return c},{})}({96E3:[ta,[227,64],L(154),[56]],88200:[ta,[231],L(170),[56]],64E3:[ta,[248,192],L(240),[56]],48E3:[ta,[255,192],
L(268),[55,148,128],L(54),[112]],44100:[ta,[255,192],L(268),[55,163,128],L(84),[112]],32E3:[ta,[255,192],L(268),[55,234],L(226),[112]],24E3:[ta,[255,192],L(268),[55,255,128],L(268),[111,112],L(126),[224]],16E3:[ta,[255,192],L(268),[55,255,128],L(268),[111,255],L(269),[223,108],L(195),[1,192]],12E3:[ja,L(268),[3,127,248],L(268),[6,255,240],L(268),[13,255,224],L(268),[27,253,128],L(259),[56]],11025:[ja,L(268),[3,127,248],L(268),[6,255,240],L(268),[13,255,224],L(268),[27,255,192],L(268),[55,175,128],
L(108),[112]],8E3:[ja,L(268),[3,121,16],L(47),[7]]});var Fa=function(a){return 9E4*a};var Ga=function(a,c){return a*c};var Ja=function(a){return a/9E4};var La=function(a,c){return a/c};var Ma={secondsToVideoTs:Fa,secondsToAudioTs:Ga,videoTsToSeconds:Ja,audioTsToSeconds:La,audioTsToVideoTs:function(a,c){return Fa(La(a,c))},videoTsToAudioTs:function(a,c){return Ga(Ja(a),c)}},Na=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Oa=["width","height","profileIdc","levelIdc",
"profileCompatibility"];var Sa=function(a){return 73===a[0]&&68===a[1]&&51===a[2]?!0:!1};var Pa=function(a,c){var f;if(a.length!==c.length)return!1;for(f=0;f<a.length;f++)if(a[f]!==c[f])return!1;return!0};var Ta=function(a){var c,f=0;for(c=0;c<a.length;c++){var h=a[c];f+=h.data.byteLength}return f};var Da=function(a,c){var f=[],h=0,m=0,n=0,p=Infinity;c=c||{};Da.prototype.init.call(this);this.push=function(c){O.collectDtsInfo(a,c);a&&Na.forEach(function(f){a[f]=c[f]});f.push(c)};this.setEarliestDts=
function(c){m=c-a.timelineStartInfo.baseMediaDecodeTime};this.setVideoBaseMediaDecodeTime=function(a){p=a};this.setAudioAppendStart=function(a){n=a};this.flush=function(){if(0!==f.length){var m=this.trimAdtsFramesByEarliestDts_(f);a.baseMediaDecodeTime=O.calculateTrackBaseMediaDecodeTime(a,c.keepOriginalTimestamps);this.prefixWithSilence_(a,m);a.samples=this.generateSampleTable_(m);var n=W.mdat(this.concatenateFrameData_(m));f=[];m=W.moof(h,[a]);var p=new Uint8Array(m.byteLength+n.byteLength);h++;
p.set(m);p.set(n,m.byteLength);O.clearDtsInfo(a);this.trigger("data",{track:a,boxes:p})}this.trigger("done","AudioSegmentStream")};this.prefixWithSilence_=function(a,c){var f,h=f=0;if(c.length){var m=Ma.audioTsToVideoTs(a.baseMediaDecodeTime,a.samplerate);var u=Math.ceil(9E4/(a.samplerate/1024));n&&p&&(f=m-Math.max(n,p),f=Math.floor(f/u),h=f*u);if(!(1>f||45E3<h)){u=Qa[a.samplerate];u||(u=c[0].data);for(m=0;m<f;m++)c.splice(m,0,{data:u});a.baseMediaDecodeTime-=Math.floor(Ma.videoTsToAudioTs(h,a.samplerate))}}};
this.trimAdtsFramesByEarliestDts_=function(c){if(a.minSegmentDts>=m)return c;a.minSegmentDts=Infinity;return c.filter(function(c){return c.dts>=m?(a.minSegmentDts=Math.min(a.minSegmentDts,c.dts),a.minSegmentPts=a.minSegmentDts,!0):!1})};this.generateSampleTable_=function(a){var c,f=[];for(c=0;c<a.length;c++){var h=a[c];f.push({size:h.data.byteLength,duration:1024})}return f};this.concatenateFrameData_=function(a){var c,f=0,h=new Uint8Array(Ta(a));for(c=0;c<a.length;c++){var m=a[c];h.set(m.data,f);
f+=m.data.byteLength}return h}};Da.prototype=new ma;var Ia=function(a,c){var f=0,h=[],m=[],n,p;c=c||{};Ia.prototype.init.call(this);delete a.minPTS;this.gopCache_=[];this.push=function(c){O.collectDtsInfo(a,c);"seq_parameter_set_rbsp"!==c.nalUnitType||n||(n=c.config,a.sps=[c.data],Oa.forEach(function(c){a[c]=n[c]},this));"pic_parameter_set_rbsp"!==c.nalUnitType||p||(p=c.data,a.pps=[c.data]);h.push(c)};this.flush=function(){for(var n,p,u;h.length&&"access_unit_delimiter_rbsp"!==h[0].nalUnitType;)h.shift();
if(0!==h.length){n=X.groupNalsIntoFrames(h);n=X.groupFramesIntoGops(n);n[0][0].keyFrame||((p=this.getGopForFusion_(h[0],a))?(n.unshift(p),n.byteLength+=p.byteLength,n.nalCount+=p.nalCount,n.pts=p.pts,n.dts=p.dts,n.duration+=p.duration):n=X.extendFirstKeyFrame(n));if(m.length){p=c.alignGopsAtEnd?this.alignGopsAtEnd_(n):this.alignGopsAtStart_(n);if(!p){this.gopCache_.unshift({gop:n.pop(),pps:a.pps,sps:a.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);h=[];this.resetStream_();this.trigger("done",
"VideoSegmentStream");return}O.clearDtsInfo(a);n=p}O.collectDtsInfo(a,n);a.samples=X.generateSampleTable(n);p=W.mdat(X.concatenateNalData(n));a.baseMediaDecodeTime=O.calculateTrackBaseMediaDecodeTime(a,c.keepOriginalTimestamps);this.trigger("processedGopsInfo",n.map(function(a){return{pts:a.pts,dts:a.dts,byteLength:a.byteLength}}));this.gopCache_.unshift({gop:n.pop(),pps:a.pps,sps:a.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);h=[];this.trigger("baseMediaDecodeTime",a.baseMediaDecodeTime);
this.trigger("timelineStartInfo",a.timelineStartInfo);n=W.moof(f,[a]);u=new Uint8Array(n.byteLength+p.byteLength);f++;u.set(n);u.set(p,n.byteLength);this.trigger("data",{track:a,boxes:u})}this.resetStream_();this.trigger("done","VideoSegmentStream")};this.resetStream_=function(){O.clearDtsInfo(a);p=n=void 0};this.getGopForFusion_=function(c){var f=Infinity,h;for(h=0;h<this.gopCache_.length;h++){var m=this.gopCache_[h];var n=m.gop;if(a.pps&&Pa(a.pps[0],m.pps[0])&&a.sps&&Pa(a.sps[0],m.sps[0])&&!(n.dts<
a.timelineStartInfo.dts)&&(n=c.dts-n.dts-n.duration,-1E4<=n&&45E3>=n&&(!p||f>n))){var p=m;f=n}}return p?p.gop:null};this.alignGopsAtStart_=function(a){var c,f;var h=a.byteLength;var n=a.nalCount;var p=a.duration;for(c=f=0;c<m.length&&f<a.length;){var u=m[c];var t=a[f];if(u.pts===t.pts)break;t.pts>u.pts?c++:(f++,h-=t.byteLength,n-=t.nalCount,p-=t.duration)}if(0===f)return a;if(f===a.length)return null;a=a.slice(f);a.byteLength=h;a.duration=p;a.nalCount=n;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsAtEnd_=
function(a){var c;var f=m.length-1;var h=a.length-1;var n=null;for(c=!1;0<=f&&0<=h;){var p=m[f];var u=a[h];if(p.pts===u.pts){c=!0;break}p.pts>u.pts?f--:(f===m.length-1&&(n=h),h--)}if(!c&&null===n)return null;f=c?h:n;if(0===f)return a;a=a.slice(f);f=a.reduce(function(a,c){a.byteLength+=c.byteLength;a.duration+=c.duration;a.nalCount+=c.nalCount;return a},{byteLength:0,duration:0,nalCount:0});a.byteLength=f.byteLength;a.duration=f.duration;a.nalCount=f.nalCount;a.pts=a[0].pts;a.dts=a[0].dts;return a};
this.alignGopsWith=function(a){m=a}};Ia.prototype=new ma;var za=function(a,c){this.numberOfTracks=0;this.metadataStream=c;this.remuxTracks="undefined"!==typeof a.remux?!!a.remux:!0;this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.emittedTracks=this.pendingBytes=0;za.prototype.init.call(this);this.push=function(a){if(a.text)return this.pendingCaptions.push(a);if(a.frames)return this.pendingMetadata.push(a);this.pendingTracks.push(a.track);
this.pendingBoxes.push(a.boxes);this.pendingBytes+=a.boxes.byteLength;"video"===a.track.type&&(this.videoTrack=a.track);"audio"===a.track.type&&(this.audioTrack=a.track)}};za.prototype=new ma;za.prototype.flush=function(a){var c=0,f={captions:[],captionStreams:{},metadata:[],info:{}},h=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==a&&"AudioSegmentStream"!==a||this.remuxTracks)return;if(0===this.pendingTracks.length){this.emittedTracks++;this.emittedTracks>=this.numberOfTracks&&
(this.trigger("done"),this.emittedTracks=0);return}}this.videoTrack?(h=this.videoTrack.timelineStartInfo.pts,Oa.forEach(function(a){f.info[a]=this.videoTrack[a]},this)):this.audioTrack&&(h=this.audioTrack.timelineStartInfo.pts,Na.forEach(function(a){f.info[a]=this.audioTrack[a]},this));f.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined";this.emittedTracks+=this.pendingTracks.length;a=W.initSegment(this.pendingTracks);f.initSegment=new Uint8Array(a.byteLength);f.initSegment.set(a);
f.data=new Uint8Array(this.pendingBytes);for(a=0;a<this.pendingBoxes.length;a++)f.data.set(this.pendingBoxes[a],c),c+=this.pendingBoxes[a].byteLength;for(a=0;a<this.pendingCaptions.length;a++)c=this.pendingCaptions[a],c.startTime=c.startPts-h,c.startTime/=9E4,c.endTime=c.endPts-h,c.endTime/=9E4,f.captionStreams[c.stream]=!0,f.captions.push(c);for(a=0;a<this.pendingMetadata.length;a++)c=this.pendingMetadata[a],c.cueTime=c.pts-h,c.cueTime/=9E4,f.metadata.push(c);f.metadata.dispatchType=this.metadataStream.dispatchType;
this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingBytes=this.pendingCaptions.length=0;this.pendingMetadata.length=0;this.trigger("data",f);this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)};var Ka=function(a){var c=this,f=!0,h,m;Ka.prototype.init.call(this);a=a||{};this.baseMediaDecodeTime=a.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var f={};this.transmuxPipeline_=f;f.type="aac";f.metadataStream=
new T.MetadataStream;f.aacStream=new Ca;f.audioTimestampRolloverStream=new T.TimestampRolloverStream("audio");f.timedMetadataTimestampRolloverStream=new T.TimestampRolloverStream("timed-metadata");f.adtsStream=new ua;f.coalesceStream=new za(a,f.metadataStream);f.headOfPipeline=f.aacStream;f.aacStream.pipe(f.audioTimestampRolloverStream).pipe(f.adtsStream);f.aacStream.pipe(f.timedMetadataTimestampRolloverStream).pipe(f.metadataStream).pipe(f.coalesceStream);f.metadataStream.on("timestamp",function(a){f.aacStream.setTimestamp(a.timeStamp)});
f.aacStream.on("data",function(h){"timed-metadata"!==h.type||f.audioSegmentStream||(m=m||{timelineStartInfo:{baseMediaDecodeTime:c.baseMediaDecodeTime},codec:"adts",type:"audio"},f.coalesceStream.numberOfTracks++,f.audioSegmentStream=new Da(m,a),f.adtsStream.pipe(f.audioSegmentStream).pipe(f.coalesceStream))});f.coalesceStream.on("data",this.trigger.bind(this,"data"));f.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var f={};this.transmuxPipeline_=f;f.type=
"ts";f.metadataStream=new T.MetadataStream;f.packetStream=new T.TransportPacketStream;f.parseStream=new T.TransportParseStream;f.elementaryStream=new T.ElementaryStream;f.videoTimestampRolloverStream=new T.TimestampRolloverStream("video");f.audioTimestampRolloverStream=new T.TimestampRolloverStream("audio");f.timedMetadataTimestampRolloverStream=new T.TimestampRolloverStream("timed-metadata");f.adtsStream=new ua;f.h264Stream=new Ba;f.captionStream=new T.CaptionStream;f.coalesceStream=new za(a,f.metadataStream);
f.headOfPipeline=f.packetStream;f.packetStream.pipe(f.parseStream).pipe(f.elementaryStream);f.elementaryStream.pipe(f.videoTimestampRolloverStream).pipe(f.h264Stream);f.elementaryStream.pipe(f.audioTimestampRolloverStream).pipe(f.adtsStream);f.elementaryStream.pipe(f.timedMetadataTimestampRolloverStream).pipe(f.metadataStream).pipe(f.coalesceStream);f.h264Stream.pipe(f.captionStream).pipe(f.coalesceStream);f.elementaryStream.on("data",function(n){var p;if("metadata"===n.type){for(p=n.tracks.length;p--;)h||
"video"!==n.tracks[p].type?m||"audio"!==n.tracks[p].type||(m=n.tracks[p],m.timelineStartInfo.baseMediaDecodeTime=c.baseMediaDecodeTime):(h=n.tracks[p],h.timelineStartInfo.baseMediaDecodeTime=c.baseMediaDecodeTime);h&&!f.videoSegmentStream&&(f.coalesceStream.numberOfTracks++,f.videoSegmentStream=new Ia(h,a),f.videoSegmentStream.on("timelineStartInfo",function(a){m&&(m.timelineStartInfo=a,f.audioSegmentStream.setEarliestDts(a.dts))}),f.videoSegmentStream.on("processedGopsInfo",c.trigger.bind(c,"gopInfo")),
f.videoSegmentStream.on("baseMediaDecodeTime",function(a){m&&f.audioSegmentStream.setVideoBaseMediaDecodeTime(a)}),f.h264Stream.pipe(f.videoSegmentStream).pipe(f.coalesceStream));m&&!f.audioSegmentStream&&(f.coalesceStream.numberOfTracks++,f.audioSegmentStream=new Da(m,a),f.adtsStream.pipe(f.audioSegmentStream).pipe(f.coalesceStream))}});f.coalesceStream.on("data",this.trigger.bind(this,"data"));f.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(a){var c=
this.transmuxPipeline_;this.baseMediaDecodeTime=a;m&&(m.timelineStartInfo.dts=void 0,m.timelineStartInfo.pts=void 0,O.clearDtsInfo(m),m.timelineStartInfo.baseMediaDecodeTime=a,c.audioTimestampRolloverStream&&c.audioTimestampRolloverStream.discontinuity());h&&(c.videoSegmentStream&&(c.videoSegmentStream.gopCache_=[],c.videoTimestampRolloverStream.discontinuity()),h.timelineStartInfo.dts=void 0,h.timelineStartInfo.pts=void 0,O.clearDtsInfo(h),c.captionStream.reset(),h.timelineStartInfo.baseMediaDecodeTime=
a);c.timedMetadataTimestampRolloverStream&&c.timedMetadataTimestampRolloverStream.discontinuity()};this.setAudioAppendStart=function(a){m&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(a)};this.alignGopsWith=function(a){h&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(a)};this.push=function(a){if(f){var c=Sa(a);c&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():c||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline();
f=!1}this.transmuxPipeline_.headOfPipeline.push(a)};this.flush=function(){f=!0;this.transmuxPipeline_.headOfPipeline.flush()};this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}};Ka.prototype=new ma;var Ua=function(){function a(a,c){for(var f=0;f<c.length;f++){var h=c[f];h.enumerable=h.enumerable||!1;h.configurable=!0;"value"in h&&(h.writable=!0);Object.defineProperty(a,h.key,h)}}return function(c,f,h){f&&a(c.prototype,f);h&&a(c,h);return c}}(),
Va=function(a,c){c.on("data",function(c){var f=c.initSegment;c.initSegment={data:f.buffer,byteOffset:f.byteOffset,byteLength:f.byteLength};f=c.data;c.data=f.buffer;a.postMessage({action:"data",segment:c,byteOffset:f.byteOffset,byteLength:f.byteLength},[c.data])});if(c.captionStream)c.captionStream.on("data",function(c){a.postMessage({action:"caption",data:c})});c.on("done",function(c){a.postMessage({action:"done"})});c.on("gopInfo",function(c){a.postMessage({action:"gopInfo",gopInfo:c})})},Ra=function(){function a(c,
f){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.options=f||{};this.self=c;this.init()}Ua(a,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose();this.transmuxer=new Ka(this.options);Va(this.self,this.transmuxer)}},{key:"push",value:function(a){a=new Uint8Array(a.data,a.byteOffset,a.byteLength);this.transmuxer.push(a)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(a){this.transmuxer.setBaseMediaDecodeTime(Math.round(9E4*
(a.timestampOffset||0)))}},{key:"setAudioAppendStart",value:function(a){this.transmuxer.setAudioAppendStart(Math.ceil(9E4*a.appendStart))}},{key:"flush",value:function(a){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(a){this.transmuxer.alignGopsWith(a.gopsToAlignWith.slice())}}]);return a}();return new function(a){a.onmessage=function(c){if("init"===c.data.action&&c.data.options)this.messageHandlers=new Ra(a,c.data.options);
else if(this.messageHandlers||(this.messageHandlers=new Ra(a)),c.data&&c.data.action&&"init"!==c.data.action&&this.messageHandlers[c.data.action])this.messageHandlers[c.data.action](c.data)}}(a)})()}),Oi={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},Pi=function(c){return c.map(function(c){return c.replace(/avc1\.(\d+)\.(\d+)/i,function(a,c,f){a=("00"+Number(c).toString(16)).slice(-2);f=("00"+Number(f).toString(16)).slice(-2);return"avc1."+a+"00"+f})})},yc=function(){var c=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",f={codecCount:0},a;f.codecCount=c.split(",").length;f.codecCount=f.codecCount||2;if(a=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(c))f.videoCodec=a[2],f.videoObjectTypeIndicator=a[3];f.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(c);f.audioProfile=f.audioProfile&&f.audioProfile[2];return f},cm=function(c){return c.replace(/avc1\.(\d+)\.(\d+)/i,function(c){return Pi([c])[0]})},ef=function(c,f,a){return c+"/"+f+'; codecs="'+a.filter(function(a){return!!a}).join(", ")+
'"'},dm=function(c,f){if(!c.mediaGroups.AUDIO||!f)return null;var a=c.mediaGroups.AUDIO[f];if(!a)return null;for(var h in a){var m=a[h];if(m["default"]&&m.playlists)return yc(m.playlists[0].attributes.CODECS).audioProfile}return null},em=function(c){var f={type:"",parameters:{}};c=c.trim().split(";");f.type=c.shift().trim();c.forEach(function(a){var c=a.trim().split("=");1<c.length&&(a=c[0].replace(/"/g,"").trim(),c=c[1].replace(/"/g,"").trim(),f.parameters[a]=c)});return f},fm=function(c,f,a){if("undefined"===
typeof f||null===f||!c.length)return[];f=Math.ceil(9E4*(f-a+3));for(a=0;a<c.length&&!(c[a].pts>f);a++);return c.slice(a)},gm=function(c,f,a){var h=null,m=null,n=0,p=[],u=[];if(!c&&!f)return r.createTimeRange();if(!c)return f.buffered;if(!f||a)return c.buffered;if(0===c.buffered.length&&0===f.buffered.length)return r.createTimeRange();c=c.buffered;f=f.buffered;for(a=c.length;a--;)p.push({time:c.start(a),type:"start"}),p.push({time:c.end(a),type:"end"});for(a=f.length;a--;)p.push({time:f.start(a),type:"start"}),
p.push({time:f.end(a),type:"end"});p.sort(function(a,c){return a.time-c.time});for(a=0;a<p.length;a++)"start"===p[a].type?(n++,2===n&&(h=p[a].time)):"end"===p[a].type&&(n--,1===n&&(m=p[a].time)),null!==h&&null!==m&&(u.push([h,m]),m=h=null);return r.createTimeRanges(u)},hm=function(c,f){var a=c.addSourceBuffer(f),h=Object.create(null);h.updating=!1;h.realBuffer_=a;var m=function(c){"function"===typeof a[c]?h[c]=function(){return a[c].apply(a,arguments)}:"undefined"===typeof h[c]&&Object.defineProperty(h,
c,{get:function(){return a[c]},set:function(f){return a[c]=f}})},n;for(n in a)m(n);return h},im=function(c){function f(a,c){Aa(this,f);var h=La(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,r.EventTarget));h.timestampOffset_=0;h.pendingBuffers_=[];h.bufferUpdating_=!1;h.mediaSource_=a;h.codecs_=c;h.audioCodec_=null;h.videoCodec_=null;h.audioDisabled_=!1;h.appendAudioInitSegment_=!0;h.gopBuffer_=[];h.timeMapping_=0;h.safeAppend_=11<=r.browser.IE_VERSION;var n={remux:!1,alignGopsAtEnd:h.safeAppend_};
h.codecs_.forEach(function(a){/mp4a\.\d+.\d+/i.test(a)?h.audioCodec_=a:/avc1\.[\da-f]+/i.test(a)&&(h.videoCodec_=a)});h.transmuxer_=new bm;h.transmuxer_.postMessage({action:"init",options:n});h.transmuxer_.onmessage=function(a){if("data"===a.data.action)return h.data_(a);if("done"===a.data.action)return h.done_(a);if("gopInfo"===a.data.action)return h.appendGopInfo_(a)};Object.defineProperty(h,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(a){"number"===typeof a&&0<=
a&&(this.timestampOffset_=a,this.appendAudioInitSegment_=!0,this.timeMapping_=this.gopBuffer_.length=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:a}))}});Object.defineProperty(h,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(a){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=a);this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=a)}});Object.defineProperty(h,"updating",{get:function(){return!!(this.bufferUpdating_||
!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}});Object.defineProperty(h,"buffered",{get:function(){return gm(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}});return h}Ka(f,c);Ba(f,[{key:"data_",value:function(a){var c=a.data.segment;c.data=new Uint8Array(c.data,a.data.byteOffset,a.data.byteLength);c.initSegment=new Uint8Array(c.initSegment.data,c.initSegment.byteOffset,c.initSegment.byteLength);a=this.mediaSource_.player_;
if(c.captions&&c.captions.length){this.inbandTextTracks_||(this.inbandTextTracks_={});for(var f in c.captionStreams)if(!this.inbandTextTracks_[f]){a.tech_.trigger({type:"usage",name:"hls-608"});var n=a.textTracks().getTrackById(f);this.inbandTextTracks_[f]=n?n:a.addRemoteTextTrack({kind:"captions",id:f,label:f},!1).track}}c.metadata&&c.metadata.length&&!this.metadataTrack_&&(this.metadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,this.metadataTrack_.inBandMetadataTrackDispatchType=
c.metadata.dispatchType);this.pendingBuffers_.push(c)}},{key:"done_",value:function(a){"closed"===this.mediaSource_.readyState?this.pendingBuffers_.length=0:this.processPendingSegments_()}},{key:"createRealSourceBuffers_",value:function(){var a=this,c=["audio","video"];c.forEach(function(f){if(a[f+"Codec_"]&&!a[f+"Buffer_"]){var h=null;a.mediaSource_[f+"Buffer_"]?(h=a.mediaSource_[f+"Buffer_"],h.updating=!1):(h=hm(a.mediaSource_.nativeMediaSource_,f+'/mp4;codecs="'+a[f+"Codec_"]+'"'),a.mediaSource_[f+
"Buffer_"]=h);a[f+"Buffer_"]=h;["update","updatestart","updateend"].forEach(function(m){h.addEventListener(m,function(){if("audio"!==f||!a.audioDisabled_)if("updateend"===m&&(a[f+"Buffer_"].updating=!1),c.every(function(c){return"audio"===c&&a.audioDisabled_?!0:f!==c&&a[c+"Buffer_"]&&a[c+"Buffer_"].updating?!1:!0}))return a.trigger(m)})})}})}},{key:"appendBuffer",value:function(a){this.bufferUpdating_=!0;if(this.audioBuffer_&&this.audioBuffer_.buffered.length){var c=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",
appendStart:c.end(c.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:fm(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)});this.transmuxer_.postMessage({action:"push",data:a.buffer,byteOffset:a.byteOffset,byteLength:a.byteLength},[a.buffer]);this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(a){var c=this.gopBuffer_;a=a.data.gopInfo;if(a.length)if(this.safeAppend_)c=
a.slice();else{var f=a[0].pts,n=0;for(n;n<c.length&&!(c[n].pts>=f);n++);c=c.slice(0,n).concat(a)}this.gopBuffer_=c}},{key:"remove",value:function(a,c){if(this.videoBuffer_){this.videoBuffer_.updating=!0;this.videoBuffer_.remove(a,c);var f=this.gopBuffer_,h=this.timeMapping_,p=Math.ceil(9E4*(a-h)),u=Math.ceil(9E4*(c-h));h=f.slice();for(var t=f.length;t--&&!(f[t].pts<=u););if(-1!==t){for(u=t+1;u--&&!(f[u].pts<=p););u=Math.max(u,0);h.splice(u,t-u+1)}this.gopBuffer_=h}!this.audioDisabled_&&this.audioBuffer_&&
(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(a,c));Lb(a,c,this.metadataTrack_);if(this.inbandTextTracks_)for(var q in this.inbandTextTracks_)Lb(a,c,this.inbandTextTracks_[q])}},{key:"processPendingSegments_",value:function(){var a={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};a=this.pendingBuffers_.reduce(function(a,c){var f=c.type,h=c.data,m=c.initSegment;a[f].segments.push(h);a[f].bytes+=h.byteLength;a[f].initSegment=m;c.captions&&(a.captions=a.captions.concat(c.captions));
c.info&&(a[f].info=c.info);c.metadata&&(a.metadata=a.metadata.concat(c.metadata));return a},a);this.videoBuffer_||this.audioBuffer_||(0===a.video.bytes&&(this.videoCodec_=null),0===a.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_());a.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:a.audio.info});a.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:a.video.info});this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(a.audio.segments.unshift(a.audio.initSegment),
a.audio.bytes+=a.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var c=!1;this.videoBuffer_&&a.video.bytes?(a.video.segments.unshift(a.video.initSegment),a.video.bytes+=a.video.initSegment.byteLength,this.concatAndAppendSegments_(a.video,this.videoBuffer_),$l(this,a.captions,a.metadata)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(c=!0);!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(a.audio,this.audioBuffer_);this.pendingBuffers_.length=0;c&&
this.trigger("updateend");this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(a,c){var f=0,h=void 0;if(a.bytes){h=new Uint8Array(a.bytes);a.segments.forEach(function(a){h.set(a,f);f+=a.byteLength});try{c.updating=!0,c.appendBuffer(h)}catch(p){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:p.message,originalError:p})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort();!this.audioDisabled_&&this.audioBuffer_&&
this.audioBuffer_.abort();this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"});this.pendingBuffers_.length=0;this.bufferUpdating_=!1}}]);return f}(r.EventTarget),ff=function(c){function f(){Aa(this,f);var a=La(this,(f.__proto__||Object.getPrototypeOf(f)).call(this)),c=void 0;a.nativeMediaSource_=new q.MediaSource;for(c in a.nativeMediaSource_)c in f.prototype||"function"!==typeof a.nativeMediaSource_[c]||(a[c]=a.nativeMediaSource_[c].bind(a.nativeMediaSource_));a.duration_=NaN;Object.defineProperty(a,
"duration",{get:function(){return Infinity===this.duration_?this.duration_:this.nativeMediaSource_.duration},set:function(a){this.duration_=a;Infinity!==a&&(this.nativeMediaSource_.duration=a)}});Object.defineProperty(a,"seekable",{get:function(){return Infinity===this.duration_?r.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}});Object.defineProperty(a,"readyState",{get:function(){return this.nativeMediaSource_.readyState}});Object.defineProperty(a,"activeSourceBuffers",
{get:function(){return this.activeSourceBuffers_}});a.sourceBuffers=[];a.activeSourceBuffers_=[];a.updateActiveSourceBuffers_=function(){a.activeSourceBuffers_.length=0;if(1===a.sourceBuffers.length){var c=a.sourceBuffers[0];c.appendAudioInitSegment_=!0;c.audioDisabled_=!c.audioCodec_;a.activeSourceBuffers_.push(c)}else{var f=!1,h=!0;for(c=0;c<a.player_.audioTracks().length;c++){var u=a.player_.audioTracks()[c];if(u.enabled&&"main"!==u.kind){f=!0;h=!1;break}}a.sourceBuffers.forEach(function(c,m){c.appendAudioInitSegment_=
!0;if(c.videoCodec_&&c.audioCodec_)c.audioDisabled_=f;else if(c.videoCodec_&&!c.audioCodec_)c.audioDisabled_=!0,h=!1;else if(!c.videoCodec_&&c.audioCodec_&&(c.audioDisabled_=m?h:!h,c.audioDisabled_))return;a.activeSourceBuffers_.push(c)})}};a.onPlayerMediachange_=function(){a.sourceBuffers.forEach(function(a){a.appendAudioInitSegment_=!0})};a.onHlsReset_=function(){a.sourceBuffers.forEach(function(a){a.transmuxer_&&a.transmuxer_.postMessage({action:"resetCaptions"})})};a.onHlsSegmentTimeMapping_=
function(c){a.sourceBuffers.forEach(function(a){return a.timeMapping_=c.mapping})};["sourceopen","sourceclose","sourceended"].forEach(function(a){this.nativeMediaSource_.addEventListener(a,this.trigger.bind(this))},a);a.on("sourceopen",function(c){if(c=x.querySelector('[src="'+a.url_+'"]'))a.player_=r(c.parentNode),a.player_.tech_.on("hls-reset",a.onHlsReset_),a.player_.tech_.on("hls-segment-time-mapping",a.onHlsSegmentTimeMapping_),a.player_.audioTracks&&a.player_.audioTracks()&&(a.player_.audioTracks().on("change",
a.updateActiveSourceBuffers_),a.player_.audioTracks().on("addtrack",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("removetrack",a.updateActiveSourceBuffers_)),a.player_.on("mediachange",a.onPlayerMediachange_)});a.on("sourceended",function(c){c=Li(a.duration);for(var f=0;f<a.sourceBuffers.length;f++){var h=a.sourceBuffers[f];(h=h.metadataTrack_&&h.metadataTrack_.cues)&&h.length&&(h[h.length-1].endTime=c)}});a.on("sourceclose",function(a){this.sourceBuffers.forEach(function(a){a.transmuxer_&&
a.transmuxer_.terminate()});this.sourceBuffers.length=0;this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&(this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",
this.onHlsSegmentTimeMapping_)))});return a}Ka(f,c);Ba(f,[{key:"addSeekableRange_",value:function(a,c){if(Infinity!==this.duration){var f=Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity");f.name="InvalidStateError";f.code=11;throw f;}if(c>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))this.nativeMediaSource_.duration=c}},{key:"addSourceBuffer",value:function(a){var c=void 0;c=em(a);/^(video|audio)\/mp2t$/i.test(c.type)?(a=[],c.parameters&&
c.parameters.codecs&&(a=c.parameters.codecs.split(","),a=Pi(a),a=a.filter(function(a){return/mp4a\.\d+.\d+/i.test(a)||/avc1\.[\da-f]+/i.test(a)})),0===a.length&&(a=["avc1.4d400d","mp4a.40.2"]),c=new im(this,a),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),c.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)):c=this.nativeMediaSource_.addSourceBuffer(a);this.sourceBuffers.push(c);return c}}]);return f}(r.EventTarget),Qi=0;r.mediaSources={};var Ri=
function(c,f){var a=r.mediaSources[c];if(a)a.trigger({type:"sourceopen",swfId:f});else throw Error("Media Source not found (Video.js)");},gf=function(){return!!q.MediaSource&&!!q.MediaSource.isTypeSupported&&q.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},zc=function(){this.MediaSource={open:Ri,supportsNativeMediaSources:gf};if(gf())return new ff;throw Error("Cannot use create a virtual MediaSource for this video");};zc.open=Ri;zc.supportsNativeMediaSources=gf;var Si={createObjectURL:function(c){if(c instanceof
ff){var f=q.URL.createObjectURL(c.nativeMediaSource_);return c.url_=f}if(!(c instanceof ff))return f=q.URL.createObjectURL(c),c.url_=f;f="blob:vjs-media-source/"+Qi;Qi++;r.mediaSources[f]=c;return f}};r.MediaSource=zc;r.URL=Si;var jm=r.mergeOptions,Ti=function(c,f){for(var a=jm(c,{duration:f.duration,minimumUpdatePeriod:f.minimumUpdatePeriod}),h=0;h<f.playlists.length;h++){var m=Ze(a,f.playlists[h]);m&&(a=m)}Ye(f,function(c,f,h,m){if(c.playlists&&c.playlists.length){var n=c.playlists[0].uri;if(c=
Ze(a,c.playlists[0]))a=c,a.mediaGroups[f][h][m].playlists[0]=a.playlists[n]}});return a},hf=function(c){function f(a,c,m,n){Aa(this,f);var h=La(this,(f.__proto__||Object.getPrototypeOf(f)).call(this));h.hls_=c;h.withCredentials=m;if(!a)throw Error("A non-empty playlist URL or playlist is required");h.on("minimumUpdatePeriod",function(){h.refreshXml_()});h.on("mediaupdatetimeout",function(){h.refreshMedia_()});if("string"===typeof a)return h.srcUrl=a,h.state="HAVE_NOTHING",La(h);h.masterPlaylistLoader_=
n;h.state="HAVE_METADATA";h.started=!0;h.media(a);q.setTimeout(function(){h.trigger("loadedmetadata")},0);return h}Ka(f,c);Ba(f,[{key:"dispose",value:function(){this.stopRequest();q.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var a=this.request;this.request=null;a.onreadystatechange=null;a.abort()}}},{key:"media",value:function(a){if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);var c=
this.state;if("string"===typeof a){if(!this.master.playlists[a])throw Error("Unknown playlist URI: "+a);a=this.master.playlists[a]}var f=!this.media_||a.uri!==this.media_.uri;this.state="HAVE_METADATA";f&&(this.media_&&this.trigger("mediachanging"),this.media_=a,this.refreshMedia_(),"HAVE_MASTER"!==c&&this.trigger("mediachange"))}},{key:"pause",value:function(){this.stopRequest();"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function(){this.started?this.trigger("loadedplaylist"):
this.start()}},{key:"parseMasterXml",value:function(){var a=al(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_});a.uri=this.srcUrl;for(var c=0;c<a.playlists.length;c++){var f="placeholder-uri-"+c;a.playlists[c].uri=f;a.playlists[f]=a.playlists[c]}Ye(a,function(c,f,h,m){c.playlists&&c.playlists.length&&(f="placeholder-uri-"+f+"-"+h+"-"+m,c.playlists[0].uri=f,a.playlists[f]=c.playlists[0])});ti(a);ui(a);return a}},{key:"start",value:function(){var a=this;this.started=!0;this.request=
this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(c,f){if(a.request){a.request=null;if(c)return a.error={status:f.status,message:"DASH playlist request error at URL: "+a.srcUrl,responseText:f.responseText,code:2},"HAVE_NOTHING"===a.state&&(a.started=!1),a.trigger("error");a.masterXml_=f.responseText;a.masterLoaded_=f.responseHeaders&&f.responseHeaders.date?Date.parse(f.responseHeaders.date):Date.now();a.syncClientServerClock_(a.onClientServerClockSync_.bind(a))}})}},{key:"syncClientServerClock_",
value:function(a){var c=this,f=$k(rh(this.masterXml_));if(null===f)return this.clientOffset_=this.masterLoaded_-Date.now(),a();if("DIRECT"===f.method)return this.clientOffset_=f.value-Date.now(),a();this.request=this.hls_.xhr({uri:za(this.srcUrl,f.value),method:f.method,withCredentials:this.withCredentials},function(h,m){if(c.request){if(h)return c.clientOffset_=c.masterLoaded_-Date.now(),a();var n="HEAD"===f.method?m.responseHeaders&&m.responseHeaders.date?Date.parse(m.responseHeaders.date):c.masterLoaded_:
Date.parse(m.responseText);c.clientOffset_=n-Date.now();a()}})}},{key:"onClientServerClockSync_",value:function(){var a=this;this.master=this.parseMasterXml();this.state="HAVE_MASTER";this.trigger("loadedplaylist");this.media_||this.media(this.master.playlists[0]);q.setTimeout(function(){a.trigger("loadedmetadata")},0);this.master.minimumUpdatePeriod&&q.setTimeout(function(){a.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod)}},{key:"refreshXml_",value:function(){var a=this;this.request=
this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(c,f){if(a.request){a.request=null;if(c)return a.error={status:f.status,message:"DASH playlist request error at URL: "+a.srcUrl,responseText:f.responseText,code:2},"HAVE_NOTHING"===a.state&&(a.started=!1),a.trigger("error");a.masterXml_=f.responseText;var h=a.parseMasterXml();a.master=Ti(a.master,h);q.setTimeout(function(){a.trigger("minimumUpdatePeriod")},a.master.minimumUpdatePeriod)}})}},{key:"refreshMedia_",value:function(){var a=
this,c=void 0,f=void 0;this.masterPlaylistLoader_?(c=this.masterPlaylistLoader_.master,f=this.masterPlaylistLoader_.parseMasterXml()):(c=this.master,f=this.parseMasterXml());(c=Ti(c,f))?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=c:this.master=c,this.media_=c.playlists[this.media_.uri]):this.trigger("playlistunchanged");this.media().endList||(this.mediaUpdateTimeout=q.setTimeout(function(){a.trigger("mediaupdatetimeout")},vi(this.media(),!!c)));this.trigger("loadedplaylist")}}]);
return f}(r.EventTarget),Ac=function(c){return r.log.debug?r.log.debug.bind(r,"VHS:",c+" >"):function(){}},km=function(){function c(f,a,h,m){Aa(this,c);this.callbacks_=[];this.pendingCallback_=null;this.timestampOffset_=0;this.mediaSource=f;this.processedAppend_=!1;this.type_=h;this.mimeType_=a;this.logger_=Ac("SourceUpdater["+h+"]["+a+"]");"closed"===f.readyState?f.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,a,m)):this.createSourceBuffer_(a,m)}Ba(c,[{key:"createSourceBuffer_",
value:function(c,a){var f=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(c);this.logger_("created SourceBuffer");if(a&&(a.trigger("sourcebufferadded"),2>this.mediaSource.sourceBuffers.length)){a.on("sourcebufferadded",function(){f.start_()});return}this.start_()}},{key:"start_",value:function(){var c=this;this.started_=!0;this.onUpdateendCallback_=function(){var a=c.pendingCallback_;c.pendingCallback_=null;c.logger_("buffered ["+bf(c.buffered())+"]");a&&a();c.runCallback_()};this.sourceBuffer_.addEventListener("updateend",
this.onUpdateendCallback_);this.runCallback_()}},{key:"abort",value:function(c){var a=this;this.processedAppend_&&this.queueCallback_(function(){a.sourceBuffer_.abort()},c)}},{key:"appendBuffer",value:function(c,a){var f=this;this.processedAppend_=!0;this.queueCallback_(function(){f.sourceBuffer_.appendBuffer(c)},a)}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:r.createTimeRanges()}},{key:"remove",value:function(c,a){var f=this,m=2<arguments.length&&void 0!==
arguments[2]?arguments[2]:Yb;this.processedAppend_&&this.queueCallback_(function(){f.logger_("remove ["+c+" => "+a+"]");f.sourceBuffer_.remove(c,a)},m)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_}},{key:"timestampOffset",value:function(c){var a=this;"undefined"!==typeof c&&(this.queueCallback_(function(){a.sourceBuffer_.timestampOffset=c}),this.timestampOffset_=c);return this.timestampOffset_}},{key:"queueCallback_",value:function(c,
a){this.callbacks_.push([c.bind(this),a]);this.runCallback_()}},{key:"runCallback_",value:function(){if(!this.updating()&&this.callbacks_.length&&this.started_){var c=this.callbacks_.shift();this.pendingCallback_=c[1];c[0]()}}},{key:"dispose",value:function(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_);this.sourceBuffer_&&"open"===this.mediaSource.readyState&&this.sourceBuffer_.abort()}}]);return c}(),Ca={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,
BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},Ui=function(c){var f={};c.byterange&&(c=c.byterange,f.Range="bytes="+c.offset+"-"+(c.offset+c.length-1));return f},Vi=function(c){c.forEach(function(c){c.abort()})},lm=function(c){var f=c.target;f=Date.now()-f.requestTime;f={bandwidth:Infinity,bytesReceived:0,roundTripTime:f||0};f.bytesReceived=c.loaded;f.bandwidth=Math.floor(f.bytesReceived/f.roundTripTime*8E3);return f},jf=function(c,f){return f.timedout?
{status:f.status,message:"HLS request timed-out at URL: "+f.uri,code:-101,xhr:f}:f.aborted?{status:f.status,message:"HLS request aborted at URL: "+f.uri,code:-102,xhr:f}:c?{status:f.status,message:"HLS request errored at URL: "+f.uri,code:2,xhr:f}:null},mm=function(c,f){return function(a,h){var m=h.response,n=jf(a,h);if(n)return f(n,c);if(16!==m.byteLength)return f({status:h.status,message:"Invalid HLS key at URL: "+h.uri,code:2,xhr:h},c);m=new DataView(m);c.key.bytes=new Uint32Array([m.getUint32(0),
m.getUint32(4),m.getUint32(8),m.getUint32(12)]);return f(null,c)}},nm=function(c,f,a){return function(h,m){var n=m.response,p=jf(h,m);if(p)return a(p,c);if(0===n.byteLength)return a({status:m.status,message:"Empty HLS segment content at URL: "+m.uri,code:2,xhr:m},c);c.map.bytes=new Uint8Array(m.response);f.isInitialized()||f.init();c.map.timescales=Fa.timescale(c.map.bytes);c.map.videoTrackIds=Fa.videoTrackIds(c.map.bytes);return a(null,c)}},om=function(c,f,a){return function(h,m){var n=m.response,
p=jf(h,m);if(p)return a(p,c);if(0===n.byteLength)return a({status:m.status,message:"Empty HLS segment content at URL: "+m.uri,code:2,xhr:m},c);c.stats={bandwidth:m.bandwidth,bytesReceived:m.bytesReceived||0,roundTripTime:m.roundTripTime||0};c.key?c.encryptedBytes=new Uint8Array(m.response):c.bytes=new Uint8Array(m.response);c.map&&c.map.bytes&&(f.isInitialized()||f.init(),(n=f.parse(c.bytes,c.map.videoTrackIds,c.map.timescales))&&n.captions&&(c.captionStreams=n.captionStreams,c.fmp4Captions=n.captions));
return a(null,c)}},pm=function(c,f,a){c.addEventListener("message",function n(m){if(m.data.source===f.requestId)return c.removeEventListener("message",n),m=m.data.decrypted,f.bytes=new Uint8Array(m.bytes,m.byteOffset,m.byteLength),a(null,f)});c.postMessage(Fi({source:f.requestId,encrypted:f.encryptedBytes,key:f.key.bytes,iv:f.key.iv}),[f.encryptedBytes.buffer,f.key.bytes.buffer])},qm=function(c){return c.reduce(function(c,a){return a.code>c.code?a:c})},rm=function(c,f,a){var h=[],m=0;return function(n,
p){n&&(Vi(c),h.push(n));m+=1;if(m===c.length){p.endOfAllRequests=Date.now();if(0<h.length){var u=qm(h);return a(u,p)}return p.encryptedBytes?pm(f,p,a):a(null,p)}}},sm=function(c,f){return function(a){c.stats=r.mergeOptions(c.stats,lm(a));!c.stats.firstBytesReceivedAt&&c.stats.bytesReceived&&(c.stats.firstBytesReceivedAt=Date.now());return f(a,c)}},tm=function(c,f,a,h,m,n,p){var u=[];a=rm(u,a,p);if(m.key){p=r.mergeOptions(f,{uri:m.key.resolvedUri,responseType:"arraybuffer"});var t=mm(m,a);p=c(p,t);
u.push(p)}m.map&&!m.map.bytes&&(p=r.mergeOptions(f,{uri:m.map.resolvedUri,responseType:"arraybuffer",headers:Ui(m.map)}),t=nm(m,h,a),p=c(p,t),u.push(p));f=r.mergeOptions(f,{uri:m.resolvedUri,responseType:"arraybuffer",headers:Ui(m)});h=om(m,h,a);c=c(f,h);c.addEventListener("progress",sm(m,n));u.push(c);return function(){return Vi(u)}},Wi=function(c,f){var a;return c?(a=q.getComputedStyle(c))?a[f]:"":""},Bc=function(c,f){var a=c.slice();c.sort(function(c,m){var h=f(c,m);return 0===h?a.indexOf(c)-a.indexOf(m):
h})},kf=function(c,f){var a=void 0,h=void 0;c.attributes.BANDWIDTH&&(a=c.attributes.BANDWIDTH);a=a||q.Number.MAX_VALUE;f.attributes.BANDWIDTH&&(h=f.attributes.BANDWIDTH);h=h||q.Number.MAX_VALUE;return a-h},um=function(c,f,a,h){c=c.playlists.map(function(a){var c=a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width;var f=a.attributes.RESOLUTION&&a.attributes.RESOLUTION.height;var h=(h=a.attributes.BANDWIDTH)||q.Number.MAX_VALUE;return{bandwidth:h,width:c,height:f,playlist:a}});Bc(c,function(a,c){return a.bandwidth-
c.bandwidth});c=c.filter(function(a){return!sa.isIncompatible(a.playlist)});var m=c.filter(function(a){return sa.isEnabled(a.playlist)});m.length||(m=c.filter(function(a){return!sa.isDisabled(a.playlist)}));var n=m.filter(function(a){return a.bandwidth*Ca.BANDWIDTH_VARIANCE<f}),p=n[n.length-1],u=n.filter(function(a){return a.bandwidth===p.bandwidth})[0];n=n.filter(function(a){return a.width&&a.height});Bc(n,function(a,c){return a.width-c.width});var t=n.filter(function(c){return c.width===a&&c.height===
h});p=t[t.length-1];t=t.filter(function(a){return a.bandwidth===p.bandwidth})[0];var r=void 0,A=void 0;A=void 0;t||(r=n.filter(function(c){return c.width>a||c.height>h}),A=r.filter(function(a){return a.width===r[0].width&&a.height===r[0].height}),p=A[A.length-1],A=A.filter(function(a){return a.bandwidth===p.bandwidth})[0]);return(c=A||t||u||m[0]||c[0])?c.playlist:null},vm=function(c){var f=c.currentTime,a=c.bandwidth,h=c.duration,m=c.segmentDuration,n=c.timeUntilRebuffer,p=c.currentTimeline,u=c.syncController;
c=c.master.playlists.filter(function(a){return!sa.isIncompatible(a)});var t=c.filter(sa.isEnabled);t.length||(t=c.filter(function(a){return!sa.isDisabled(a)}));c=t.filter(sa.hasAttribute.bind(null,"BANDWIDTH")).map(function(c){var t=u.getSyncPoint(c,h,p,f)?1:2;t=sa.estimateSegmentRequestTime(m,a,c)*t-n;return{playlist:c,rebufferingImpact:t}});t=c.filter(function(a){return 0>=a.rebufferingImpact});Bc(t,function(a,c){return kf(c.playlist,a.playlist)});if(t.length)return t[0];Bc(c,function(a,c){return a.rebufferingImpact-
c.rebufferingImpact});return c[0]||null},wm=function(c){var f=c.inbandTextTracks,a=c.captionArray,h=c.timestampOffset;if(a){var m=window.WebKitDataCue||window.VTTCue;a.forEach(function(a){var c=a.stream,n=a.startTime,t=a.endTime;f[c]&&(n+=h,t+=h,f[c].addCue(new m(n,t,a.text)))})}},Xi=function(c,f,a){if(!c||!f)return!1;a=a===c.segments.length;return c.endList&&"open"===f.readyState&&a},xm=function(c,f,a){return"main"===c&&f&&a?a.containsAudio||a.containsVideo?f.containsVideo&&!a.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":
!f.containsVideo&&a.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null},ym=function(c){var f=c.segment,a=c.playlist,h=a.mediaSequence,m=a.segments;return["appending ["+c.mediaIndex+"] of ["+h+", "+(h+(void 0===m?[]:m).length)+"] from playlist ["+a.id+"]","["+f.start+" => "+f.end+"] in timeline ["+
c.timeline+"]"].join(" ")},lf=function(c){function f(a){Aa(this,f);var c=La(this,(f.__proto__||Object.getPrototypeOf(f)).call(this));if(!a)throw new TypeError("Initialization settings are required");if("function"!==typeof a.currentTime)throw new TypeError("No currentTime getter specified");if(!a.mediaSource)throw new TypeError("No MediaSource specified");c.bandwidth=a.bandwidth;c.throughput={rate:0,count:0};c.roundTrip=NaN;c.resetStats_();c.mediaIndex=null;c.hasPlayed_=a.hasPlayed;c.currentTime_=
a.currentTime;c.seekable_=a.seekable;c.seeking_=a.seeking;c.duration_=a.duration;c.mediaSource_=a.mediaSource;c.hls_=a.hls;c.loaderType_=a.loaderType;c.startingMedia_=void 0;c.segmentMetadataTrack_=a.segmentMetadataTrack;c.goalBufferLength_=a.goalBufferLength;c.sourceType_=a.sourceType;c.inbandTextTracks_=a.inbandTextTracks;c.state_="INIT";c.checkBufferTimeout_=null;c.error_=void 0;c.currentTimeline_=-1;c.pendingSegment_=null;c.mimeType_=null;c.sourceUpdater_=null;c.xhrOptions_=null;c.activeInitSegmentId_=
null;c.initSegments_={};c.captionParser_=new Fl;c.decrypter_=a.decrypter;c.syncController_=a.syncController;c.syncPoint_={segmentIndex:0,time:0};c.syncController_.on("syncinfoupdate",function(){return c.trigger("syncinfoupdate")});c.mediaSource_.addEventListener("sourceopen",function(){return c.ended_=!1});c.fetchAtBuffer_=!1;c.logger_=Ac("SegmentLoader["+c.loaderType_+"]");Object.defineProperty(c,"state",{get:function(){return this.state_},set:function(a){a!==this.state_&&(this.logger_(this.state_+
" -> "+a),this.state_=a)}});return c}Ka(f,c);Ba(f,[{key:"resetStats_",value:function(){this.mediaSecondsLoaded=this.mediaTransferDuration=this.mediaRequestsErrored=this.mediaRequestsTimedout=this.mediaRequestsAborted=this.mediaRequests=this.mediaBytesTransferred=0}},{key:"dispose",value:function(){this.state="DISPOSED";this.pause();this.abort_();this.sourceUpdater_&&this.sourceUpdater_.dispose();this.resetStats_();this.captionParser_.reset()}},{key:"abort",value:function(){"WAITING"!==this.state?
this.pendingSegment_&&(this.pendingSegment_=null):(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_())}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests();this.pendingSegment_=null}},{key:"error",value:function(a){"undefined"!==typeof a&&(this.error_=a);this.pendingSegment_=null;return this.error_}},{key:"endOfStream",value:function(){this.ended_=!0;this.pause();this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?
this.sourceUpdater_.buffered():r.createTimeRanges()}},{key:"initSegment",value:function(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;if(!a)return null;var f=od(a),n=this.initSegments_[f];c&&!n&&a.bytes&&(this.initSegments_[f]=n={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:a.bytes,timescales:a.timescales,videoTrackIds:a.videoTrackIds});return n||a}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&
!this.paused()}},{key:"load",value:function(){this.monitorBuffer_();if(this.playlist_){this.syncController_.setDateTimeMapping(this.playlist_);if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){this.state="READY";this.sourceUpdater_=new km(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_);this.resetEverything();return this.monitorBuffer_()}},
{key:"playlist",value:function(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(a){var f=this.playlist_,n=this.pendingSegment_;this.playlist_=a;this.xhrOptions_=c;this.hasPlayed_()||(a.syncInfo={mediaSequence:a.mediaSequence,time:0});this.logger_("playlist update ["+(f?f.id:null)+" => "+a.id+"]");this.trigger("syncinfoupdate");if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();f&&f.uri===a.uri?(c=a.mediaSequence-f.mediaSequence,this.logger_("live window shift ["+
c+"]"),null!==this.mediaIndex&&(this.mediaIndex-=c),n&&(n.mediaIndex-=c,0<=n.mediaIndex&&(n.segment=a.segments[n.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(f,a)):null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(q.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(a,c){this.mimeType_||(this.mimeType_=a,this.sourceBufferEmitter_=
c,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(a){this.ended_=!1;this.resetLoader();this.remove(0,this.duration_(),a);this.captionParser_.clearAllCaptions();this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1;this.resyncLoader()}},{key:"resyncLoader",value:function(){this.syncPoint_=this.mediaIndex=null;this.abort()}},{key:"remove",value:function(a,c,f){this.sourceUpdater_&&this.sourceUpdater_.remove(a,
c,f);Lb(a,c,this.segmentMetadataTrack_);if(this.inbandTextTracks_)for(var h in this.inbandTextTracks_)Lb(a,c,this.inbandTextTracks_[h])}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&q.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=q.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_();this.checkBufferTimeout_&&q.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=q.setTimeout(this.monitorBufferTick_.bind(this),
500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var a=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(a)if(Xi(this.playlist_,this.mediaSource_,a.mediaIndex))this.endOfStream();else if(a.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||
this.seeking_()){if(a.timeline!==this.currentTimeline_||null!==a.startOfSegment&&a.startOfSegment<this.sourceUpdater_.timestampOffset())this.syncController_.reset(),a.timestampOffset=a.startOfSegment,this.captionParser_.clearAllCaptions();this.loadSegment_(a)}}}},{key:"checkBuffer_",value:function(a,c,f,n,p,u){var h=0;a.length&&(h=a.end(a.length-1));a=Math.max(0,h-p);if(!c.segments.length||a>=this.goalBufferLength_()||!n&&1<=a)return null;if(null===u)return f=this.getSyncSegmentCandidate_(c),this.generateSegmentInfo_(c,
f,null,!0);if(null!==f)return h=(n=c.segments[f])&&n.end?n.end:h,this.generateSegmentInfo_(c,f+1,h,!1);this.fetchAtBuffer_?(h=sa.getMediaInfoForTime(c,h,u.segmentIndex,u.time),f=h.mediaIndex,h=h.startTime):(h=sa.getMediaInfoForTime(c,p,u.segmentIndex,u.time),f=h.mediaIndex,h=h.startTime);return this.generateSegmentInfo_(c,f,h,!1)}},{key:"getSyncSegmentCandidate_",value:function(a){var c=this;if(-1===this.currentTimeline_)return 0;var f=a.segments.map(function(a,c){return{timeline:a.timeline,segmentIndex:c}}).filter(function(a){return a.timeline===
c.currentTimeline_});return f.length?f[Math.min(f.length-1,1)].segmentIndex:Math.max(a.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(a,c,f,n){if(0>c||c>=a.segments.length)return null;var h=a.segments[c];return{requestId:"segment-loader-"+Math.random(),uri:h.resolvedUri,mediaIndex:c,isSyncRequest:n,startOfSegment:f,playlist:a,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:h.timeline,duration:h.duration,segment:h}}},{key:"abortRequestEarly_",value:function(a){if(this.hls_.tech_.paused()||
!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||1E3>Date.now()-(a.firstBytesReceivedAt||Date.now()))return!1;var c=this.currentTime_(),f=a.bandwidth,n=this.pendingSegment_.duration,p=sa.estimateSegmentRequestTime(n,f,this.playlist_,a.bytesReceived);a=Yl(this.buffered_(),c,this.hls_.tech_.playbackRate())-1;if(p<=a)return!1;if(c=vm({master:this.hls_.playlists.master,currentTime:c,bandwidth:f,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,
syncController:this.syncController_})){f=p-a-c.rebufferingImpact;n=.5;a<=Kb&&(n=1);if(!c.playlist||c.playlist.uri===this.playlist_.uri||f<n)return!1;this.bandwidth=c.playlist.attributes.BANDWIDTH*Ca.BANDWIDTH_VARIANCE+1;this.abort();this.trigger("earlyabort");return!0}}},{key:"handleProgress_",value:function(a,c){this.pendingSegment_&&c.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(c.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(a){this.state="WAITING";
this.pendingSegment_=a;this.trimBackBuffer_(a);a.abortRequests=tm(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(a),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(a){var c=this.seekable_();a=this.currentTime_();var f=this.playlist_.targetDuration||10;c=c.length&&0<c.start(0)&&c.start(0)<a?c.start(0):a-30;a=Math.min(c,a-f);0<a&&this.remove(0,a)}},{key:"createSimplifiedSegmentObj_",
value:function(a){var c=a.segment,f={resolvedUri:c.resolvedUri,byterange:c.byterange,requestId:a.requestId};c.key&&(a=c.key.iv||new Uint32Array([0,0,0,a.mediaIndex+a.playlist.mediaSequence]),f.key={resolvedUri:c.key.resolvedUri,iv:a});c.map&&(f.map=this.initSegment(c.map));return f}},{key:"segmentRequestFinished_",value:function(a,c){this.mediaRequests+=1;c.stats&&(this.mediaBytesTransferred+=c.stats.bytesReceived,this.mediaTransferDuration+=c.stats.roundTripTime);this.pendingSegment_?c.requestId===
this.pendingSegment_.requestId&&(a?(this.pendingSegment_=null,this.state="READY",-102===a.code?this.mediaRequestsAborted+=1:(this.pause(),-101===a.code?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(a),this.trigger("error")))):(this.bandwidth=c.stats.bandwidth,this.roundTrip=c.stats.roundTripTime,c.map&&(c.map=this.initSegment(c.map,!0)),this.processSegmentResponse_(c))):this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",
value:function(a){var c=this.pendingSegment_;c.bytes=a.bytes;a.map&&(c.segment.map.bytes=a.map.bytes);c.endOfAllRequests=a.endOfAllRequests;if(a.fmp4Captions){c=this.inbandTextTracks_;var f=this.hls_.tech_,n=a.captionStreams,p;for(p in n)c[p]||(f.trigger({type:"usage",name:"hls-608"}),n=f.textTracks().getTrackById(p),c[p]=n?n:f.addRemoteTextTrack({kind:"captions",id:p,label:p},!1).track);wm({inbandTextTracks:this.inbandTextTracks_,captionArray:a.fmp4Captions,timestampOffset:0});this.captionParser_.clearParsedCaptions()}this.handleSegment_()}},
{key:"handleSegment_",value:function(){var a=this;if(this.pendingSegment_){var c=this.pendingSegment_,f=c.segment,n=this.syncController_.probeSegmentInfo(c);"undefined"===typeof this.startingMedia_&&n&&(n.containsAudio||n.containsVideo)&&(this.startingMedia_={containsAudio:n.containsAudio,containsVideo:n.containsVideo});if(n=xm(this.loaderType_,this.startingMedia_,n))this.error({message:n,blacklistDuration:Infinity}),this.trigger("error");else if(c.isSyncRequest)this.trigger("syncinfoupdate"),this.pendingSegment_=
null,this.state="READY";else{null!==c.timestampOffset&&c.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(c.timestampOffset),this.trigger("timestampoffset"));n=this.syncController_.mappingForTimeline(c.timeline);null!==n&&this.trigger({type:"segmenttimemapping",mapping:n});this.state="APPENDING";if(f.map){var p=od(f.map);this.activeInitSegmentId_&&this.activeInitSegmentId_===p||(n=this.initSegment(f.map),this.sourceUpdater_.appendBuffer(n.bytes,function(){a.activeInitSegmentId_=
p}))}c.byteLength=c.bytes.byteLength;this.mediaSecondsLoaded="number"===typeof f.start&&"number"===typeof f.end?this.mediaSecondsLoaded+(f.end-f.start):this.mediaSecondsLoaded+f.duration;this.logger_(ym(c));this.sourceUpdater_.appendBuffer(c.bytes,this.handleUpdateEnd_.bind(this))}}else this.state="READY"}},{key:"handleUpdateEnd_",value:function(){if(this.pendingSegment_){var a=this.pendingSegment_,c=a.segment,f=null!==this.mediaIndex;this.pendingSegment_=null;this.recordThroughput_(a);this.addSegmentMetadataCue_(a);
this.state="READY";this.mediaIndex=a.mediaIndex;this.fetchAtBuffer_=!0;this.currentTimeline_=a.timeline;this.trigger("syncinfoupdate");c.end&&this.currentTime_()-c.end>3*a.playlist.targetDuration?this.resetEverything():(f&&this.trigger("bandwidthupdate"),this.trigger("progress"),Xi(a.playlist,this.mediaSource_,a.mediaIndex+1)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}else this.state="READY",this.paused()||this.monitorBuffer_()}},{key:"recordThroughput_",value:function(a){var c=this.throughput.rate,
f=Date.now()-a.endOfAllRequests+1;this.throughput.rate+=(Math.floor(a.byteLength/f*8E3)-c)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function(a){if(this.segmentMetadataTrack_){var c=a.segment,f=c.start;c=c.end;if("number"===typeof f&&isFinite(f)&&"number"===typeof c&&isFinite(c)){Lb(f,c,this.segmentMetadataTrack_);var n=q.WebKitDataCue||q.VTTCue;a={bandwidth:a.playlist.attributes.BANDWIDTH,resolution:a.playlist.attributes.RESOLUTION,codecs:a.playlist.attributes.CODECS,byteLength:a.byteLength,
uri:a.uri,timeline:a.timeline,playlist:a.playlist.uri,start:f,end:c};var p=JSON.stringify(a);f=new n(f,c,p);f.value=a;this.segmentMetadataTrack_.addCue(f)}}}}]);return f}(r.EventTarget),Yi=new Uint8Array(["\n","\n"].map(function(c){return c.charCodeAt(0)})),zm=function(c){function f(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Aa(this,f);c=La(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,a,c));c.mediaSource_=null;c.subtitlesTrack_=null;return c}Ka(f,c);Ba(f,[{key:"buffered_",
value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return r.createTimeRanges();var a=this.subtitlesTrack_.cues;return r.createTimeRanges([[a[0].startTime,a[a.length-1].startTime]])}},{key:"initSegment",value:function(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;if(!a)return null;var f=od(a),n=this.initSegments_[f];c&&!n&&a.bytes&&(c=new Uint8Array(Yi.byteLength+a.bytes.byteLength),c.set(a.bytes),c.set(Yi,a.bytes.byteLength),this.initSegments_[f]=n={resolvedUri:a.resolvedUri,
byterange:a.byterange,bytes:c});return n||a}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){this.state="READY";this.resetEverything();return this.monitorBuffer_()}},{key:"track",value:function(a){if("undefined"===typeof a)return this.subtitlesTrack_;this.subtitlesTrack_=a;"INIT"===this.state&&this.couldBeginLoading_()&&this.init_();return this.subtitlesTrack_}},{key:"remove",value:function(a,c){Lb(a,c,this.subtitlesTrack_)}},
{key:"fillBuffer_",value:function(){var a=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var c=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(c=this.skipEmptySegments_(c))null===this.syncController_.timestampOffsetForTimeline(c.timeline)?(this.syncController_.one("timestampoffset",function(){a.state="READY";a.paused()||a.monitorBuffer_()}),
this.state="WAITING_ON_TIMELINE"):this.loadSegment_(c)}},{key:"skipEmptySegments_",value:function(a){for(;a&&a.segment.empty;)a=this.generateSegmentInfo_(a.playlist,a.mediaIndex+1,a.startOfSegment+a.duration,a.isSyncRequest);return a}},{key:"handleSegment_",value:function(){var a=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var c=this.pendingSegment_,f=c.segment;if("function"!==typeof q.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var n=function(){a.handleSegment_()};
this.state="WAITING_ON_VTTJS";this.subtitlesTrack_.tech_.one("vttjsloaded",n);this.subtitlesTrack_.tech_.one("vttjserror",function(){a.subtitlesTrack_.tech_.off("vttjsloaded",n);a.error({message:"Error loading vtt.js"});a.state="READY";a.pause();a.trigger("error")})}else{f.requested=!0;try{this.parseVTTCues_(c)}catch(p){return this.error({message:p.message}),this.state="READY",this.pause(),this.trigger("error")}this.updateTimeMapping_(c,this.syncController_.timelines[c.timeline],this.playlist_);c.isSyncRequest?
(this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY"):(c.byteLength=c.bytes.byteLength,this.mediaSecondsLoaded+=f.duration,c.cues.length&&this.remove(c.cues[0].endTime,c.cues[c.cues.length-1].endTime),c.cues.forEach(function(c){a.subtitlesTrack_.addCue(c)}),this.handleUpdateEnd_())}}else this.state="READY"}},{key:"parseVTTCues_",value:function(a){var c=void 0,f=!1;"function"===typeof q.TextDecoder?c=new q.TextDecoder("utf8"):(c=q.WebVTT.StringDecoder(),f=!0);c=new q.WebVTT.Parser(q,
q.vttjs,c);a.cues=[];a.timestampmap={MPEGTS:0,LOCAL:0};c.oncue=a.cues.push.bind(a.cues);c.ontimestampmap=function(c){return a.timestampmap=c};c.onparsingerror=function(a){r.log.warn("Error encountered when parsing cues: "+a.message)};if(a.segment.map){var n=a.segment.map.bytes;f&&(n=decodeURIComponent(escape(String.fromCharCode.apply(null,n))));c.parse(n)}n=a.bytes;f&&(n=decodeURIComponent(escape(String.fromCharCode.apply(null,n))));c.parse(n);c.flush()}},{key:"updateTimeMapping_",value:function(a,
c,f){var h=a.segment;if(c)if(a.cues.length){var m=a.timestampmap,u=m.MPEGTS/9E4-m.LOCAL+c.mapping;a.cues.forEach(function(a){a.startTime+=u;a.endTime+=u});f.syncInfo||(f.syncInfo={mediaSequence:f.mediaSequence+a.mediaIndex,time:Math.min(a.cues[0].startTime,a.cues[a.cues.length-1].startTime-h.duration)})}else h.empty=!0}}]);return f}(lf),Am=function(c,f){if(c.segments)for(var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,h=void 0,m=0;m<c.segments.length;m++){var n=c.segments[m];if(!h)a:{var p=
a+n.duration/2;h=f.cues;for(var u=0;u<h.length;u++){var t=h[u];if(p>=t.adStartTime&&p<=t.adEndTime){h=t;break a}}h=null}if(h){if("cueIn"in n){h.endTime=a;h.adEndTime=a;a+=n.duration;h=null;continue}if(a<h.endTime){a+=n.duration;continue}h.endTime+=n.duration}else"cueOut"in n&&(h=new q.VTTCue(a,a+n.duration,n.cueOut),h.adStartTime=a,h.adEndTime=a+parseFloat(n.cueOut),f.addCue(h)),"cueOutCont"in n&&(p=n.cueOutCont.split("/").map(parseFloat),h=Nl(p,2),p=h[0],u=h[1],h=new q.VTTCue(a,a+n.duration,""),
h.adStartTime=a-p,h.adEndTime=h.adStartTime+u,f.addCue(h));a+=n.duration}},Zi=[{name:"VOD",run:function(c,f,a,h,m){return Infinity!==a?{time:0,segmentIndex:0}:null}},{name:"ProgramDateTime",run:function(c,f,a,h,m){if(!c.datetimeToDisplayTime)return null;f=f.segments||[];h=a=null;m=m||0;for(var n=0;n<f.length;n++){var p=f[n];if(p.dateTimeObject){p=p.dateTimeObject.getTime()/1E3+c.datetimeToDisplayTime;var u=Math.abs(m-p);if(null!==h&&h<u)break;h=u;a={time:p,segmentIndex:n}}}return a}},{name:"Segment",
run:function(c,f,a,h,m){c=f.segments||[];a=f=null;m=m||0;for(var n=0;n<c.length;n++){var p=c[n];if(p.timeline===h&&"undefined"!==typeof p.start){var u=Math.abs(m-p.start);if(null!==a&&a<u)break;if(!f||null===a||a>=u)a=u,f={time:p.start,segmentIndex:n}}}return f}},{name:"Discontinuity",run:function(c,f,a,h,m){a=null;m=m||0;if(f.discontinuityStarts&&f.discontinuityStarts.length){h=null;for(var n=0;n<f.discontinuityStarts.length;n++){var p=f.discontinuityStarts[n],u=c.discontinuities[f.discontinuitySequence+
n+1];if(u){var t=Math.abs(m-u.time);if(null!==h&&h<t)break;if(!a||null===h||h>=t)h=t,a={time:u.time,segmentIndex:p}}}}return a}},{name:"Playlist",run:function(c,f,a,h,m){return f.syncInfo?{time:f.syncInfo.time,segmentIndex:f.syncInfo.mediaSequence-f.mediaSequence}:null}}],Bm=function(c){function f(){Aa(this,f);var a=La(this,(f.__proto__||Object.getPrototypeOf(f)).call(this));a.inspectCache_=void 0;a.timelines=[];a.discontinuities=[];a.datetimeToDisplayTime=null;a.logger_=Ac("SyncController");return a}
Ka(f,c);Ba(f,[{key:"getSyncPoint",value:function(a,c,f,n){a=this.runStrategies_(a,c,f,n);return a.length?this.selectSyncPoint_(a,{key:"time",value:n}):null}},{key:"getExpiredTime",value:function(a,c){if(!a||!a.segments)return null;var f=this.runStrategies_(a,c,a.discontinuitySequence,0);if(!f.length)return null;f=this.selectSyncPoint_(f,{key:"segmentIndex",value:0});0<f.segmentIndex&&(f.time*=-1);return Math.abs(f.time+xc(a,f.segmentIndex,0))}},{key:"runStrategies_",value:function(a,c,f,n){for(var h=
[],m=0;m<Zi.length;m++){var t=Zi[m],q=t.run(this,a,c,f,n);q&&(q.strategy=t.name,h.push({strategy:t.name,syncPoint:q}))}return h}},{key:"selectSyncPoint_",value:function(a,c){for(var f=a[0].syncPoint,h=Math.abs(a[0].syncPoint[c.key]-c.value),p=a[0].strategy,u=1;u<a.length;u++){var t=Math.abs(a[u].syncPoint[c.key]-c.value);t<h&&(h=t,f=a[u].syncPoint,p=a[u].strategy)}this.logger_("syncPoint for ["+c.key+": "+c.value+"] chosen with strategy"+(" ["+p+"]: [time:"+f.time+",")+(" segmentIndex:"+f.segmentIndex+
"]"));return f}},{key:"saveExpiredSegmentInfo",value:function(a,c){for(var f=c.mediaSequence-a.mediaSequence-1;0<=f;f--){var h=a.segments[f];if(h&&"undefined"!==typeof h.start){c.syncInfo={mediaSequence:a.mediaSequence+f,time:h.start};this.logger_("playlist refresh sync: [time:"+c.syncInfo.time+","+(" mediaSequence: "+c.syncInfo.mediaSequence+"]"));this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(a){!this.datetimeToDisplayTime&&a.segments&&a.segments.length&&a.segments[0].dateTimeObject&&
(this.datetimeToDisplayTime=-(a.segments[0].dateTimeObject.getTime()/1E3))}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(a){var c=a.segment,f=a.playlist,n;(n=c.map?this.probeMp4Segment_(a):this.probeTsSegment_(a))&&this.calculateSegmentTimeMapping_(a,n)&&(this.saveDiscontinuitySyncInfo_(a),f.syncInfo||(f.syncInfo={mediaSequence:f.mediaSequence+a.mediaIndex,time:c.start}));return n}},{key:"probeMp4Segment_",value:function(a){var c=a.segment,f=Fa.timescale(c.map.bytes);
f=Fa.startTime(f,a.bytes);null!==a.timestampOffset&&(a.timestampOffset-=f);return{start:f,end:f+c.duration}}},{key:"probeTsSegment_",value:function(a){var c=a.bytes;a=this.inspectCache_;var f=73===c[0]&&68===c[1]&&51===c[2]?!0:!1;if(f)b:{var n=!1,p=0,u=null;f=null;for(var t,q=0,r;3<=c.length-q;){switch(wc.parseType(c,q)){case "timed-metadata":if(10>c.length-q){n=!0;break}t=wc.parseId3TagSize(c,q);if(t>c.length){n=!0;break}null===f&&(r=c.subarray(q,q+t),f=wc.parseAacTimestamp(r));q+=t;break;case "audio":if(7>
c.length-q){n=!0;break}t=wc.parseAdtsSize(c,q);if(t>c.length){n=!0;break}null===u&&(r=c.subarray(q,q+t),u=wc.parseSampleRate(r));p++;q+=t;break;default:q++}if(n){c=null;break b}}null===u||null===f?c=null:(c=9E4/u,c={audio:[{type:"audio",dts:f,pts:f},{type:"audio",dts:f+1024*p*c,pts:f+1024*p*c}]})}else{f={pid:null,table:null};n={};u=0;for(t=188;t<c.byteLength;)if(71===c[u]&&71===c[t]){q=c.subarray(u,t);r=aa.parseType(q,f.pid);switch(r){case "pat":f.pid||(f.pid=aa.parsePat(q));break;case "pmt":f.table||
(f.table=aa.parsePmt(q))}if(f.pid&&f.table)break;u+=188;t+=188}else u++,t++;for(p in f.table)if(f.table.hasOwnProperty(p))switch(f.table[p]){case W.H264_STREAM_TYPE:n.video=[];var v;t=c;q=f;r=n;var w=0,B=188,z=!1,V=[];for(v=0;B<t.byteLength;)if(71===t[w]&&71===t[B]){u=t.subarray(w,B);var x=aa.parseType(u,q.pid);switch(x){case "pes":var y=aa.parsePesType(u,q.table);x=aa.parsePayloadUnitStartIndicator(u);if("video"===y&&(x&&!z&&(y=aa.parsePesTime(u))&&(y.type="video",r.video.push(y),z=!0),!r.firstKeyFrame)){if(x&&
0!==v){y=new Uint8Array(v);for(x=0;V.length;)v=V.shift(),y.set(v,x),x+=v.byteLength;aa.videoPacketContainsKeyFrame(y)&&(r.firstKeyFrame=aa.parsePesTime(y),r.firstKeyFrame.type="video");v=0}V.push(u);v+=u.byteLength}}if(z&&r.firstKeyFrame)break;w+=188;B+=188}else w++,B++;B=t.byteLength;w=B-188;for(z=!1;0<=w;)if(71===t[w]&&71===t[B]){u=t.subarray(w,B);x=aa.parseType(u,q.pid);switch(x){case "pes":if(y=aa.parsePesType(u,q.table),x=aa.parsePayloadUnitStartIndicator(u),"video"===y&&x&&(y=aa.parsePesTime(u)))y.type=
"video",r.video.push(y),z=!0}if(z)break;w-=188;B-=188}else w--,B--;0===n.video.length&&delete n.video;break;case W.ADTS_STREAM_TYPE:n.audio=[];u=c;t=f;q=n;r=0;w=188;for(B=!1;w<u.byteLength;)if(71===u[r]&&71===u[w]){z=u.subarray(r,w);V=aa.parseType(z,t.pid);switch(V){case "pes":if(v=aa.parsePesType(z,t.table),V=aa.parsePayloadUnitStartIndicator(z),"audio"===v&&V&&(z=aa.parsePesTime(z)))z.type="audio",q.audio.push(z),B=!0}if(B)break;r+=188;w+=188}else r++,w++;w=u.byteLength;r=w-188;for(B=!1;0<=r;)if(71===
u[r]&&71===u[w]){z=u.subarray(r,w);V=aa.parseType(z,t.pid);switch(V){case "pes":if(v=aa.parsePesType(z,t.table),V=aa.parsePayloadUnitStartIndicator(z),"audio"===v&&V&&(z=aa.parsePesTime(z)))z.type="audio",q.audio.push(z),B=!0}if(B)break;r-=188;w-=188}else r--,w--;0===n.audio.length&&delete n.audio}c=n}c&&(c.audio||c.video)?(Hl(c,a),a=c):a=null;p=c=void 0;if(!a)return null;a.video&&2===a.video.length?(this.inspectCache_=a.video[1].dts,c=a.video[0].dtsTime,p=a.video[1].dtsTime):a.audio&&2===a.audio.length&&
(this.inspectCache_=a.audio[1].dts,c=a.audio[0].dtsTime,p=a.audio[1].dtsTime);return{start:c,end:p,containsVideo:a.video&&2===a.video.length,containsAudio:a.audio&&2===a.audio.length}}},{key:"timestampOffsetForTimeline",value:function(a){return"undefined"===typeof this.timelines[a]?null:this.timelines[a].time}},{key:"mappingForTimeline",value:function(a){return"undefined"===typeof this.timelines[a]?null:this.timelines[a].mapping}},{key:"calculateSegmentTimeMapping_",value:function(a,c){var f=a.segment,
h=this.timelines[a.timeline];if(null!==a.timestampOffset)h={time:a.startOfSegment,mapping:a.startOfSegment-c.start},this.timelines[a.timeline]=h,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+a.timeline+": "+("[time: "+h.time+"] [mapping: "+h.mapping+"]")),f.start=a.startOfSegment,f.end=c.end+h.mapping;else if(h)f.start=c.start+h.mapping,f.end=c.end+h.mapping;else return!1;return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(a){var c=a.playlist,f=a.segment;if(f.discontinuity)this.discontinuities[f.timeline]=
{time:f.start,accuracy:0};else if(c.discontinuityStarts&&c.discontinuityStarts.length)for(var n=0;n<c.discontinuityStarts.length;n++){var p=c.discontinuityStarts[n],u=c.discontinuitySequence+n+1,q=p-a.mediaIndex,r=Math.abs(q);if(!this.discontinuities[u]||this.discontinuities[u].accuracy>r)p=0>q?f.start-xc(c,a.mediaIndex,p):f.end+xc(c,a.mediaIndex+1,p),this.discontinuities[u]={time:p,accuracy:r}}}}]);return f}(r.EventTarget),Cm=new Sf("./decrypter-worker.worker.js",function(c,f){var a=this;(function(){var c=
function(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function");},f=function(){function a(a,c){for(var f=0;f<c.length;f++){var h=c[f];h.enumerable=h.enumerable||!1;h.configurable=!0;"value"in h&&(h.writable=!0);Object.defineProperty(a,h.key,h)}}return function(c,f,h){f&&a(c.prototype,f);h&&a(c,h);return c}}(),n=function(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof c?"undefined":
da(c)));a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)},p=null,u=function(){function a(f){c(this,a);if(!p){var h=[[[],[],[],[],[]],[[],[],[],[],[]]],m=h[0],n=h[1],u=m[4],q=n[4],r,t,v,z=[],w=[],B;for(r=0;256>r;r++)w[(z[r]=r<<1^283*(r>>7))^r]=r;for(t=v=0;!u[t];t^=B||1,v=w[v]||1){var x=v^v<<1^v<<2^v<<3^v<<4;x=x>>8^x&255^99;u[t]=x;q[x]=t;var A=z[r=z[B=z[t]]];var y=16843009*
A^65537*r^257*B^16843008*t;A=257*z[x]^16843008*x;for(r=0;4>r;r++)m[r][t]=A=A<<24^A>>>8,n[r][x]=y=y<<24^y>>>8}for(r=0;5>r;r++)m[r]=m[r].slice(0),n[r]=n[r].slice(0);p=h}this._tables=[[p[0][0].slice(),p[0][1].slice(),p[0][2].slice(),p[0][3].slice(),p[0][4].slice()],[p[1][0].slice(),p[1][1].slice(),p[1][2].slice(),p[1][3].slice(),p[1][4].slice()]];h=this._tables[0][4];m=this._tables[1];t=f.length;v=1;if(4!==t&&6!==t&&8!==t)throw Error("Invalid aes key size");u=f.slice(0);q=[];this._key=[u,q];for(f=t;f<
4*t+28;f++){n=u[f-1];if(0===f%t||8===t&&4===f%t)n=h[n>>>24]<<24^h[n>>16&255]<<16^h[n>>8&255]<<8^h[n&255],0===f%t&&(n=n<<8^n>>>24^v<<24,v=v<<1^283*(v>>7));u[f]=u[f-t]^n}for(t=0;f;t++,f--)n=u[t&3?f:f-4],q[t]=4>=f||4>t?n:m[0][h[n>>>24]]^m[1][h[n>>16&255]]^m[2][h[n>>8&255]]^m[3][h[n&255]]}a.prototype.decrypt=function(a,c,f,h,m,n){var p=this._key[1];a^=p[0];h^=p[1];f^=p[2];c^=p[3];var u=p.length/4-2,q,r=4;var t=this._tables[1];var v=t[0],z=t[1],w=t[2],x=t[3],B=t[4];for(q=0;q<u;q++){t=v[a>>>24]^z[h>>16&
255]^w[f>>8&255]^x[c&255]^p[r];var A=v[h>>>24]^z[f>>16&255]^w[c>>8&255]^x[a&255]^p[r+1];var y=v[f>>>24]^z[c>>16&255]^w[a>>8&255]^x[h&255]^p[r+2];c=v[c>>>24]^z[a>>16&255]^w[h>>8&255]^x[f&255]^p[r+3];r+=4;a=t;h=A;f=y}for(q=0;4>q;q++)m[(3&-q)+n]=B[a>>>24]<<24^B[h>>16&255]<<16^B[f>>8&255]<<8^B[c&255]^p[r++],t=a,a=h,h=f,f=c,c=t};return a}(),q=function(){function a(){c(this,a);this.listeners={}}a.prototype.on=function(a,c){this.listeners[a]||(this.listeners[a]=[]);this.listeners[a].push(c)};a.prototype.off=
function(a,c){if(!this.listeners[a])return!1;var f=this.listeners[a].indexOf(c);this.listeners[a].splice(f,1);return-1<f};a.prototype.trigger=function(a){var c=this.listeners[a];if(c)if(2===arguments.length)for(var f=c.length,h=0;h<f;++h)c[h].call(this,arguments[1]);else{f=Array.prototype.slice.call(arguments,1);h=c.length;for(var m=0;m<h;++m)c[m].apply(this,f)}};a.prototype.dispose=function(){this.listeners={}};a.prototype.pipe=function(a){this.on("data",function(c){a.push(c)})};return a}(),r=function(a){function f(){c(this,
f);var h=a.call(this,q);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");h=!h||"object"!==("undefined"===typeof h?"undefined":da(h))&&"function"!==typeof h?this:h;h.jobs=[];h.delay=1;h.timeout_=null;return h}n(f,a);f.prototype.processJob_=function(){this.jobs.shift()();this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null};f.prototype.push=function(a){this.jobs.push(a);this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),
this.delay))};return f}(q),v=function(a){return a<<24|(a&65280)<<8|(a&16711680)>>8|a>>>24},w=function(){function a(f,h,m,n){c(this,a);var p=a.STEP,u=new Int32Array(f.buffer),q=new Uint8Array(f.byteLength);f=0;this.asyncStream_=new r;this.asyncStream_.push(this.decryptChunk_(u.subarray(f,f+p),h,m,q));for(f=p;f<u.length;f+=p)m=new Uint32Array([v(u[f-4]),v(u[f-3]),v(u[f-2]),v(u[f-1])]),this.asyncStream_.push(this.decryptChunk_(u.subarray(f,f+p),h,m,q));this.asyncStream_.push(function(){n(null,q.subarray(0,
q.byteLength-q[q.byteLength-1]))})}a.prototype.decryptChunk_=function(a,c,f,h){return function(){var m=new Int32Array(a.buffer,a.byteOffset,a.byteLength>>2),n=new u(Array.prototype.slice.call(c)),p=new Uint8Array(a.byteLength),q=new Int32Array(p.buffer),t;var r=f[0];var w=f[1];var x=f[2];var A=f[3];for(t=0;t<m.length;t+=4){var z=v(m[t]);var y=v(m[t+1]);var B=v(m[t+2]);var C=v(m[t+3]);n.decrypt(z,y,B,C,q,t);q[t]=v(q[t]^r);q[t+1]=v(q[t+1]^w);q[t+2]=v(q[t+2]^x);q[t+3]=v(q[t+3]^A);r=z;w=y;x=B;A=C}h.set(p,
a.byteOffset)}};f(a,null,[{key:"STEP",get:function(){return 32E3}}]);return a}(),x=function(a){var c={};Object.keys(a).forEach(function(f){var h=a[f];ArrayBuffer.isView(h)?c[f]={bytes:h.buffer,byteOffset:h.byteOffset,byteLength:h.byteLength}:c[f]=h});return c};return new function(a){a.onmessage=function(c){var f=c.data;c=new Uint8Array(f.encrypted.bytes,f.encrypted.byteOffset,f.encrypted.byteLength);var h=new Uint32Array(f.key.bytes,f.key.byteOffset,f.key.byteLength/4),m=new Uint32Array(f.iv.bytes,
f.iv.byteOffset,f.iv.byteLength/4);new w(c,h,m,function(c,h){a.postMessage(x({source:f.source,decrypted:h}),[h.buffer])})}}(a)})()}),pd=function(c,f){c.abort();c.pause();f&&f.activePlaylistLoader&&(f.activePlaylistLoader.pause(),f.activePlaylistLoader=null)},Dm=function(c,f){return function(){var a=f.segmentLoaders,h=a[c],m=a.main;a=f.mediaTypes[c];var n=a.activeTrack();n=a.activeGroup(n);var p=a.activePlaylistLoader;pd(h,a);n&&(n.playlistLoader?(h.resyncLoader(),h=n.playlistLoader,a.activePlaylistLoader=
h,h.load()):p&&m.resetEverything())}},Em=function(c,f){return function(){var a=f.segmentLoaders,h=a[c],m=a.main;a=f.mediaTypes[c];var n=a.activeTrack(),p=a.activeGroup(n),u=a.activePlaylistLoader;pd(h,a);p&&(p.playlistLoader?u===p.playlistLoader?(h=p.playlistLoader,a.activePlaylistLoader=h,h.load()):(h.track&&h.track(n),h.resetEverything(),h=p.playlistLoader,a.activePlaylistLoader=h,h.load()):m.resetEverything())}},qd={AUDIO:function(c,f){return function(){var a=f.mediaTypes[c],h=f.blacklistCurrentPlaylist;
pd(f.segmentLoaders[c],a);var m=a.activeTrack(),n=a.activeGroup();n=(n.filter(function(a){return a["default"]})[0]||n[0]).id;n=a.tracks[n];if(m===n)h({message:"Problem encountered loading the default audio track."});else{r.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var p in a.tracks)a.tracks[p].enabled=a.tracks[p]===n;a.onTrackChanged()}}},SUBTITLES:function(c,f){return function(){var a=f.segmentLoaders[c],h=f.mediaTypes[c];r.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");
pd(a,h);if(a=h.activeTrack())a.mode="disabled";h.onTrackChanged()}}},$i={AUDIO:function(c,f,a){if(f){var h=a.tech,m=a.requestOptions,n=a.segmentLoaders[c];f.on("loadedmetadata",function(){var a=f.media();n.playlist(a,m);(!h.paused()||a.endList&&"none"!==h.preload())&&n.load()});f.on("loadedplaylist",function(){n.playlist(f.media(),m);h.paused()||n.load()});f.on("error",qd[c](c,a))}},SUBTITLES:function(c,f,a){var h=a.tech,m=a.requestOptions,n=a.segmentLoaders[c],p=a.mediaTypes[c];f.on("loadedmetadata",
function(){var a=f.media();n.playlist(a,m);n.track(p.activeTrack());(!h.paused()||a.endList&&"none"!==h.preload())&&n.load()});f.on("loadedplaylist",function(){n.playlist(f.media(),m);h.paused()||n.load()});f.on("error",qd[c](c,a))}},Fm=function(c,f){return function(a){return a.attributes[c]===f}},Gm=function(c){return function(f){return f.resolvedUri===c}},Hm={AUDIO:function(c,f){var a=f.hls,h=f.sourceType,m=f.segmentLoaders[c],n=f.requestOptions.withCredentials,p=f.master,q=p.mediaGroups;p=p.playlists;
var t=f.mediaTypes[c],v=t.groups;t=t.tracks;var w=f.masterPlaylistLoader;q[c]&&0!==Object.keys(q[c]).length||(q[c]={main:{"default":{"default":!0}}});for(var x in q[c]){v[x]||(v[x]=[]);var y=p.filter(Fm(c,x)),B;for(B in q[c][x]){var z=q[c][x][B];y.filter(Gm(z.resolvedUri)).length&&delete z.resolvedUri;var C=z.resolvedUri?new md(z.resolvedUri,a,n):z.playlists&&"dash"===h?new hf(z.playlists[0],a,n,w):null;z=r.mergeOptions({id:B,playlistLoader:C},z);$i[c](c,z.playlistLoader,f);v[x].push(z);if("undefined"===
typeof t[B]){C=r.AudioTrack;var D=B,F=z["default"]?"main":"alternative";z.characteristics&&0<=z.characteristics.indexOf("public.accessibility.describes-video")&&(F="main-desc");z=new C({id:D,kind:F,enabled:!1,language:z.language,"default":z["default"],label:B});t[B]=z}}}m.on("error",qd[c](c,f))},SUBTITLES:function(c,f){var a=f.tech,h=f.hls,m=f.sourceType,n=f.segmentLoaders[c],p=f.requestOptions.withCredentials,q=f.master.mediaGroups,t=f.mediaTypes[c],v=t.groups;t=t.tracks;var w=f.masterPlaylistLoader,
x;for(x in q[c]){v[x]||(v[x]=[]);for(var y in q[c][x])if(!q[c][x][y].forced){var B=q[c][x][y],z=void 0;"hls"===m?z=new md(B.resolvedUri,h,p):"dash"===m&&(z=new hf(B.playlists[0],h,p,w));B=r.mergeOptions({id:y,playlistLoader:z},B);$i[c](c,B.playlistLoader,f);v[x].push(B);"undefined"===typeof t[y]&&(B=a.addRemoteTextTrack({id:y,kind:"subtitles",enabled:!1,language:B.language,label:y},!1).track,t[y]=B)}}n.on("error",qd[c](c,f))},"CLOSED-CAPTIONS":function(c,f){var a=f.tech,h=f.master.mediaGroups,m=f.mediaTypes[c],
n=m.groups;m=m.tracks;for(var p in h[c]){n[p]||(n[p]=[]);for(var q in h[c][p]){var t=h[c][p][q];t.instreamId.match(/CC\d/)&&(n[p].push(r.mergeOptions({id:q},t)),"undefined"===typeof m[q]&&(t=a.addRemoteTextTrack({id:t.instreamId,kind:"captions",enabled:!1,language:t.language,label:q},!1).track,m[q]=t))}}}},Im=function(c,f){return function(a){var h=f.mediaTypes[c].groups,m=f.masterPlaylistLoader.media();if(!m)return null;var n=null;m.attributes[c]&&(n=h[m.attributes[c]]);n=n||h.main;return"undefined"===
typeof a?n:null===a?null:n.filter(function(c){return c.id===a.id})[0]||null}},Jm={AUDIO:function(c,f){return function(){var a=f.mediaTypes[c].tracks,h;for(h in a)if(a[h].enabled)return a[h];return null}},SUBTITLES:function(c,f){return function(){var a=f.mediaTypes[c].tracks,h;for(h in a)if("showing"===a[h].mode)return a[h];return null}}},Km=function(c){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(a){Hm[a](a,c)});var f=c.mediaTypes,a=c.masterPlaylistLoader,h=c.tech,m=c.hls;["AUDIO","SUBTITLES"].forEach(function(a){f[a].activeGroup=
Im(a,c);f[a].activeTrack=Jm[a](a,c);f[a].onGroupChanged=Dm(a,c);f[a].onTrackChanged=Em(a,c)});var n=f.AUDIO.activeGroup();n=(n.filter(function(a){return a["default"]})[0]||n[0]).id;f.AUDIO.tracks[n].enabled=!0;f.AUDIO.onTrackChanged();a.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(a){return f[a].onGroupChanged()})});var p=function(){f.AUDIO.onTrackChanged();h.trigger({type:"usage",name:"hls-audio-change"})};h.audioTracks().addEventListener("change",p);h.remoteTextTracks().addEventListener("change",
f.SUBTITLES.onTrackChanged);m.on("dispose",function(){h.audioTracks().removeEventListener("change",p);h.remoteTextTracks().removeEventListener("change",f.SUBTITLES.onTrackChanged)});h.clearTracks("audio");for(var q in f.AUDIO.tracks)h.audioTracks().addTrack(f.AUDIO.tracks[q])},Lm=function(){var c={};["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(f){c[f]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Yb,activeTrack:Yb,onGroupChanged:Yb,onTrackChanged:Yb}});return c},db=void 0,
Mm="mediaRequests mediaRequestsAborted mediaRequestsTimedout mediaRequestsErrored mediaTransferDuration mediaBytesTransferred".split(" "),Nm=function(c){return this.audioSegmentLoader_[c]+this.mainSegmentLoader_[c]},Om=function(c){function f(a){Aa(this,f);var c=La(this,(f.__proto__||Object.getPrototypeOf(f)).call(this)),m=a.url,n=a.withCredentials,p=a.tech,q=a.bandwidth,t=a.externHls,v=a.useCueTags,w=a.blacklistDuration,x=a.enableLowInitialPlaylist,y=a.sourceType,B=a.seekTo;if(!m)throw Error("A non-empty playlist URL is required");
db=t;c.withCredentials=n;c.tech_=p;c.hls_=p.hls;c.seekTo_=B;c.sourceType_=y;c.useCueTags_=v;c.blacklistDuration=w;c.enableLowInitialPlaylist=x;c.useCueTags_&&(c.cueTagsTrack_=c.tech_.addTextTrack("metadata","ad-cues"),c.cueTagsTrack_.inBandMetadataTrackDispatchType="");c.requestOptions_={withCredentials:c.withCredentials,timeout:null};c.mediaTypes_=Lm();c.mediaSource=new r.MediaSource;c.mediaSource.addEventListener("sourceopen",c.handleSourceOpen_.bind(c));c.seekable_=r.createTimeRanges();c.hasPlayed_=
function(){return!1};c.syncController_=new Bm(a);c.segmentMetadataTrack_=p.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track;c.decrypter_=new Cm;c.inbandTextTracks_={};n={hls:c.hls_,mediaSource:c.mediaSource,currentTime:c.tech_.currentTime.bind(c.tech_),seekable:function(){return c.seekable()},seeking:function(){return c.tech_.seeking()},duration:function(){return c.mediaSource.duration},hasPlayed:function(){return c.hasPlayed_()},goalBufferLength:function(){return c.goalBufferLength()},
bandwidth:q,syncController:c.syncController_,decrypter:c.decrypter_,sourceType:c.sourceType_,inbandTextTracks:c.inbandTextTracks_};c.masterPlaylistLoader_="dash"===c.sourceType_?new hf(m,c.hls_,c.withCredentials):new md(m,c.hls_,c.withCredentials);c.setupMasterPlaylistLoaderListeners_();c.mainSegmentLoader_=new lf(r.mergeOptions(n,{segmentMetadataTrack:c.segmentMetadataTrack_,loaderType:"main"}),a);c.audioSegmentLoader_=new lf(r.mergeOptions(n,{loaderType:"audio"}),a);c.subtitleSegmentLoader_=new zm(r.mergeOptions(n,
{loaderType:"vtt"}),a);c.setupSegmentLoaderListeners_();Mm.forEach(function(a){c[a+"_"]=Nm.bind(c,a)});c.logger_=Ac("MPC");c.masterPlaylistLoader_.load();return c}Ka(f,c);Ba(f,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var a=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var c=a.masterPlaylistLoader_.media(),f=1500*a.masterPlaylistLoader_.targetDuration;af(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=
f;c.endList&&"none"!==a.tech_.preload()&&(a.mainSegmentLoader_.playlist(c,a.requestOptions_),a.mainSegmentLoader_.load());Km({sourceType:a.sourceType_,segmentLoaders:{AUDIO:a.audioSegmentLoader_,SUBTITLES:a.subtitleSegmentLoader_,main:a.mainSegmentLoader_},tech:a.tech_,requestOptions:a.requestOptions_,masterPlaylistLoader:a.masterPlaylistLoader_,hls:a.hls_,master:a.master(),mediaTypes:a.mediaTypes_,blacklistCurrentPlaylist:a.blacklistCurrentPlaylist.bind(a)});a.triggerPresenceUsage_(a.master(),c);
try{a.setupSourceBuffers_()}catch(n){return r.log.warn("Failed to create SourceBuffers",n),a.mediaSource.endOfStream("decode")}a.setupFirstPlay();a.trigger("selectedinitialmedia")});this.masterPlaylistLoader_.on("loadedplaylist",function(){var c=a.masterPlaylistLoader_.media();if(c){if(a.useCueTags_&&a.updateAdCues_(c),a.mainSegmentLoader_.playlist(c,a.requestOptions_),a.updateDuration(),a.tech_.paused()||(a.mainSegmentLoader_.load(),a.audioSegmentLoader_&&a.audioSegmentLoader_.load()),!c.endList){var f=
function(){var c=a.seekable();0!==c.length&&a.mediaSource.addSeekableRange_(c.start(0),c.end(0))};if(Infinity!==a.duration())a.tech_.one("durationchange",function p(){if(Infinity===a.duration())f();else a.tech_.one("durationchange",p)});else f()}}else a.excludeUnsupportedVariants_(),c=void 0,a.enableLowInitialPlaylist&&(c=a.selectInitialPlaylist()),c||(c=a.selectPlaylist()),a.initialMedia_=c,a.masterPlaylistLoader_.media(a.initialMedia_)});this.masterPlaylistLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.masterPlaylistLoader_.error)});
this.masterPlaylistLoader_.on("mediachanging",function(){a.mainSegmentLoader_.abort();a.mainSegmentLoader_.pause()});this.masterPlaylistLoader_.on("mediachange",function(){var c=a.masterPlaylistLoader_.media(),f=1500*a.masterPlaylistLoader_.targetDuration;af(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=f;a.mainSegmentLoader_.playlist(c,a.requestOptions_);a.mainSegmentLoader_.load();a.tech_.trigger({type:"mediachange",bubbles:!0})});
this.masterPlaylistLoader_.on("playlistunchanged",function(){var c=a.masterPlaylistLoader_.media();a.stuckAtPlaylistEnd_(c)&&(a.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),a.tech_.trigger("playliststuck"))});this.masterPlaylistLoader_.on("renditiondisabled",function(){a.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})});this.masterPlaylistLoader_.on("renditionenabled",function(){a.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",
value:function(a,c){var f=a.mediaGroups||{},h=!0,p=Object.keys(f.AUDIO),q;for(q in f.AUDIO)for(var r in f.AUDIO[q])f.AUDIO[q][r].uri||(h=!1);h&&this.tech_.trigger({type:"usage",name:"hls-demuxed"});Object.keys(f.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"});db.Playlist.isAes(c)&&this.tech_.trigger({type:"usage",name:"hls-aes"});db.Playlist.isFmp4(c)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"});p.length&&1<Object.keys(f.AUDIO[p[0]]).length&&this.tech_.trigger({type:"usage",
name:"hls-alternate-audio"});this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var a=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var c=a.selectPlaylist(),f=a.masterPlaylistLoader_.media(),n=a.tech_.buffered();n=n.length?n.end(n.length-1)-a.tech_.currentTime():0;var p=a.bufferLowWaterLine();(!f.endList||a.duration()<Ca.MAX_BUFFER_LOW_WATER_LINE||c.attributes.BANDWIDTH<f.attributes.BANDWIDTH||n>=
p)&&a.masterPlaylistLoader_.media(c);a.tech_.trigger("bandwidthupdate")});this.mainSegmentLoader_.on("progress",function(){a.trigger("progress")});this.mainSegmentLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.mainSegmentLoader_.error())});this.mainSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("timestampoffset",function(){a.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})});this.audioSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()});
this.mainSegmentLoader_.on("ended",function(){a.onEndOfStream()});this.mainSegmentLoader_.on("earlyabort",function(){a.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)});this.mainSegmentLoader_.on("reseteverything",function(){a.tech_.trigger("hls-reset")});this.mainSegmentLoader_.on("segmenttimemapping",function(c){a.tech_.trigger({type:"hls-segment-time-mapping",mapping:c.mapping})});this.audioSegmentLoader_.on("ended",
function(){a.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load();this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:function(){var a=this.selectPlaylist();a!==this.masterPlaylistLoader_.media()&&
(this.masterPlaylistLoader_.media(a),this.mainSegmentLoader_.resetLoader())}},{key:"fastQualityChange_",value:function(){var a=this,c=this.selectPlaylist();c!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(c),this.mainSegmentLoader_.resetEverything(function(){a.tech_.setCurrentTime(a.tech_.currentTime())}))}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.seekTo_(0);this.hasPlayed_()&&this.load();var a=this.tech_.seekable();if(Infinity===this.tech_.duration()&&
this.tech_.currentTime()<a.start(0))return this.seekTo_(a.end(a.length-1))}}},{key:"setupFirstPlay",value:function(){var a=this,c=this.masterPlaylistLoader_.media();if(!c||this.tech_.paused()||this.hasPlayed_())return!1;if(!c.endList){var f=this.seekable();if(!f.length)return!1;if(r.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){a.trigger("firstplay");a.seekTo_(f.end(0));a.hasPlayed_=function(){return!0}}),!1;this.trigger("firstplay");this.seekTo_(f.end(0))}this.hasPlayed_=
function(){return!0};this.load();return!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(h){return r.log.warn("Failed to create Source Buffers",h),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var a=this.tech_.play();"undefined"!==typeof a&&"function"===typeof a.then&&a.then(null,function(a){})}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var a=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(a=
!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?a&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_);a&&this.mediaSource.endOfStream()}},{key:"stuckAtPlaylistEnd_",value:function(a){if(!this.seekable().length)return!1;var c=this.syncController_.getExpiredTime(a,this.mediaSource.duration);if(null===c)return!1;a=db.Playlist.playlistEnd(a,c);c=this.tech_.currentTime();var f=this.tech_.buffered();if(!f.length)return a-c<=ob;f=f.end(f.length-
1);return f-c<=ob&&a-f<=ob}},{key:"blacklistCurrentPlaylist",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=arguments[1];var f=a.playlist||this.masterPlaylistLoader_.media();c=c||a.blacklistDuration||this.blacklistDuration;if(!f){this.error=a;try{return this.mediaSource.endOfStream("network")}catch(p){return this.trigger("error")}}var n=1===this.masterPlaylistLoader_.master.playlists.filter(nd).length;if(n)return r.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."),
this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(n);f.excludeUntil=Date.now()+1E3*c;this.tech_.trigger("blacklistplaylist");this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});c=this.selectPlaylist();r.log.warn("Problem encountered with the current HLS playlist."+(a.message?" "+a.message:"")+" Switching to another playlist.");return this.masterPlaylistLoader_.media(c)}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause();this.mediaTypes_.AUDIO.activePlaylistLoader&&
this.audioSegmentLoader_.pause();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(a){var c=Ii(this.tech_.buffered(),a);if(!this.masterPlaylistLoader_||!this.masterPlaylistLoader_.media()||!this.masterPlaylistLoader_.media().segments)return 0;if(c&&c.length)return a;this.mainSegmentLoader_.resetEverything();this.mainSegmentLoader_.abort();this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),
this.audioSegmentLoader_.abort());this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort());this.load()}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:db.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var a=void 0;if(this.masterPlaylistLoader_){var c=
this.masterPlaylistLoader_.media();if(c){var f=this.syncController_.getExpiredTime(c,this.mediaSource.duration);if(null!==f){var n=db.Playlist.seekable(c,f);if(0!==n.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){c=this.mediaTypes_.AUDIO.activePlaylistLoader.media();f=this.syncController_.getExpiredTime(c,this.mediaSource.duration);if(null===f)return;a=db.Playlist.seekable(c,f);if(0===a.length)return}a?a.start(0)>n.end(0)||n.start(0)>a.end(0)?this.seekable_=n:this.seekable_=r.createTimeRanges([[a.start(0)>
n.start(0)?a.start(0):n.start(0),a.end(0)<n.end(0)?a.end(0):n.end(0)]]):this.seekable_=n;this.logger_("seekable updated ["+bf(this.seekable_)+"]");this.tech_.trigger("seekablechanged")}}}}}},{key:"updateDuration",value:function(){var a=this,c=this.mediaSource.duration,f=db.Playlist.duration(this.masterPlaylistLoader_.media()),n=this.tech_.buffered(),p=function t(){a.mediaSource.duration=f;a.tech_.trigger("durationchange");a.mediaSource.removeEventListener("sourceopen",t)};0<n.length&&(f=Math.max(f,
n.end(n.length-1)));c!==f&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",p):p())}},{key:"dispose",value:function(){var a=this;this.decrypter_.terminate();this.masterPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();["AUDIO","SUBTITLES"].forEach(function(c){c=a.mediaTypes_[c].groups;for(var f in c)c[f].forEach(function(a){a.playlistLoader&&a.playlistLoader.dispose()})});this.audioSegmentLoader_.dispose();this.subtitleSegmentLoader_.dispose()}},{key:"master",
value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var a=this.masterPlaylistLoader_.media(),c;if(a&&"open"===this.mediaSource.readyState){var f=this.masterPlaylistLoader_.master;var n=a.segments&&a.segments.length&&a.segments[0].map?"mp4":"mp2t";var p=a.attributes||{};var q=p.CODECS?yc(p.CODECS):Oi;var t=a.attributes||{};p=!0;var v=!1;if(a){if(f.mediaGroups.AUDIO&&
t.AUDIO){var w=f.mediaGroups.AUDIO[t.AUDIO];if(w){v=!0;p=!1;for(var x in w)if(!w[x].uri&&!w[x].playlists){p=!0;break}}}v&&!q.audioProfile&&(p||(q.audioProfile=dm(f,t.AUDIO)),q.audioProfile||(r.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),q.audioProfile=Oi.audioProfile));var y;q.videoCodec&&(c=""+q.videoCodec+q.videoObjectTypeIndicator);q.audioProfile&&(y="mp4a.40."+q.audioProfile);f=ef("audio",n,[y]);x=ef("video",
n,[c]);n=ef("video",n,[c,y]);c=v?!p&&c?[x,f]:p||c?[n,f]:[f,f]:c?[n]:[f]}else c=[];if(1>c.length)return this.error="No compatible SourceBuffer configuration for the variant stream:"+a.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(c);this.excludeIncompatibleVariants_(a)}}},{key:"configureLoaderMimeTypes_",value:function(a){var c=1<a.length&&-1===a[0].indexOf(",")&&a[0]!==a[1]?new r.EventTarget:null;this.mainSegmentLoader_.mimeType(a[0],c);a[1]&&this.audioSegmentLoader_.mimeType(a[1],
c)}},{key:"excludeUnsupportedVariants_",value:function(){this.master().playlists.forEach(function(a){a.attributes.CODECS&&q.MediaSource&&q.MediaSource.isTypeSupported&&!q.MediaSource.isTypeSupported('video/mp4; codecs="'+cm(a.attributes.CODECS)+'"')&&(a.excludeUntil=Infinity)})}},{key:"excludeIncompatibleVariants_",value:function(a){var c=2,f=null,n=void 0;a.attributes.CODECS&&(n=yc(a.attributes.CODECS),f=n.videoCodec,c=n.codecCount);this.master().playlists.forEach(function(a){var h={codecCount:2,
videoCodec:null};a.attributes.CODECS&&(h=yc(a.attributes.CODECS));h.codecCount!==c&&(a.excludeUntil=Infinity);h.videoCodec!==f&&(a.excludeUntil=Infinity)})}},{key:"updateAdCues_",value:function(a){var c=0,f=this.seekable();f.length&&(c=f.start(0));Am(a,this.cueTagsTrack_,c)}},{key:"goalBufferLength",value:function(){var a=this.tech_.currentTime(),c=Ca.GOAL_BUFFER_LENGTH;return Math.min(c+a*Ca.GOAL_BUFFER_LENGTH_RATE,Math.max(c,Ca.MAX_GOAL_BUFFER_LENGTH))}},{key:"bufferLowWaterLine",value:function(){var a=
this.tech_.currentTime(),c=Ca.BUFFER_LOW_WATER_LINE;return Math.min(c+a*Ca.BUFFER_LOW_WATER_LINE_RATE,Math.max(c,Ca.MAX_BUFFER_LOW_WATER_LINE))}}]);return f}(r.EventTarget),Pm=function(c,f,a){return function(h){var m=c.master.playlists[f],n=$e(m),p=nd(m);if("undefined"===typeof h)return p;h?delete m.disabled:m.disabled=!0;h===p||n||(a(),h?c.trigger("renditionenabled"):c.trigger("renditiondisabled"));return h}},Qm=function m(f,a,h){Aa(this,m);var n=f.masterPlaylistController_.fastQualityChange_.bind(f.masterPlaylistController_);
if(a.attributes.RESOLUTION){var p=a.attributes.RESOLUTION;this.width=p.width;this.height=p.height}this.bandwidth=a.attributes.BANDWIDTH;this.id=h;this.enabled=Pm(f.playlists,a.uri,n)},Rm=function(f){var a=f.playlists;f.representations=function(){return a.master.playlists.filter(function(a){return!$e(a)}).map(function(a,m){return new Qm(f,a,a.uri)})}},aj=["seeking","seeked","pause","playing","error"],Sm=function(){function f(a){var h=this;Aa(this,f);this.tech_=a.tech;this.seekable=a.seekable;this.seekTo=
a.seekTo;this.consecutiveUpdates=0;this.checkCurrentTimeTimeout_=this.timer_=this.lastRecordedTime=null;this.logger_=Ac("PlaybackWatcher");this.logger_("initialize");var m=function(){return h.monitorCurrentTime_()},n=function(){return h.techWaiting_()},p=function(){return h.cancelTimer_()},r=function(){return h.fixesBadSeeks_()};this.tech_.on("seekablechanged",r);this.tech_.on("waiting",n);this.tech_.on(aj,p);this.tech_.on("canplay",m);this.dispose=function(){h.logger_("dispose");h.tech_.off("seekablechanged",
r);h.tech_.off("waiting",n);h.tech_.off(aj,p);h.tech_.off("canplay",m);h.checkCurrentTimeTimeout_&&q.clearTimeout(h.checkCurrentTimeTimeout_);h.cancelTimer_()}}Ba(f,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_();this.checkCurrentTimeTimeout_&&q.clearTimeout(this.checkCurrentTimeTimeout_);this.checkCurrentTimeTimeout_=q.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())this.consecutiveUpdates=
0,this.lastRecordedTime=this.tech_.currentTime();else if(!this.tech_.paused()&&!this.tech_.seeking()){var a=this.tech_.currentTime(),f=this.tech_.buffered();if(this.lastRecordedTime===a&&(!f.length||a+ob>=f.end(f.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&a===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):a===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=a)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=
0;this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_));this.timer_=null}},{key:"fixesBadSeeks_",value:function(){var a=this.tech_.seeking(),f=this.seekable(),m=this.tech_.currentTime(),n=void 0;a&&this.afterSeekableWindow_(f,m)&&(n=f.end(f.length-1));a&&this.beforeSeekableWindow_(f,m)&&(n=f.start(0)+ob);return"undefined"!==typeof n?(this.logger_("Trying to seek outside of seekable at time "+m+" with "+("seekable range "+bf(f)+". Seeking to ")+(n+".")),this.seekTo(n),!0):!1}},{key:"waiting_",
value:function(){if(!this.techWaiting_()){var a=this.tech_.currentTime(),f=this.tech_.buffered();f=Ii(f,a);f.length&&a+3<=f.end(0)&&(this.cancelTimer_(),this.seekTo(a),this.logger_("Stopped at "+a+" while inside a buffered region "+("["+f.start(0)+" -> "+f.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"}))}}},{key:"techWaiting_",value:function(){var a=this.seekable(),f=this.tech_.currentTime();if(this.tech_.seeking()&&
this.fixesBadSeeks_()||this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(a,f))return a=a.end(a.length-1),this.logger_("Fell out of live window at time "+f+". Seeking to "+("live point (seekable end) "+a)),this.cancelTimer_(),this.seekTo(a),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0;var m=this.tech_.buffered();a=Ji(m,f);return this.videoUnderflow_(a,m,f)?(this.cancelTimer_(),this.seekTo(f),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),
!0):0<a.length?(m=a.start(0)-f,this.logger_("Stopped at "+f+", setting timer for "+m+", seeking "+("to "+a.start(0))),this.timer_=setTimeout(this.skipTheGap_.bind(this),1E3*m,f),!0):!1}},{key:"afterSeekableWindow_",value:function(a,f){return a.length?f>a.end(a.length-1)+ob?!0:!1:!1}},{key:"beforeSeekableWindow_",value:function(a,f){return a.length&&0<a.start(0)&&f<a.start(0)-ob?!0:!1}},{key:"videoUnderflow_",value:function(a,f,m){return 0===a.length&&(a=this.gapFromVideoUnderflow_(f,m))?(this.logger_("Encountered a gap in video from "+
a.start+" to "+a.end+". "+("Seeking to current time "+m)),!0):!1}},{key:"skipTheGap_",value:function(a){var f=this.tech_.buffered(),m=this.tech_.currentTime();f=Ji(f,m);this.cancelTimer_();0!==f.length&&m===a&&(this.logger_("skipTheGap_:","currentTime:",m,"scheduled currentTime:",a,"nextRange start:",f.start(0)),this.seekTo(f.start(0)+Kb),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(a,f){if(2>a.length)var h=r.createTimeRanges();else{h=[];for(var n=
1;n<a.length;n++){var p=a.end(n-1),q=a.start(n);h.push([p,q])}h=r.createTimeRanges(h)}for(n=0;n<h.length;n++)if(p=h.start(n),q=h.end(n),4>f-p&&2<f-p)return{start:p,end:q};return null}}]);return f}(),Tm={errorInterval:30,getSource:function(f){var a=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_;return f(a)}},Um=function m(a,h){var n=0,p=0,q=r.mergeOptions(Tm,h);a.ready(function(){a.trigger({type:"usage",name:"hls-error-reload-initialized"})});var t=function(){p&&a.currentTime(p)},v=function(h){null!==
h&&void 0!==h&&(p=Infinity!==a.duration()&&a.currentTime()||0,a.one("loadedmetadata",t),a.src(h),a.trigger({type:"usage",name:"hls-error-reload"}),a.play())},w=function(){if(Date.now()-n<1E3*q.errorInterval)a.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(q.getSource&&"function"===typeof q.getSource)return n=Date.now(),q.getSource.call(a,v);r.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},x=function B(){a.off("loadedmetadata",t);a.off("error",
w);a.off("dispose",B)};a.on("error",w);a.on("dispose",x);a.reloadSourceOnError=function(h){x();m(a,h)}},bj=function(a){Um(this,a)};r.use("*",function(a){return{setSource:function(a,m){m(null,a)},setCurrentTime:function(h){a.vhs&&a.currentSource().src===a.vhs.source_.src&&a.vhs.setCurrentTime(h);return h}}});var Q={PlaylistLoader:md,Playlist:sa,Decrypter:Ll,AsyncStream:ri,decrypt:si,utils:Xl,STANDARD_PLAYLIST_SELECTOR:function(){return um(this.playlists.master,this.systemBandwidth,parseInt(Wi(this.tech_.el(),
"width"),10),parseInt(Wi(this.tech_.el(),"height"),10))},INITIAL_PLAYLIST_SELECTOR:function(){var a=this.playlists.master.playlists.filter(sa.isEnabled);Bc(a,function(a,m){return kf(a,m)});return a.filter(function(a){return yc(a.attributes.CODECS).videoCodec})[0]||null},comparePlaylistBandwidth:kf,comparePlaylistResolution:function(a,h){var m=void 0,n=void 0;a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width&&(m=a.attributes.RESOLUTION.width);m=m||q.Number.MAX_VALUE;h.attributes.RESOLUTION&&h.attributes.RESOLUTION.width&&
(n=h.attributes.RESOLUTION.width);n=n||q.Number.MAX_VALUE;return m===n&&a.attributes.BANDWIDTH&&h.attributes.BANDWIDTH?a.attributes.BANDWIDTH-h.attributes.BANDWIDTH:m-n},xhr:Ei()};"GOAL_BUFFER_LENGTH MAX_GOAL_BUFFER_LENGTH GOAL_BUFFER_LENGTH_RATE BUFFER_LOW_WATER_LINE MAX_BUFFER_LOW_WATER_LINE BUFFER_LOW_WATER_LINE_RATE BANDWIDTH_VARIANCE".split(" ").forEach(function(a){Object.defineProperty(Q,a,{get:function(){r.log.warn("using Hls."+a+" is UNSAFE be sure you know what you are doing");return Ca[a]},
set:function(h){r.log.warn("using Hls."+a+" is UNSAFE be sure you know what you are doing");"number"!==typeof h||0>h?r.log.warn("value of Hls."+a+" must be greater than or equal to 0"):Ca[a]=h}})});var cj=function(a){return/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(a)?"hls":/^application\/dash\+xml/i.test(a)?"dash":null},dj=function(a,h){for(var m=h.media(),n=-1,p=0;p<a.length;p++)if(a[p].id===m.uri){n=p;break}a.selectedIndex_=n;a.trigger({selectedIndex:n,type:"change"})},Vm=function(a,
h){h.representations().forEach(function(h){a.addQualityLevel(h)});dj(a,h.playlists)};Q.canPlaySource=function(){return r.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};Q.supportsNativeHls=function(){var a=x.createElement("video");return r.getTech("Html5").isSupported()?"application/vnd.apple.mpegurl audio/mpegurl audio/x-mpegurl application/x-mpegurl video/x-mpegurl video/mpegurl application/mpegurl".split(" ").some(function(h){return/maybe|probably/i.test(a.canPlayType(h))}):
!1}();var Wm=r.getTech("Html5").isSupported()?/maybe|probably/i.test(x.createElement("video").canPlayType("application/dash+xml")):!1;Q.supportsNativeDash=Wm;Q.supportsTypeNatively=function(a){return"hls"===a?Q.supportsNativeHls:"dash"===a?Q.supportsNativeDash:!1};Q.isSupported=function(){return r.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var ej=function(a){function h(a,n,p){Aa(this,h);var m=La(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,n,p.hls));
n.options_&&n.options_.playerId&&(p=r(n.options_.playerId),p.hasOwnProperty("hls")||Object.defineProperty(p,"hls",{get:function(){r.log.warn("player.hls is deprecated. Use player.tech().hls instead.");n.trigger({type:"usage",name:"hls-player-access"});return m}}),p.vhs=m,p.dash=m);m.tech_=n;m.source_=a;m.stats={};m.setOptions_();if(m.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(m.options_.overrideNative&&
(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");m.on(x,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(a){(a=x.fullscreenElement||x.webkitFullscreenElement||x.mozFullScreenElement||x.msFullscreenElement)&&a.contains(m.tech_.el())&&m.masterPlaylistController_.smoothQualityChange_()});m.on(m.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()});
m.on(m.tech_,"play",m.play);return m}Ka(h,a);Ba(h,[{key:"setOptions_",value:function(){var a=this;this.options_.withCredentials=this.options_.withCredentials||!1;"number"!==typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300);"number"!==typeof this.options_.bandwidth&&(this.options_.bandwidth=4194304);this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&4194304===this.options_.bandwidth;["withCredentials","bandwidth"].forEach(function(h){"undefined"!==
typeof a.source_[h]&&(a.options_[h]=a.source_[h])});this.bandwidth=this.options_.bandwidth}},{key:"src",value:function(a,h){var m=this;a&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=Q,this.options_.sourceType=cj(h),this.options_.seekTo=function(a){m.tech_.setCurrentTime(a);m.setCurrentTime(a)},this.masterPlaylistController_=new Om(this.options_),this.playbackWatcher_=new Sm(r.mergeOptions(this.options_,{seekable:function(){return m.seekable()}})),
this.masterPlaylistController_.on("error",function(){r.players[m.tech_.options_.playerId].error(m.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):Q.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Q.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,
{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(a){this.masterPlaylistController_.selectPlaylist=a.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(a){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=a;this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},
set:function(a){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=a;this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(0<this.throughput?1/this.throughput:0)))},set:function(){r.log.error('The "systemBandwidth" property is read-only')}}}),Object.defineProperties(this.stats,{bandwidth:{get:function(){return m.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return m.masterPlaylistController_.mediaRequests_()||
0},enumerable:!0},mediaRequestsAborted:{get:function(){return m.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return m.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return m.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return m.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return m.masterPlaylistController_.mediaBytesTransferred_()||
0},enumerable:!0},mediaSecondsLoaded:{get:function(){return m.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return Ki(m.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return m.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return m.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return m.tech_.name_},enumerable:!0},duration:{get:function(){return m.tech_.duration()},enumerable:!0},master:{get:function(){return m.playlists.master},
enumerable:!0},playerDimensions:{get:function(){return m.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Ki(m.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return m.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.masterPlaylistController_.on("selectedinitialmedia",function(){Rm(m);
if("dash"===m.options_.sourceType){var a=r.players[m.tech_.options_.playerId];if(a.eme){var h=m.source_.keySystems;var n=m.playlists.media(),p=m.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media();if(h){var q={},v;for(v in h)q[v]={audioContentType:'audio/mp4; codecs="'+p.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+n.attributes.CODECS+'"'},n.contentProtection&&n.contentProtection[v]&&n.contentProtection[v].pssh&&(q[v].pssh=n.contentProtection[v].pssh),"string"===
typeof h[v]&&(q[v].url=h[v]);h=r.mergeOptions(h,q)}h&&(a.currentSource().keySystems=h)}}}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.tech_.ready(function(){return m.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(r.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var a=this,h=r.players[this.tech_.options_.playerId];h&&h.qualityLevels&&(this.qualityLevels_=h.qualityLevels(),
this.masterPlaylistController_.on("selectedinitialmedia",function(){Vm(a.qualityLevels_,a)}),this.playlists.on("mediachange",function(){dj(a.qualityLevels_,a.playlists)}))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(a){this.masterPlaylistController_.setCurrentTime(a)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},
{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose();this.masterPlaylistController_&&this.masterPlaylistController_.dispose();this.qualityLevels_&&this.qualityLevels_.dispose();Ml(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"dispose",this).call(this)}}]);return h}(r.getComponent("Component")),mf={name:"videojs-http-streaming",VERSION:"1.2.4",canHandleSource:function(a){var h=r.mergeOptions(r.options,1<arguments.length&&void 0!==arguments[1]?arguments[1]:
{});return mf.canPlayType(a.type,h)},handleSource:function(a,h){var m=r.mergeOptions(r.options,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{});h.hls=new ej(a,h,m);h.hls.xhr=Ei();h.hls.src(a.src,a.type);return h.hls},canPlayType:function(a){var h=r.mergeOptions(r.options,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).hls.overrideNative,m=cj(a);return!m||Q.supportsTypeNatively(m)&&!h?"":"maybe"}};if("undefined"===typeof r.MediaSource||"undefined"===typeof r.URL)r.MediaSource=
zc,r.URL=Si;zc.supportsNativeMediaSources()&&r.getTech("Html5").registerSourceHandler(mf,0);r.HlsHandler=ej;r.HlsSourceHandler=mf;r.Hls=Q;r.use||r.registerComponent("Hls",Q);r.options.hls=r.options.hls||{};r.registerPlugin?r.registerPlugin("reloadSourceOnError",bj):r.plugin("reloadSourceOnError",bj);return r});
/**HLS library**/
window.Hls||(window.Hls=Hls);
function Html5HlsJS(a,c){function f(){var e=null,b=null;return function(){var a=Date.now();!e||2E3<a-e?(e=a,hls.recoverMediaError()):!b||2E3<a-b?(b=a,hls.swapAudioCodec(),hls.recoverMediaError()):console.error("Error loading media: File could not be played")}}var k=c.options_,d=c.el(),g=null,h=null;hls=this.hls=new Hls(k.hlsjsConfig);l=f();m=f();d.addEventListener("error",function(a){(a=a.currentTarget.error)&&(a.code===a.MEDIA_ERR_DECODE?m():console.error("Error loading media: File could not be played"))});this.dispose=
function(){hls.destroy()};this.duration=function(){return g||d.duration||0};this.hlsdata=function(){return h};hls.on(Hls.Events.LEVEL_LOADED,function(a,b){h=b.details;g=b.details.live?Infinity:b.details.totalduration});hls.on(Hls.Events.ERROR,function(a,b){console.log("source-error---\x3e",hls.media,a,b);try{errorVODLog(videojs.getPlayer(hls.media.playerId),33)}catch(n){}if(b.fatal)switch(b.type){case Hls.ErrorTypes.NETWORK_ERROR:hls.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:l();break;default:console.error("Error loading media: File could not be played")}});
Object.keys(Hls.Events).forEach(function(a){var b=Hls.Events[a];hls.on(b,function(a,d){c.trigger(b,d)})});c.featuresNativeTextTracks||(Object.defineProperty(d,"textTracks",{value:c.textTracks,writable:!1}),d.addTextTrack=function(){return c.addTextTrack.apply(c,arguments)});hls.attachMedia(d);hls.loadSource(a.src)}
var hlsTypeRE=/^application\/(x-mpegURL|vnd\.apple\.mpegURL)$/i,hlsExtRE=/\.m3u8/i,HlsSourceHandler={canHandleSource:function(a){return a.skipContribHlsJs?"":hlsTypeRE.test(a.type)?"probably":hlsExtRE.test(a.src)?"maybe":""},handleSource:function(a,c){return new Html5HlsJS(a,c)},canPlayType:function(a){return hlsTypeRE.test(a)?"probably":""}};
if(Hls.isSupported()){var videojs=videojs&&videojs["default"]||videojs;if(videojs){var html5Tech=videojs.getTech&&videojs.getTech("Html5");(html5Tech=html5Tech||videojs.getComponent&&videojs.getComponent("Html5"))&&html5Tech.registerSourceHandler(HlsSourceHandler,0)}else console.warn("videojs-contrib-hls.js: Couldn't find find window.videojs nor require('video.js')")};
function fadeVolume(a,c,d,g){var b=0==d?c:0,f=.5<c?c/20:c/10;1==d&&(a.muted(!1),a.volume(b));a.fvInt&&clearInterval(a.fvInt);a.fvInt=setInterval(function(){b=0==d?Math.max(0,b-f):Math.min(c,b+f);a.volume(b);document.getElementById(a.id().replace("media-video-","").replace("_html5_api","")+"_soundTopRight")&&(document.getElementById(a.id().replace("media-video-","").replace("_html5_api","")+"_soundTopRight").style.opacity=1,document.getElementById(a.id().replace("media-video-","").replace("_html5_api",
"")+"_soundTopRight").innerHTML="\u00c2m l\u01b0\u1ee3ng "+parseInt(100*b)+"%");if(0==d&&0==b||1==d&&b==c)return clearInterval(a.fvInt),0==d&&(a.muted(!0),a.lastVolume_(c)),document.getElementById(a.id().replace("media-video-","").replace("_html5_api","")+"_soundTopRight")&&(document.getElementById(a.id().replace("media-video-","").replace("_html5_api","")+"_soundTopRight").style.opacity=0,document.getElementById(a.id().replace("media-video-","").replace("_html5_api","")+"_soundTopRight").innerHTML=
"\u00c2m l\u01b0\u1ee3ng "+parseInt(100*b)+"%"),"function"==typeof g&&g(a),!1},100)};
const init=e=>{const t=document.querySelectorAll(".box_embed_video_lightbox");if(t.length>0){let e=0;document.querySelector('meta[name="tt_page_type_new"]')&&"3"==document.querySelector('meta[name="tt_page_type_new"]').getAttribute("content")&&(e=parseInt(document.querySelector('meta[name="tt_article_id"]').getAttribute("content")));for(let i of t)i.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation();const a=+i.getAttribute("data-vid"),o=+i.getAttribute("data-current-time"),n='<div class="error-mess">Có lỗi xẩy ra, vui lòng thử lại sau.</div>';if("object"!=typeof $.magnificPopup)return!1;$.magnificPopup.open({items:{src:`\n                        <div id="popup-video-${a}" class="white-popup popup-video">\n                            <div class="inner-popup">\n                                <div class="content-popup clearfix">\n                                    <div class="width_common wrap-video-lightbox">\n                                        <div class="thumb thumb-video thumb-16x9">\n                                            <div class="circle-loading"></div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        `,type:"inline",midClick:!0,mainClass:"mfp-with-zoom",fixedContentPos:!1,fixedBgPos:!0,overflowY:"auto",closeBtnInside:!0,preloader:!1,removalDelay:300},callbacks:{open:t=>{const d=new XMLHttpRequest;d.open("GET","https://vnexpress.net/microservice/videoparser/aid/"+(e||i.getAttribute("data-articleoriginal"))+"/vid/"+a,!0),d.onload=function(){if(this.status>=200&&this.status<400)try{const e=document.querySelector("#popup-video-"+a+" .wrap-video-lightbox .thumb-video"),t=JSON.parse(this.response);if(void 0!==t.data&&(e.innerHTML=t.data,setTimeout((e=>{Video.init(),Video.playVideo(a)}),10),o>0)){let e=setInterval((t=>{void 0!==Video.vodIns[a]&&(clearInterval(e),Video.vodIns[a].currentTime(o))}),100);setTimeout((t=>{clearInterval(e)}),5e3)}}catch(e){v.innerHTML=n}else v.innerHTML=n},d.onerror=function(){v.innerHTML=n},d.send()},beforeClose:e=>{document.querySelector('.box_embed_video_lightbox[data-vid="'+a+'"]').setAttribute("data-current-time",Video.vodIns[a].currentTime())},afterClose:e=>{Video.vodIns[a].dispose(),delete Video.vodIns[a]}}})}))}};init();var log_url="https://l-saas.vnecdn.net";if(void 0===isHome)var isHome="undefined"!=typeof PAGE_FOLDER&&1e6==PAGE_FOLDER;if(1==isHome)var cycle=setInterval((function(){var e=document.querySelector(".wrap_video");if(null!=e){var t=e.getAttribute("data-article-id"),i=e.getAttribute("data-share-url");void 0!==Video.articleId&&(Video.articleId=t),void 0!==Video.articleId&&(Video.articleUrl=i),clearInterval(cycle)}}),100);var Video={playerArr:{},parentContainer:{},suggestionData:{},videoUrl:window.location.host.indexOf("ngoisao.vnexpress.net")>-1?"https://video.ngoisao.vnexpress.net":(-1!=window.location.hostname.indexOf("demo-")||-1!=window.location.hostname.indexOf("seo.")?"https://demo-":"https://")+"video.vnexpress.net",articleId:1==isHome&&"undefined"!=typeof ARID?ARID:document.querySelector('meta[name="tt_article_id"]').getAttribute("content"),articleUrl:1==isHome&&"undefined"!=typeof ARSU?ARSU:document.querySelector('link[rel="canonical"]')?document.querySelector('link[rel="canonical"]').getAttribute("href"):window.location.href,adsVideoId:0,suggestionVideoId:0,loadAdPlugin:!1,subtileVideoIdArr:[],isMobile:{Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return this.Android()||this.BlackBerry()||this.iOS()||this.Opera()||this.Windows()}},isHtml5Support:function(){return!0},isFlash:function(){return!1},getDataAttributes:function(e){var t={};return[].forEach.call(e.attributes,(function(e){if(/^data-/.test(e.name)){var i=e.name.substr(5).replace(/-(.)/g,(function(e,t){return t.toUpperCase()}));t[i]=e.value}})),t},_fbAppID:"1547540628876392",_forceMute:!1,urlencode:function(e){return e=(e+"").toString(),encodeURIComponent(e).replace(/#!/g,"%23").replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},shareFB:function(e){var t=document.getElementById("video_parent_"+e);if(t){var i="https://video.vnexpress.net/embed/v_"+e,a=t.querySelector(".box_img_video img").getAttribute("src"),o=t.querySelector(".box_img_video img").getAttribute("alt"),n="https://facebook.com/sharer/sharer.php?u="+this.urlencode(i)+"&p[images][0]="+a+"&t="+o;window.open(n,"_blank","menubar=no,toolbar=no,resizable=no,scrollbars=no,height=450,width=710")}},shareTW:function(e){var t=document.getElementById("video_parent_"+e);if(t){var i="https://video.vnexpress.net/embed/v_"+e,a=t.querySelector(".box_img_video img").getAttribute("alt"),o="https://twitter.com/intent/tweet?source=webclient&url="+this.urlencode(i)+"&text="+a;window.open(o,"_blank","menubar=no,toolbar=no,resizable=no,scrollbars=no,height=450,width=710")}},copyLink:function(e){var t=document.getElementById("embed_video_"+e);if(t){var i="https://video.vnexpress.net/embed/v_"+e,a=document.createElement("input");a.setAttribute("style","opacity:0"),document.body.appendChild(a),a.value=i,a.select(),document.execCommand("copy"),a.remove();var o=t.querySelector(".tip");o.style.display="block",setTimeout((function(){o.style.display="none"}),500);try{navigator.clipboard.writeText(i)}catch(e){}}},initShare:function(e){if("undefined"!=typeof PAGE_DETAIL&&1==PAGE_DETAIL&&"undefined"!=typeof article_type&&8!=article_type&&("demo.vnexpress.net"==location.hostname||"vnexpress.net"==location.hostname)){var t=document.getElementById("video_parent_"+e).querySelector(".share-hover"),i=document.getElementById("embed_video_"+e);if(!t&&i)try{var a=document.createElement("div");a.className="share-hover",a.innerHTML=`<a href="javascript:;" onclick="Video.shareFB(${e});" class="share-item">\n\t\t\t\t\t\t\t\t\t\t\t\t<svg class="ic ic-face">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<use xlink:href="#Facebook"></use>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t<a href="javascript:;" onclick="Video.shareTW(${e});" class="share-item">\n\t\t\t\t\t\t\t\t\t\t\t\t<svg class="ic ic-twit">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<use xlink:href="#Twitter"></use>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t<a href="javascript:;" onclick="Video.copyLink(${e});" class="share-item">\n\t\t\t\t\t\t\t\t\t\t\t\t<svg class="ic ic-link">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<use xlink:href="#Link"></use>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="tip" style="display:none;">Copy link thành công</span>\n\t\t\t\t\t\t\t\t\t\t\t</a>`;var o=i.querySelector(".video-js");o?o.appendChild(a):i.querySelector(".embed-container").appendChild(a)}catch(e){}}},showShare:function(e){if(-1!=e.indexOf("video_parent_"))var t=e.replace("video_parent_","");else t=e.replace("media-video-","");var i=document.getElementById("video_parent_"+t).querySelector(".share-hover");i&&(i.style.display="flex")},hideShare:function(e){if(-1!=e.indexOf("video_parent_"))var t=e.replace("video_parent_","");else t=e.replace("media-video-","");var i=document.getElementById("video_parent_"+t).querySelector(".share-hover");i&&(i.style.display="none")},initDOM:function(e){void 0===e&&(e=0);var t=this,i=document.getElementsByClassName("embed_video_new");if(i.length>0){for(var a=0;a<i.length;a++){var o=i[a],n=t.getDataAttributes(o);if(void 0!==n.vid){void 0!==t.parentContainer[n.vid]||t.parentContainer[n.vid]||(t.parentContainer[n.vid]=o);var d=o.getAttribute("data-ratio");if(d=parseInt(d),void 0===n.initdom||1!=n.initdom||1==e)if(o.setAttribute("data-initdom",1),5==n.type){var r=document.getElementById("video_parent_"+n.vid);img_video=r.querySelector(".box_img_video img");var s=9*(l=o.clientWidth)/16;2==d&&(s=4*l/5),void 0!==n.fixheight&&1==n.fixheight&&document.getElementById("parent_fix_height_"+n.vid)&&(s=document.getElementById("parent_fix_height_"+n.vid).offsetHeight),(v=document.getElementById("video-"+n.vid)).style.width="100%",v.style.height=s+"px",img_video&&"object"==typeof img_video&&(img_video.style.height=s+"px")}else if(0!=n.type&&4!=n.type)void 0!==n.initdom&&1==n.initdom||t.trackingDataPlayer("video_parent_"+n.vid,"videoStart","","0%","");else{r=document.getElementById("video_parent_"+n.vid);img_video=r.querySelector(".box_img_video img");var l=o.clientWidth;if("undefined"!=typeof PAGE_DETAIL&&1==PAGE_DETAIL){var c=document.querySelector("meta[name=tt_site_id]"),g=document.querySelector(".detailCT .text_live");if(null==g){if(g=document.querySelector(".detailCT"),null!=c&&null!=g){var u=c.getAttribute("content");null!=u&&1002835==u&&(l=g.clientWidth)}}else l=r.clientWidth}var v;s=9*l/16;2==d&&(s=4*l/5),void 0!==n.fixheight&&1==n.fixheight&&document.getElementById("parent_fix_height_"+n.vid)&&(s=document.getElementById("parent_fix_height_"+n.vid).offsetHeight),(v=document.getElementById("video-"+n.vid)).style.width="100%",v.style.height=s+"px";var p=document.getElementById("parser_player_"+n.vid);p.style.height=s+"px",p.style.textAlign="left";var m=document.getElementById("flash_player_"+n.vid);m&&(m.style.height=s+"px"),img_video&&"object"==typeof img_video&&(img_video.style.height=s+"px")}}}void 0!==n.initdom&&1==n.initdom&&1!=e||void 0!==Video&&Video.init()}},scriptLoaded:!1,vodIns:[],checkPlayMp4:function(e){return!1},getVODLink:function(e){if(this.checkPlayMp4(e.getAttribute("src")))return e.getAttribute("src").replace("240p","").replace("360p","").replace("480p","").replace(/,/gi,"").replace("mp4//","mp4/").replace("/vne/master.m3u8",".mp4").replace("/index-v1-a1.m3u8",".mp4").replace("d.vnecdn.net","v.vnecdn.net").replace("d1.vnecdn.net","v.vnecdn.net").replace("/video/video/","/video/");var t="",i=parseInt(localStorage.getItem("lbw")?localStorage.getItem("lbw"):"-1"),a=e.getAttribute("src").replace("240p","").replace("360p","").replace("480p","").replace(/,/gi,"").replace("mp4//","mp4/").replace("/vne/master.m3u8","/seg-").replace("/index-v1-a1.m3u8","/seg-"),o=e.getAttribute("data-mode").split("|"),n={240:o.indexOf("240")>=0?"240"==e.getAttribute("max-mode")?a:a.replace("/mp4/","/mp4/240p/"):"",360:o.indexOf("360")>=0?"360"==e.getAttribute("max-mode")?a:a.replace("/mp4/","/mp4/360p/"):"",480:o.indexOf("480")>=0?"480"==e.getAttribute("max-mode")?a:a.replace("/mp4/","/mp4/480p/"):"",720:o.indexOf("720")>=0?"720"==e.getAttribute("max-mode")?a:a.replace("/mp4/","/mp4/720p/"):""};if(i<0||Video.isMobile.any())""!=n[240]?t=n[240]:""!=n[360]?t=n[360]:""!=n[480]?t=n[480]:""!=n[720]&&(t=n[720]);else{var d=0;d=i>=3268107.6?720:i>=1476148*1.2?480:i>=1090788?360:240;var r=!1;""!=n[d=240]||(Object.keys(n).forEach((function(e){r||parseInt(e)<d&&""!=n[e]&&(r=!0,d=parseInt(e))})),""==n[d]&&(r=!1,Object.keys(n).forEach((function(e){r||parseInt(e)>d&&""!=n[e]&&(r=!0,d=parseInt(e))})))),t=n[d]}return null!=t&&""!=t&&addPreloadLink(t+="1-v1-a1.ts"),e.getAttribute("src")},subIns:{},getSubs:function(e){var t=this,i="//vnexpress.net/detail/subtitle/vids/";window.location.hostname.indexOf("demo-")>-1&&(i="//demo-vne.vnexpress.net/detail/subtitle/vids/"),e=i+e;var a=new XMLHttpRequest;a.responseType="json",a.onreadystatechange=function(e){4==a.readyState&&200==a.status&&(t.subIns=a.response)},a.open("GET",e,!0),a.send(null)},init:function(){var e=this,t=0,i=setInterval((function(){if("function"==typeof videojs&&"undefined"!=typeof isScriptLoaded&&1==isScriptLoaded){++t>20&&clearInterval(i),videojs.addLanguage("vi",{Play:"Xem",Pause:"Dừng","Current Time":"Hiện tại",Duration:"Thời lượng","Remaining Time":"Thời lượng còn lại","Stream Type":"Stream Type",LIVE:"LIVE",Loaded:"Đã tải",Progress:"Tiến trình",Fullscreen:"Toàn màn hình","Non-Fullscreen":"Thu nhỏ",Mute:"Tắt tiếng",Unmute:"Bỏ tắt tiếng","Playback Rate":"Tỷ lệ phát lại",Subtitles:"Bật phụ đề","Subtitles off":"Tắt phụ đề",Captions:"Chú thích","captions off":"Tắt chú thích",Chapters:"Chương mục","Close Modal Dialog":"Close Modal Dialog","You aborted the video playback":"Đã hủy phát lại video","A network error caused the video download to fail part-way.":"Lỗi mạng khiến tải xuống video không thành công.","The video could not be loaded, either because the server or network failed or because the format is not supported.":"Không thể tải video vì máy chủ hoặc mạng không thành công hoặc do định dạng không được hỗ trợ.","The video playback was aborted due to a corruption problem or because the video used features your browser did not support.":"Phát lại video đã bị hủy do sự cố tham nhũng hoặc do video được sử dụng các tính năng mà trình duyệt của bạn không hỗ trợ.","No compatible source was found for this video.":"Không tìm thấy nguồn tương thích cho video này.","No compatible source was found for this media.":"Không tìm thấy nguồn tương thích cho video này."});var a=document.querySelectorAll(".embed_video_new video[preload=auto], .embed_video_new iframe");if(a.length>0){clearInterval(i),e.initDOM();for(var o=[],n="undefined"!=typeof SITE_ID&&1003888==SITE_ID||"undefined"!=typeof ZONE_ADS&&1==ZONE_ADS?"en":"vi",d=0;d<a.length;d++){var r=a[d];try{var s=r.getAttribute("id");if(null==s||s.indexOf("media-video")<0)continue;var l=s.replace("media-video-","").replace("_html5_api","");if(void 0===e.vodIns[l]){1==r.getAttribute("data-subtitle")&&o.push(l),r.controls=!0;var c=e.getVODLink(r);if(void 0!==c&&c){var g={subsCapsButton:1==r.getAttribute("data-subtitle"),volumePanel:{inline:!1},remainingTimeDisplay:!1};1==r.getAttribute("data-isintro")&&(g.playToggle=!1,g.currentTimeDisplay=!1,g.timeDivider=!1,g.durationDisplay=!1,g.progressControl=!1,g.customControlSpacer=!1,g.playbackRateMenuButton=!1,g.fullscreenToggle=!1,!1),r.setAttribute("class","video-js vjs-default-skin"),e.vodIns[l]=videojs(s,{language:n,html5:{nativeTextTracks:!1,hls:{withCredentials:!1},hlsjsConfig:{maxMaxBufferLength:isHome||"undefined"!=typeof preloadTSLimit&&1==preloadTSLimit?8:60,abrEwmaDefaultEstimate:3145728,capLevelToPlayerSize:!0}},autoplay:!1,resizeManager:!navigator.userAgent.match(/Firefox|Edge|MSIE|Trident/i),controlBar:g}),e.vodIns[l].pid=(new Date).getTime()+Math.floor(1e5*Math.random()),e.vodIns[l].timestartinit=(new Date).getTime(),e.vodIns[l].videoLogging={},e.vodIns[l].videoLogging.start=!1,e.vodIns[l].videoLogging.firstPlay=!1,e.vodIns[l].videoLogging.canplay=!1,e.vodIns[l].videoLogging.loadedmetadata=!1,e.vodIns[l].videoLogging.tracking_every_5percent=[],e.vodIns[l].videoLogging.firstQuartile=!1,e.vodIns[l].videoLogging.midpoint=!1,e.vodIns[l].videoLogging.thirdQuartile=!1,e.vodIns[l].videoLogging.complete=!1,e.vodIns[l].videoLogging.initAd=!1,e.vodIns[l].videoLogging.callSuggesion=!1,e.vodIns[l].videoLogging.addedSub=!1,e.vodIns[l].rtv=(new Date).getTime(),e.vodIns[l].timeWatching=0,e.vodIns[l].adsConfig=document.getElementById(s).getAttribute("adsconfig"),e.vodIns[l].adsTag=document.getElementById(s).getAttribute("ads"),e.vodIns[l].pInterval=null,e.vodIns[l].stopBuff=!1,e.vodIns[l].firstBuff=!0,e.vodIns[l].maxMaxBufferLengthVal=20,e.vodIns[l].maxMaxBufferLengthMinVal=4,e.vodIns[l].maxMaxBufferLengthMaxVal=12,e.vodIns[l].maxMode=e.vodIns[l].getAttribute("max-mode")?parseInt(e.vodIns[l].getAttribute("max-mode")):360,e.vodIns[l].player_.subShowing=!1,e.vodIns[l].player_.waitingTimeout=null,e.vodIns[l].src({type:c.indexOf(".m3u8")>0?"application/x-mpegURL":"video/mp4",src:c}),e.vodIns[l].on("ready",(function(t){if(0==e.loadAdPlugin){e.loadAdPlugin=!0;var i=document.createElement("script");i.type="text/javascript",i.src="https://imasdk.googleapis.com/js/sdkloader/ima3.js",i.onload=function(){e.scriptLoaded=!0},i.onerror=function(){console.log("ima fail or adblock!!!")},document.getElementsByTagName("head")[0].appendChild(i)}document.getElementById(this.id()).appendChild(createDiv(this.id().replace("media-video-","").replace("_html5_api","")+"_moaContainer","","position: absolute; top: 0px; left: 0px; width: 1px; height: 1px; display: none; background-color: transparent;padding-top:0;")),document.getElementById(this.id()).appendChild(createDiv(this.id().replace("media-video-","").replace("_html5_api","")+"_moaContainer2","","position: absolute; top: 0px; left: 0px; width: 1px; height: 1px; display: none; background-color: transparent;padding-top:0;")),document.getElementById(this.id()).appendChild(createDiv(this.id().replace("media-video-","").replace("_html5_api","")+"_soundTopRight","fp-sound-status-container","")),null!=Video.getStorage("fp-vlt")&&-1!=Video.getStorage("fp-vlt")&&(new Date).getTime()-parseInt(Video.getStorage("fp-vlt"))<144e5?this.volume(null!=Video.getStorage("fp-volume")&&-1!=Video.getStorage("fp-volume")?Math.max(0,Math.min(1,Video.getStorage("fp-volume"))):.5):this.volume(.5),this.lastVolume_(this.volume()),this.check3s=setTimeout(function(){0==this.videoLogging.canplay&&videoVODLog(this,"canplayover3s",(new Date).getTime()-this.timestartinit)}.bind(this),3e3)})),e.vodIns[l].on("loadedmetadata",(function(t){var i=t.target.id.replace("media-video-","").replace("_html5_api","");0==e.vodIns[i].videoLogging.loadedmetadata&&(e.vodIns[i].videoLogging.loadedmetadata=!0,videoVODLog(e.vodIns[i],"loadedmetadata",(new Date).getTime()-e.vodIns[i].timestartinit))})),e.vodIns[l].on("canplay",(function(t){var i=t.target.id.replace("media-video-","").replace("_html5_api","");0==e.vodIns[i].videoLogging.canplay&&(e.vodIns[i].videoLogging.canplay=!0,videoVODLog(e.vodIns[i],"canplay",(new Date).getTime()-e.vodIns[i].timestartinit))})),e.vodIns[l].on("canplaythrough",(function(t){var i=t.target.id.replace("media-video-","").replace("_html5_api","");0==e.vodIns[i].videoLogging.canplay&&(e.vodIns[i].videoLogging.canplay=!0,videoVODLog(e.vodIns[i],"canplay",(new Date).getTime()-e.vodIns[i].timestartinit))})),e.vodIns[l].on("volumechange",(function(){Video.setStorage("fp-mute",this.muted()),Video.setStorage("fp-volume",this.muted()?this.lastVolume_():this.volume()),Video.setStorage("fp-vlt",(new Date).getTime())})),e.vodIns[l].on("play",(function(t){void 0!==this.firstplay&&1==this.firstplay&&(null!=Video.getStorage("fp-vlt")&&-1!=Video.getStorage("fp-vlt")&&(new Date).getTime()-parseInt(Video.getStorage("fp-vlt"))<144e5?this.volume(null!=Video.getStorage("fp-volume")&&-1!=Video.getStorage("fp-volume")?Math.max(0,Math.min(1,Video.getStorage("fp-volume"))):.5):this.volume(.5));var i=t.target.id.replace("media-video-","").replace("_html5_api","");void 0!==i&&i&&(e.pauseOtherPlayer("media-video-"+i),e.scriptLoaded&&null==e.vodIns[i].ads&&(null!=e.vodIns[i].adsConfig&&""!=e.vodIns[i].adsConfig?(e.vodIns[i].ads=new AdObject(e.vodIns[i],i+"_moaContainer",i+"_moaContainer2",e.vodIns[i].adsConfig,0),e.vodIns[i].ads.initIMA()):null!=e.vodIns[i].adsTag&&""!=e.vodIns[i].adsTag&&(e.vodIns[i].ads=new AdObject(e.vodIns[i],i+"_moaContainer",i+"_moaContainer2",e.vodIns[i].adsTag,1),e.vodIns[i].ads.initIMA())),e.vodIns[i].rtv=(new Date).getTime())})),e.vodIns[l].on("waiting",(function(t){var i=t.target.id.replace("media-video-","").replace("_html5_api","");void 0!==i&&i&&(e.vodIns[i].rtv=(new Date).getTime());try{this.seeking()||videoVODLog2(this,"ts","waiting",0,hls.abrController.fragCurrent.url)}catch(e){console.log(e)}clearTimeout(this.waitingTimeout),this.waitingTimeout=setTimeout(function(){videoVODLog(this,"waiting",isNaN(this.currentTime())?0:this.currentTime())}.bind(this),5e3)})),e.vodIns[l].on("error",(function(e){if(errorVODLog(this,this.error().code),this.src().indexOf(".mp4")>0)if(this.modeList&&this.modeList.length>0){(a=this.modeList.indexOf(this.src()))>=0&&(this.retryMode[a]=!0);for(var t=this.modeList.length-1;t>=0;t--)if(0==this.retryMode[t]&&""!=this.modeList[t]){this.retryMode[t]=!0,this.src({type:"video/mp4",src:this.modeList[t]});break}}else{this.modeList=document.getElementById(this.id()).getAttribute("data-mode").split("|"),this.retryMode=[],document.getElementById(this.id()).getAttribute("max-mode")!=this.modeList[this.modeList.length-1]?this.modeList[this.modeList.length-1]=this.src().replace("/240p/","/").replace("/360p/","/").replace("/480p/","/").replace("/mp4/","/mp4/"+this.modeList[this.modeList.length-1]+"p/"):this.modeList[this.modeList.length-1]=this.src().replace("/240p/","/").replace("/360p/","/").replace("/480p/","/"),this.retryMode[this.modeList.length-1]=!1;for(t=0;t<this.modeList.length-1;t++){var i=this.modeList[t];this.modeList[t]=this.src().replace("/240p/","/").replace("/360p/","/").replace("/480p/","/").replace("/mp4/","/mp4/"+i+"p/"),this.retryMode[t]=!1}var a;(a=this.modeList.indexOf(this.src()))>=0&&(this.retryMode[a]=!0);for(var o=this.modeList.length-1;o>=0;o--)if(0==this.retryMode[o]&&""!=this.modeList[o]){this.retryMode[o]=!0,this.src({type:"video/mp4",src:this.modeList[o]});break}}else if(3==this.error().code){var n=this.videoHeight();n>this.videoWidth()&&(n=this.videoWidth());var d=this.src();d.indexOf("index-v1-a1")>0?(d=d.replace("/240p/","/").replace("/360p/","/").replace("/480p/","/").replace("/index-v1-a1.m3u8",".mp4").replace("d1.vnecdn","v.vnecdn").replace("/video/video/","/video/"),this.src({type:"video/mp4",src:d})):(((d=n==this.maxMode?d.replace(",,",","):d.replace(","+n+"p","")).indexOf("/,/")>=0||d.indexOf("mp4//")>=0)&&(d=d.replace("/,/","/").replace("mp4//","mp4/").replace("vne/master","index-v1-a1")),this.src({type:"application/x-mpegURL",src:d}))}})),e.vodIns[l].on("pause",(function(t){var i=t.target.id.replace("media-video-","").replace("_html5_api","");void 0!==i&&i&&(e.vodIns[i].rtv=(new Date).getTime())})),e.vodIns[l].on("firstplay",(function(t){var i=t.target.id.replace("media-video-","").replace("_html5_api","");void 0!==i&&i&&0==e.vodIns[i].videoLogging.firstPlay&&(e.vodIns[i].videoLogging.firstPlay=!0,e.trackingDataPlayer("media-video-"+i,"videoStart",e.vodIns[i].src(),"0%",((new Date).getTime()-e.vodIns[i].rtv)/1e3,e.vodIns[i].timeWatching),e.vodIns[i].rtv=(new Date).getTime()),this.firstplay=!0,null!=Video.getStorage("fp-vlt")&&-1!=Video.getStorage("fp-vlt")&&(new Date).getTime()-parseInt(Video.getStorage("fp-vlt"))<144e5?this.muted()||"function"!=typeof fadeVolume?this.volume(null!=Video.getStorage("fp-volume")&&-1!=Video.getStorage("fp-volume")?Math.max(0,Math.min(1,Video.getStorage("fp-volume"))):.5):fadeVolume(this,null!=Video.getStorage("fp-volume")&&-1!=Video.getStorage("fp-volume")?Math.max(0,Math.min(1,Video.getStorage("fp-volume"))):.5,1):this.muted()||"function"!=typeof fadeVolume?this.volume(.5):fadeVolume(this,.5,1)})),e.vodIns[l].on("playing",(function(t){clearTimeout(this.waitingTimeout);var i=t.target.id.replace("media-video-","").replace("_html5_api","");void 0!==i&&i&&(e.pauseOtherPlayer("media-video-"+i),e.vodIns[i].rtv=(new Date).getTime())})),e.vodIns[l].on("seeking",(function(t){var i=t.target.id.replace("media-video-","").replace("_html5_api","");void 0!==i&&i&&(e.vodIns[i].currentTime()+2>e.vodIns[i].duration()&&e.vodIns[i].currentTime(e.vodIns[i].duration()-2),null!=e.vodIns[i].ads&&(e.vodIns[i].ads.loadAd()||e.vodIns[i].ads.playAd())&&e.vodIns[i].pause(),e.vodIns[i].rtv=(new Date).getTime())})),e.vodIns[l].on("seeked",(function(t){var i=t.target.id.replace("media-video-","").replace("_html5_api","");void 0!==i&&i&&(null!=e.vodIns[i].ads&&(e.vodIns[i].ads.loadAd()||e.vodIns[i].ads.playAd())&&e.vodIns[i].pause(),e.vodIns[i].rtv=(new Date).getTime())})),e.vodIns[l].on("ended",(function(t){var i=t.target.id.replace("media-video-","").replace("_html5_api","");void 0!==i&&i&&0==e.vodIns[i].videoLogging.complete&&(e.vodIns[i].videoLogging.complete=!0,e.trackingDataPlayer("media-video-"+i,"videoComplete",e.vodIns[i].src(),"100%",((new Date).getTime()-e.vodIns[i].rtv)/1e3,e.vodIns[i].timeWatching),e.vodIns[i].rtv=(new Date).getTime()),console.log("vplayer: - duration: ",e.vodIns[i].duration());try{if(1002835==SITE_ID&&"undefined"!=typeof next_id&&"undefined"!=typeof vod_support)return load_video(next_id,vod_support),!1}catch(e){console.log(e)}if(null!=e.vodIns[i].ads&&null!=e.vodIns[i].ads.moslotForType("post-roll"))return!1;void 0!==i&&i&&e.showEndVideo(i)})),e.vodIns[l].on("loadstart",(function(t){var i=t.target.id.replace("media-video-","").replace("_html5_api","");if(void 0!==i&&i&&null!=e.vodIns[i].ads&&e.vodIns[i].ads.initAdPlugin()&&e.vodIns[i].ads.playAd())return!1})),e.vodIns[l].on("timeupdate",(function(t){var i;try{i=t.target.player.id().replace("media-video-","").replace("_html5_api","")}catch(e){i=t.target.player().id().replace("media-video-","").replace("_html5_api","")}if(0==e.vodIns[i].videoLogging.addedSub&&null!=e.subIns[i]){e.vodIns[i].videoLogging.addedSub=!0,e.vodIns[i].track=[];var a=JSON.parse(e.subIns[i]);if("safari"==getBrowser().name.toLowerCase())for(var o=0;o<a.cue.length;o++){var n=e.vodIns[i].addTextTrack("captions",a.cue[o].langlabel,a.cue[o].lang);e.vodIns[i].track.push(n);for(var d=0;d<a.cue[o].clist.length;d++)if(""!=a.cue[o].clist[d].content){if((r=new VTTCue(a.cue[o].clist[d].start,a.cue[o].clist[d].end,a.cue[o].clist[d].content.indexOf("<c")>=0?a.cue[o].clist[d].content:"<c.default.bg-default.bg-font-size-default>"+a.cue[o].clist[d].content+"</c>")).id=d,null!=a.cue[o].clist[d].attributes)switch(r.line=void 0!==a.cue[o].clist[d].attributes.line?parseInt(a.cue[o].clist[d].attributes.line):-1,r.align){case"right":void 0!==a.cue[o].clist[d].attributes.position?r.position=Math.min(100,Math.max(0,2*parseInt(a.cue[o].clist[d].attributes.position))):r.position=50,void 0!==a.cue[o].clist[d].attributes.size?r.size=Math.min(100,Math.max(0,100-(r.position-20)+parseInt(a.cue[o].clist[d].attributes.size))):r.size=100;break;case"left":void 0!==a.cue[o].clist[d].attributes.position?parseInt(a.cue[o].clist[d].attributes.position)>50?r.position=Math.min(100,Math.max(0,parseInt(a.cue[o].clist[d].attributes.position)/2)-20):r.position=0:r.position=50,void 0!==a.cue[o].clist[d].attributes.size&&void 0!==a.cue[o].clist[d].attributes.position?(r.size=parseInt(a.cue[o].clist[d].attributes.size),r.position=Math.min(100,Math.max(0,100-r.size-(parseInt(a.cue[o].clist[d].attributes.position)-50)))):r.size=100;break;case"middle":void 0!==a.cue[o].clist[d].attributes.position?50==parseInt(a.cue[o].clist[d].attributes.position)?r.position=50:parseInt(a.cue[o].clist[d].attributes.position)>50?(r.align="right",r.position=Math.min(100,Math.max(0,parseInt(a.cue[o].clist[d].attributes.position)+20))):(r.align="left",r.position=Math.min(100,Math.max(0,parseInt(a.cue[o].clist[d].attributes.position)-20))):r.position=50,r.size=void 0!==a.cue[o].clist[d].attributes.size?parseInt(a.cue[o].clist[d].attributes.size):100}else r.line=-1,r.position=50,r.size=100,r.align=Video.isMobile.iOS()?"center":"middle";e.vodIns[i].track[o].addCue(r)}}else for(o=0;o<a.cue.length;o++){(n=e.vodIns[i].addTextTrack("captions",a.cue[o].langlabel,a.cue[o].lang)).on("cuechange",(function(e){for(var t=0;t<this.activeCues_.length;t++){var i=this.activeCues_[t];i.originalCue_&&(i.line=i.originalCue_.line,i.position=i.originalCue_.position,i.size=i.originalCue_.size,i.align="center"===i.originalCue_.align?"middle":i.originalCue_.align)}Video.vodIns.forEach(function(e,t){Video.vodIns[t].src()==this.tech_.currentSource_.src&&Video.vodIns[t].addedSub&&Video.vodIns[t].textTrackDisplay.updateDisplay()}.bind(this))})),e.vodIns[i].track.push(n);for(d=0;d<a.cue[o].clist.length;d++){var r;if(""!=a.cue[o].clist[d].content)(r=new VTTCue(a.cue[o].clist[d].start,a.cue[o].clist[d].end,a.cue[o].clist[d].content.indexOf("<c")>=0?a.cue[o].clist[d].content:"<c.default.bg-default.bg-font-size-default>"+a.cue[o].clist[d].content+"</c>")).id=d,null!=a.cue[o].clist[d].attributes?(r.line=void 0!==a.cue[o].clist[d].attributes.line?parseInt(a.cue[o].clist[d].attributes.line):-1,r.position=void 0!==a.cue[o].clist[d].attributes.position?parseInt(a.cue[o].clist[d].attributes.position):50,r.size=void 0!==a.cue[o].clist[d].attributes.size?parseInt(a.cue[o].clist[d].attributes.size):90,r.align=void 0!==a.cue[o].clist[d].attributes.align?a.cue[o].clist[d].attributes.align:"middle"):(r.line=-1,r.position=50,r.size=90,r.align="middle"),e.vodIns[i].track[o].addCue(r)}}e.vodIns[i].track[0].mode="showing",e.vodIns[i].track.length>0&&e.vodIns[i].track.length<2&&(e.vodIns[i].controlBar.subsCapsButton.menu.el_.style.display="none"),e.vodIns[i].player_.subShowing=!0,e.vodIns[i].controlBar.subsCapsButton.controlText("Subtitles off")}var s=e.vodIns[i].currentTime(),l=Math.floor(s),c=e.vodIns[i].duration();if(0==e.vodIns[i].videoLogging.callSuggesion&&s>c/2){e.vodIns[i].videoLogging.callSuggesion=!0;try{e.getDataSuggestion("media-video-"+i)}catch(e){}}if(null!=e.vodIns[i].ads&&e.vodIns[i].ads.initAdPlugin()){if(e.vodIns[i].ads.playAd())return!1;!e.vodIns[i].ads.initAd()&&s>5?(e.vodIns[i].ads.initAd(!0),null!=e.vodIns[i].adsConfig&&""!=e.vodIns[i].adsConfig?e.vodIns[i].ads.moinitAds2(JSON.parse(e.vodIns[i].adsConfig)):null!=e.vodIns[i].adsTag&&""!=e.vodIns[i].adsTag&&e.vodIns[i].ads.moinitAds(e.vodIns[i].adsTag)):!e.vodIns[i].ads.initAd()||e.vodIns[i].ads.loadAd()||e.vodIns[i].ads.playAd()||e.vodIns[i].ads.moslotForCurrentTime(l)}if(e.vodIns[i].paused()||(e.vodIns[i].timeWatching+=((new Date).getTime()-e.vodIns[i].rtv)/1e3),e.vodIns[i].rtv=(new Date).getTime(),0==e.vodIns[i].videoLogging.firstQuartile&&l==Math.floor(.25*c))e.vodIns[i].videoLogging.firstQuartile=!0,e.trackingDataPlayer("media-video-"+i,"videoProgress",e.vodIns[i].src(),"25%",((new Date).getTime()-e.vodIns[i].rtv)/1e3,e.vodIns[i].timeWatching),e.vodIns[i].rtv=(new Date).getTime();else if(0==e.vodIns[i].videoLogging.midpoint&&l==Math.floor(.5*c))e.vodIns[i].videoLogging.midpoint=!0,e.trackingDataPlayer("media-video-"+i,"videoProgress",e.vodIns[i].src(),"50%",((new Date).getTime()-e.vodIns[i].rtv)/1e3,e.vodIns[i].timeWatching),e.vodIns[i].rtv=(new Date).getTime();else if(0==e.vodIns[i].videoLogging.thirdQuartile&&l==Math.floor(.75*c))e.vodIns[i].videoLogging.thirdQuartile=!0,e.trackingDataPlayer("media-video-"+i,"videoProgress",e.vodIns[i].src(),"75%",((new Date).getTime()-e.vodIns[i].rtv)/1e3,e.vodIns[i].timeWatching),e.vodIns[i].rtv=(new Date).getTime();else{var g="0";switch(l){case Math.floor(.05*c):g="5";break;case Math.floor(.1*c):g="10";break;case Math.floor(.15*c):g="15";break;case Math.floor(.2*c):g="20";break;case Math.floor(.3*c):g="30";break;case Math.floor(.35*c):g="35";break;case Math.floor(.4*c):g="40";break;case Math.floor(.45*c):g="45";break;case Math.floor(.55*c):g="55";break;case Math.floor(.6*c):g="60";break;case Math.floor(.65*c):g="65";break;case Math.floor(.7*c):g="70";break;case Math.floor(.8*c):g="80";break;case Math.floor(.85*c):g="85";break;case Math.floor(.9*c):g="90";break;case Math.floor(.95*c):g="95"}"0"!=g&&void 0===e.vodIns[i].videoLogging.tracking_every_5percent["percent_"+g]&&(e.vodIns[i].videoLogging.tracking_every_5percent["percent_"+g]=1,e.trackingDataPlayer("media-video-"+i,"videoProgress",e.vodIns[i].src(),g+"%",((new Date).getTime()-e.vodIns[i].rtv)/1e3,e.vodIns[i].timeWatching),e.vodIns[i].rtv=(new Date).getTime())}if(e.vodIns[i].ended()&&!e.vodIns[i].paused()&&e.vodIns[i].pause(),Math.floor(e.vodIns[i].currentTime())===Math.floor(e.vodIns[i].duration()))try{if(1002835==SITE_ID&&"undefined"!=typeof next_id&&"undefined"!=typeof vod_support)return load_video(next_id,vod_support),!1;if("undefined"!=typeof parser_playlist&&1==parser_playlist)return fpt.require("module/home").nextVideo(),!1}catch(e){console.log(e)}}))}}}catch(e){console.log(e)}}o.length>0&&1!=isHome?e.getSubs(o.join("-")):o.length>0&&1==isHome&&(e.subtileVideoIdArr=o,e.getSubs(o.join("-")))}}}),100);e.checkFB(),setInterval((function(){e.checkFB()}),3e5);var a=document.getElementsByClassName("embed_video_new");function o(){var e=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement;isFullscreen=!!e,Video.vodIns.forEach((function(e,t){Video.vodIns[t].ads&&Video.vodIns[t].ads.playAd()&&Video.vodIns[t].ads.screenChange(),Video.vodIns[t].addedSub&&Video.vodIns[t].textTrackDisplay.updateDisplay()}))}"undefined"!=typeof parser_autoplay&&1==parser_autoplay&&a.length>0&&window.addEventListener("load",(function(){var t=a[0],i=new e.inView(t);if(i.isInView()){var o=e.getDataAttributes(t);"363311"==o.vid||0!=o.type&&4!=o.type||1!=o.initdom||!e.isHtml5Support()||e.isMobile.iOS()||e.isMobile.Android()||(t.setAttribute("data-view","inview"),0==t.getAttribute("data-play")&&(t.setAttribute("data-auto",1),e.playVideo(o.vid,!0)))}i.onInView(function(i){var a=e.getDataAttributes(t);"363311"==a.vid||0!=a.type&&4!=a.type||1!=a.initdom||!e.isHtml5Support()||e.isMobile.iOS()||e.isMobile.Android()||(t.setAttribute("data-view","inview"),0==t.getAttribute("data-play")&&(1!=t.getAttribute("data-auto")?(t.setAttribute("data-auto",1),e.playVideo(a.vid,!0)):1==t.getAttribute("data-auto")&&e.playVideo(a.vid,!0)))}.bind(this,0))})),document.addEventListener("webkitfullscreenchange",o,!1),document.addEventListener("mozfullscreenchange",o,!1),document.addEventListener("fullscreenchange",o,!1),document.addEventListener("MSFullscreenChange",o,!1)},resume:function(e){return!0},player:function(e){var t=this,i=t.parentContainer[e];void 0!==t.parentContainer[e]&&t.parentContainer[e]||(i=document.getElementById("media-video-"+e),t.parentContainer[e]=i),document.getElementById("parser_player_"+e).style.display="block",t.html5Player(t.getDataAttributes(i))},html5Player:function(e,t){var i=this;if(document.getElementById("parser_player_"+e.vid)&&(document.getElementById("parser_player_"+e.vid).style.display="block"),void 0!==i.vodIns[e.vid]){i.vodIns[e.vid].autoplay(!0),i.vodIns[e.vid].timestartinit=(new Date).getTime(),void 0!==t&&0==i._forceMute&&window.location.href.indexOf("video.ngoisao.vnexpress.net")<0&&i.vodIns[e.vid].muted(t);try{var a=i.vodIns[e.vid].play();void 0!==a&&a.then((function(){console("video started!!!")})).catch((function(){i.vodIns[e.vid].hasStarted(!0)}))}catch(t){i.vodIns[e.vid].play()}i.vodIns[e.vid].timestartinit=(new Date).getTime();try{document.getElementById("media-video-"+e.vid).children[0].controls=""}catch(e){console.log(e)}}else var o=setInterval((function(){void 0!==i.vodIns[e.vid]&&(clearInterval(o),i.html5Player(e,t))}),10)},suggestSource:"portal",checkContractNumber:function(){var e=!1;if("false"!=typeof dataLayer&&dataLayer.length>0)for(i=0;i<dataLayer.length;i++){var t=dataLayer[i];"object"==typeof t&&1==t.specialArticle&&(e=!0)}return e},getDataSuggestion:function(e){var t=this;if(0==t.checkContractNumber()){var i=e.replace("media-video-","");if(void 0!==t.suggestionData[i])return!0;t.suggestionData[i]=[]}},videoSuggestionProcess:function(e){var t=this;t.suggestionVideoId>0&&(0==e.error?t.suggestionData[t.suggestionVideoId]={suggestion:e.data}:t.suggestionData[t.suggestionVideoId]=[])},pauseOtherPlayer:function(e){var t=this;if(t.vodIns.length>0){var i=e.replace("media-video-","");t.vodIns.forEach((function(e,a){a!=i&&(t.vodIns[a].pause(),t.vodIns[a].ads&&(t.vodIns[a].ads.playAd()?t.vodIns[a].ads.pauseAd():t.vodIns[a].ads.loadAd()&&t.vodIns[a].ads.removeAdData()))}))}},playCompleted:function(e){var t=this;if(null!=t.isMobile.any())return null;var i=e.replace("media-video-","");return void 0!==t.suggestionData[i]&&t.suggestionData[i]?(t.trackingRecommend(),JSON.stringify(t.suggestionData[i])):null},siteTracking:function(e){var t=5;switch(e){case 1003834:t=30;break;case 1002835:t=10;break;case 1003695:t=16;break;case 1002764:t=8;break;default:t=5}return t},trackingPlayVideo:function(e){return!1},trackingPageView:function(e){return!1},trackingRecommend:function(){"portal"==this.suggestSource?$dimension1="Ctbqt_Embed_Display":$dimension1="rcm_video_embed_display",function(e,t,i,a,o,n,d){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,n=t.createElement(i),d=t.getElementsByTagName(i)[0],n.async=1,n.src="https://www.google-analytics.com/analytics.js",d.parentNode.insertBefore(n,d)}(window,document,"script",0,"ga")},trackingDataPlayer:function(e,t,i,a,o,n){if(n=void 0!==n&&n>0?Math.round(n):0,void 0===window.pageCategoryID)for(var d=0;d<window.dataLayer.length;d++)void 0===window.dataLayer[d].pageCategoryID||(window.pageCategoryID=window.dataLayer[d].pageCategoryID);if(void 0===window.pageSubcategoryId)for(d=0;d<window.dataLayer.length;d++)void 0===window.dataLayer[d].pageSubcategoryId||(window.pageSubcategoryId=window.dataLayer[d].pageSubcategoryId);var r=this;try{if(-1!=e.indexOf("video_parent_"))var s=e.replace("video_parent_","");else s=e.replace("media-video-","");var l=r.parentContainer[s];void 0!==r.parentContainer[s]&&r.parentContainer[s]||(l=document.getElementById("media-video-"+s),r.parentContainer[s]=l);var c=r.getDataAttributes(l);"undefined"!=typeof article_url&&article_url,void 0!==c.auto&&void 0!==c.duration||(c=r.getDataAttributes(l));var g=void 0!==c.auto&&1==c.auto?"auto":"click",u=c.duration,v="None";switch(c.license){case 0:default:v="None";break;case 1:v="VNE";break;case 2:v="Embed Social";break;case 3:v="FPT Play";break;case 4:v="ViewTV";break;case 5:v="Ads customer";break;case 6:v="ViewTV Food";break;case 7:v="Video Live";break;case 8:v="Kid Lab";break;case 9:v="Copyright"}var p=document.getElementsByName("its_topic")&&document.getElementsByName("its_topic")[0]?document.getElementsByName("its_topic")[0].content:"",m="",I=document.getElementsByClassName("tag_item");for(d=0;d<I.length;d++)m+=document.getElementsByClassName("tag_item")[d].href.substr(document.getElementsByClassName("tag_item")[d].href.lastIndexOf("-")+1)+",";m=m.replace(/.$/,"");var h=[1003007,1003400,1003008,1003005,1003869,1003006,1003509,1003871,1004229,1003609,1003870,1003508,1003013,1003611,1003014,1004235],y={},f=document.querySelector('meta[name="tt_page_type_new"]')&&"3"==document.querySelector('meta[name="tt_page_type_new"]').getAttribute("content"),w=f?document.querySelector('meta[name="tt_article_id"]').getAttribute("content"):c.articleoriginal,_={action:"play",ratio:0,timewatching:n,play_embed:f?1:2,meta:{its_type:"video",its_id:parseInt(w),its_video_id:parseInt(c.vid),its_wordcount:u||(r.vodIns[s]?Math.floor(r.vodIns[s].duration()):0),its_classify:void 0!==c.videoclassify?c.videoclassify:"None"}};if(c.articleoriginal&&c.articleoriginal!=r.articleId&&(_.meta.its_section=c.vscaten.toLowerCase(),_.meta.its_subsection=c.vscaten.toLowerCase()),1002835==SITE_ID)switch(t){case"videoStart":y={event:"playerEvent",player_action:"videoStart",videoID:s,videoType:"Embeded",videoLicense:v,videoDuration:u,articleTopicsId:p,articleTagsID:m,videoCategoryID:c.vcate,videoSubCategoryID:c.vscate,videoSubCategory:c.vscaten},c.articleoriginal&&c.articleoriginal!=r.articleId&&c.aot&&(y.articleId=c.articleoriginal,y.articleTitle=c.aot),window.dataLayer.push(y);break;case"videoProgress":y={event:"playerEvent",player_action:"videoProgress "+a,videoID:s,videoType:"Embeded",videoLicense:v,videoWatchDuration:u*parseInt(a.replace("%",""))/100,videoDuration:u,articleTopicsId:p,articleTagsID:m,videoCategoryID:c.vcate,videoSubCategoryID:c.vscate,videoSubCategory:c.vscaten},c.articleoriginal&&c.articleoriginal!=r.articleId&&c.aot&&(y.articleId=c.articleoriginal,y.articleTitle=c.aot),window.dataLayer.push(y),_.ratio=parseInt(a.replace("%","")),window._logEgg=window._logEgg||[],window._logEgg.push(_);break;case"videoComplete":y={event:"playerEvent",player_action:"videoComplete",videoID:s,videoType:"Embeded",videoLicense:v,videoWatchDuration:u,videoDuration:u,articleTopicsId:p,articleTagsID:m,videoCategoryID:c.vcate,videoSubCategoryID:c.vscate,videoSubCategory:c.vscaten},c.articleoriginal&&c.articleoriginal!=r.articleId&&c.aot&&(y.articleId=c.articleoriginal,y.articleTitle=c.aot),window.dataLayer.push(y),_.ratio=100,window._logEgg=window._logEgg||[],window._logEgg.push(_);break;case"videoPlay":y={event:"playerEvent",player_action:"auto"==g||void 0!==window.autoPlayBoxVideo&&window.autoPlayBoxVideo?"videoAutoPlay":"videoPlay",videoID:s,videoType:"Embeded",videoLicense:v,videoDuration:u,articleTopicsId:p,articleTagsID:m,videoCategoryID:c.vcate,videoSubCategoryID:c.vscate,videoSubCategory:c.vscaten,VideoClassify:void 0!==c.videoclassify?c.videoclassify:"None"},c.articleoriginal&&c.articleoriginal!=r.articleId&&c.aot&&(y.articleId=c.articleoriginal,y.articleTitle=c.aot),window.dataLayer.push(y),_.ratio=0,_.auto_play="auto"==g||void 0!==window.autoPlayBoxVideo&&window.autoPlayBoxVideo?1:0,window._logEgg=window._logEgg||[],window._logEgg.push(_);break;case"videoAdStart":y={event:"playerEvent",player_action:"videoAdStart",videoID:s,videoType:"Embeded",videoLicense:v,videoDuration:u,articleTopicsId:p,articleTagsID:m,videoCategoryID:c.vcate,videoSubCategoryID:c.vscate,videoSubCategory:c.vscaten},c.articleoriginal&&c.articleoriginal!=r.articleId&&c.aot&&(y.articleId=c.articleoriginal,y.articleTitle=c.aot),window.dataLayer.push(y),_.ads_status="videoadstart",window._logEgg=window._logEgg||[],window._logEgg.push(_);break;case"videoAd5s":y={event:"playerEvent",player_action:"videoAd5s",videoID:s,videoType:"Embeded",videoLicense:v,videoDuration:u,articleTopicsId:p,articleTagsID:m,videoCategoryID:c.vcate,videoSubCategoryID:c.vscate,videoSubCategory:c.vscaten},c.articleoriginal&&c.articleoriginal!=r.articleId&&c.aot&&(y.articleId=c.articleoriginal,y.articleTitle=c.aot),window.dataLayer.push(y);break;case"videoAdSkip":y={event:"playerEvent",player_action:"videoAdSkip",videoID:s,videoType:"Embeded",videoLicense:v,videoDuration:u,articleTopicsId:p,articleTagsID:m,videoCategoryID:c.vcate,videoSubCategoryID:c.vscate,videoSubCategory:c.vscaten},c.articleoriginal&&c.articleoriginal!=r.articleId&&c.aot&&(y.articleId=c.articleoriginal,y.articleTitle=c.aot),window.dataLayer.push(y),_.ads_status="videoadskip",window._logEgg=window._logEgg||[],window._logEgg.push(_);break;case"videoAdComplete":y={event:"playerEvent",player_action:"videoAdComplete",videoID:s,videoType:"Embeded",videoLicense:v,videoDuration:u,articleTopicsId:p,articleTagsID:m,videoCategoryID:c.vcate,videoSubCategoryID:c.vscate,videoSubCategory:c.vscaten},c.articleoriginal&&c.articleoriginal!=r.articleId&&c.aot&&(y.articleId=c.articleoriginal,y.articleTitle=c.aot),window.dataLayer.push(y),_.ads_status="videoadcomplete",window._logEgg=window._logEgg||[],window._logEgg.push(_)}else switch(t){case"videoStart":y={event:"playerEvent",player_action:"videoStart",VideoID:s,VideoType:"Embeded",videoLicense:v,videoDuration:u,article_topic_ID:p,tag_id:m,Video_category:c.vcate,Video_Sub_category_ID:c.vscate,Video_Sub_category_name:c.vscaten},h.indexOf(parseInt(c.vscate))<0&&(y.pageCategory=c.vcate,y.pageSubcategoryId=c.vscate,y.pageSubcategory=c.vscaten),c.articleoriginal&&c.articleoriginal!=r.articleId&&c.aot&&(y.articleId=c.articleoriginal,y.articleTitle=c.aot),window.dataLayer.push(y);break;case"videoProgress":y={event:"playerEvent",player_action:"videoProgress "+a,VideoID:s,VideoType:"Embeded",videoLicense:v,videoDuration:u,article_topic_ID:p,tag_id:m,Video_category:c.vcate,Video_Sub_category_ID:c.vscate,Video_Sub_category_name:c.vscaten},h.indexOf(parseInt(c.vscate))<0&&(y.pageCategory=c.vcate,y.pageSubcategoryId=c.vscate,y.pageSubcategory=c.vscaten),c.articleoriginal&&c.articleoriginal!=r.articleId&&c.aot&&(y.articleId=c.articleoriginal,y.articleTitle=c.aot),window.dataLayer.push(y),_.ratio=parseInt(a.replace("%","")),window._logEgg=window._logEgg||[],window._logEgg.push(_);break;case"videoComplete":y={event:"playerEvent",player_action:"videoComplete",VideoID:s,VideoType:"Embeded",videoLicense:v,videoDuration:u,article_topic_ID:p,tag_id:m,Video_category:c.vcate,Video_Sub_category_ID:c.vscate,Video_Sub_category_name:c.vscaten},h.indexOf(parseInt(c.vscate))<0&&(y.pageCategory=c.vcate,y.pageSubcategoryId=c.vscate,y.pageSubcategory=c.vscaten),c.articleoriginal&&c.articleoriginal!=r.articleId&&c.aot&&(y.articleId=c.articleoriginal,y.articleTitle=c.aot),window.dataLayer.push(y),_.ratio=100,window._logEgg=window._logEgg||[],window._logEgg.push(_);break;case"videoPlay":y={event:"playerEvent",player_action:"auto"==g||void 0!==window.autoPlayBoxVideo&&window.autoPlayBoxVideo?"videoAutoPlay":"videoPlay",VideoID:s,VideoType:"Embeded",videoLicense:v,videoDuration:u,article_topic_ID:p,tag_id:m,Video_category:c.vcate,Video_Sub_category_ID:c.vscate,Video_Sub_category_name:c.vscaten,VideoClassify:void 0!==c.videoclassify?c.videoclassify:"None"},h.indexOf(parseInt(c.vscate))<0&&(y.pageCategory=c.vcate,y.pageSubcategoryId=c.vscate,y.pageSubcategory=c.vscaten),c.articleoriginal&&c.articleoriginal!=r.articleId&&c.aot&&(y.articleId=c.articleoriginal,y.articleTitle=c.aot),window.dataLayer.push(y),_.ratio=0,_.auto_play="auto"==g||void 0!==window.autoPlayBoxVideo&&window.autoPlayBoxVideo?1:0,window._logEgg=window._logEgg||[],window._logEgg.push(_);break;case"videoAdStart":y={event:"playerEvent",player_action:"videoAdStart",VideoID:s,VideoType:"Embeded",videoLicense:v,videoDuration:u,article_topic_ID:p,tag_id:m,Video_category:c.vcate,Video_Sub_category_ID:c.vscate,Video_Sub_category_name:c.vscaten},h.indexOf(parseInt(c.vscate))<0&&(y.pageCategory=c.vcate,y.pageSubcategoryId=c.vscate,y.pageSubcategory=c.vscaten),c.articleoriginal&&c.articleoriginal!=r.articleId&&c.aot&&(y.articleId=c.articleoriginal,y.articleTitle=c.aot),window.dataLayer.push(y),_.ads_status="videoadstart",window._logEgg=window._logEgg||[],window._logEgg.push(_),r.hideShare(e);break;case"videoAd5s":y={event:"playerEvent",player_action:"videoAd5s",VideoID:s,VideoType:"Embeded",videoLicense:v,videoDuration:u,article_topic_ID:p,tag_id:m,Video_category:c.vcate,Video_Sub_category_ID:c.vscate,Video_Sub_category_name:c.vscaten},h.indexOf(parseInt(c.vscate))<0&&(y.pageCategory=c.vcate,y.pageSubcategoryId=c.vscate,y.pageSubcategory=c.vscaten),c.articleoriginal&&c.articleoriginal!=r.articleId&&c.aot&&(y.articleId=c.articleoriginal,y.articleTitle=c.aot),window.dataLayer.push(y);break;case"videoAdSkip":y={event:"playerEvent",player_action:"videoAdSkip",VideoID:s,VideoType:"Embeded",videoLicense:v,videoDuration:u,article_topic_ID:p,tag_id:m,Video_category:c.vcate,Video_Sub_category_ID:c.vscate,Video_Sub_category_name:c.vscaten},h.indexOf(parseInt(c.vscate))<0&&(y.pageCategory=c.vcate,y.pageSubcategoryId=c.vscate,y.pageSubcategory=c.vscaten),c.articleoriginal&&c.articleoriginal!=r.articleId&&c.aot&&(y.articleId=c.articleoriginal,y.articleTitle=c.aot),window.dataLayer.push(y),_.ads_status="videoadskip",window._logEgg=window._logEgg||[],window._logEgg.push(_),r.showShare(e);break;case"videoAdComplete":y={event:"playerEvent",player_action:"videoAdComplete",VideoID:s,VideoType:"Embeded",videoLicense:v,videoDuration:u,article_topic_ID:p,tag_id:m,Video_category:c.vcate,Video_Sub_category_ID:c.vscate,Video_Sub_category_name:c.vscaten},h.indexOf(parseInt(c.vscate))<0&&(y.pageCategory=c.vcate,y.pageSubcategoryId=c.vscate,y.pageSubcategory=c.vscaten),c.articleoriginal&&c.articleoriginal!=r.articleId&&c.aot&&(y.articleId=c.articleoriginal,y.articleTitle=c.aot),window.dataLayer.push(y),_.ads_status="videoadcomplete",window._logEgg=window._logEgg||[],window._logEgg.push(_),r.showShare(e)}}catch(e){}},trackingEvent:function(e,t,i){!function(e,t,i,a,o,n,d){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,n=t.createElement(i),d=t.getElementsByTagName(i)[0],n.async=1,n.src="https://www.google-analytics.com/analytics.js",d.parentNode.insertBefore(n,d)}(window,document,"script",0,"ga"),ga("create","UA-50285069-1","auto",{name:"t0"}),ga("t0.send","event",e,t,i)},inView:function(e){this.el=e,this.stateInView=null,this.inView=null,this.outView=null,(this.getBoundingRect=function(){var t=0;void 0!==window.scrollY?t=window.scrollY:void 0!==window.pageYOffset&&(t=window.pageYOffset);window.innerHeight;this.box=e.getBoundingClientRect(),this.boxTop=this.box.top+t,this.boxBottom=this.box.bottom+t}).bind(this),(this.isInView=function(){var e=0;void 0!==window.scrollY?e=window.scrollY:void 0!==window.pageYOffset&&(e=window.pageYOffset);var t=2*this.box.height/3,i=e+window.innerHeight;return e+t<this.boxBottom&&i-t>this.boxTop}).bind(this),(this.detectInView=function(){var e=this.isInView();!e||this.stateInView&&void 0!==this.stateInView?e||!this.stateInView&&void 0!==this.stateInView||(this.stateInView=!1,this.outView&&this.outView()):(this.stateInView=!0,this.inView&&this.inView())}).bind(this),(this.onInView=function(e){this.inView=function(){e.call(this)}.bind(this),this.detectInView()}).bind(this),(this.onOutView=function(e){this.outView=function(){e.call(this)}.bind(this),this.detectInView()}).bind(this),this.getBoundingRect(),this.detectInView(),window.addEventListener("scroll",function(){this.detectInView()}.bind(this)),window.addEventListener("resize",function(){this.getBoundingRect()}.bind(this))},showEndVideo:function(e){var t=this;null!=t.vodIns[e].ads&&(t.vodIns[e].ads.loadAd()||t.vodIns[e].ads.playAd())&&t.vodIns[e].ads.removeAdData();var i=JSON.parse(t.playCompleted("media-video-"+e));if(null!=i&&i.length>0){t.vodIns[e].showSuggestion(!0),t.vodIns[e].suggestionData=i,t.vodIns[e].isShowSuggestion=!0,null==document.getElementById(e+"_fp_suggest_popup")?(t.vodIns[e].suggestionPopup=createDiv(e+"_fp_suggest_popup","fp-suggest-popup","display:block;background-color:rgba(0,0,0,0.7);"),document.getElementById(event.target.id).parentNode.appendChild(t.vodIns[e].suggestionPopup)):(t.vodIns[e].suggestionPopup=document.getElementById(e+"_fp_suggest_popup"),t.vodIns[e].suggestionPopup.innerHTML="",t.vodIns[e].suggestionPopup.style.display="block",t.vodIns[e].suggestionPopup.style.backgroundColor="rgba(0,0,0,0.7)");var a='<h3 class="fp-suggestion-container_header"><span>| '+selectDic.SUGGESTION_LABEL+'</span><div class="share_video" style="display:none;"><a onclick="shareFB()"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNSIgaGVpZ2h0PSIyNSIgdmlld0JveD0iMCAwIDI1IDI1Ij48cGF0aCBkPSJNMjMuNyAyNUwxLjMgMjVjLTAuNyAwLTEuMy0wLjYtMS4zLTEuM0wwIDEuM2MwLTAuNyAwLjYtMS4zIDEuMy0xLjNMMjMuNyAwYzAuNyAwIDEuMyAwLjYgMS4zIDEuM0wyNSAyMy43QzI1IDI0LjQgMjQuNCAyNSAyMy43IDI1eiIgZmlsbD0iIzQwNUU5MSIvPjxwYXRoIGQ9Ik05LjkgNy40YzAgMC41IDAgMi43IDAgMi43bC0yIDAgMCAzLjMgMiAwIDAuMSA5LjkgNC4xIDAgLTAuMS05LjkgMi44IDBjMCAwIDAuMi0xLjYgMC40LTMuNCAtMC40IDAtMy4xIDAtMy4xIDBzMC0xLjkgMC0yLjNjMC0wLjMgMC40LTAuOCAwLjktMC44IDAuNCAwIDEuNCAwIDIuMiAwIDAtMC41IDAtMiAwLTMuNSAtMS4yIDAtMi41IDAtMy4xIDBDOS43IDMuNiA5LjkgNi45IDkuOSA3LjR6IiBmaWxsPSIjRkZGIi8+PC9zdmc+"/></a><a onclick="shareTW()"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNSIgaGVpZ2h0PSIyNSIgdmlld0JveD0iMCAwIDI1IDI1Ij48cGF0aCBkPSJNMjMuNyAyNUwxLjMgMjVjLTAuNyAwLTEuMy0wLjYtMS4zLTEuM0wwIDEuM2MwLTAuNyAwLjYtMS4zIDEuMy0xLjNMMjMuNyAwYzAuNyAwIDEuMyAwLjYgMS4zIDEuM0wyNSAyMy43QzI1IDI0LjQgMjQuNCAyNSAyMy43IDI1eiIgZmlsbD0iIzAwOUVEMCIvPjxwYXRoIGQ9Ik0yMi4yIDcuNWMtMC43IDAuMy0xLjUgMC41LTIuMyAwLjYgMC44LTAuNSAxLjUtMS4zIDEuOC0yLjIgLTAuOCAwLjUtMS42IDAuOC0yLjUgMSAtMC43LTAuOC0xLjgtMS4yLTIuOS0xLjIgLTIuMiAwLTQgMS44LTQgMy45IDAgMC4zIDAgMC42IDAuMSAwLjkgLTMuMy0wLjItNi4yLTEuNy04LjItNC4xIC0wLjMgMC42LTAuNSAxLjMtMC41IDIgMCAxLjQgMC43IDIuNiAxLjggMy4zIC0wLjcgMC0xLjMtMC4yLTEuOC0wLjUgMCAwIDAgMCAwIDAgMCAwLjUgMC4xIDEgMC4zIDEuNCAwLjUgMS4yIDEuNiAyLjIgMi45IDIuNCAtMC4zIDAuMS0wLjcgMC4xLTEuMSAwLjEgLTAuMyAwLTAuNSAwLTAuNy0wLjEgMC41IDEuNiAyIDIuNyAzLjcgMi43IC0xLjQgMS4xLTMuMSAxLjctNC45IDEuNyAtMC4zIDAtMC42IDAtMS0wLjEgMS44IDEuMSAzLjkgMS44IDYuMSAxLjggNi4yIDAgMTAuMS00LjMgMTEuMS04LjggMC4yLTAuOCAwLjMtMS42IDAuMy0yLjQgMC0wLjIgMC0wLjMgMC0wLjVDMjEgOSAyMS43IDguMyAyMi4yIDcuNXoiIGZpbGw9IiNGRkYiLz48L3N2Zz4="/></a><a onclick="shareG()"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNSIgaGVpZ2h0PSIyNSIgdmlld0JveD0iMCAwIDI1IDI1Ij48c3R5bGU+LmF7ZmlsbDojRkVFREQ3O308L3N0eWxlPjxwYXRoIGQ9Ik0yMy43IDI1TDEuMyAyNWMtMC43IDAtMS4zLTAuNi0xLjMtMS4zTDAgMS4zYzAtMC43IDAuNi0xLjMgMS4zLTEuM0wyMy43IDBjMC43IDAgMS4zIDAuNiAxLjMgMS4zTDI1IDIzLjdDMjUgMjQuNCAyNC40IDI1IDIzLjcgMjV6IiBmaWxsPSIjRTQyRDMzIi8+PHBhdGggZD0iTTEyLjEgNC4yYzAuMSAwLjEgMC4zIDAuMiAwLjUgMC40IDAuMiAwLjIgMC40IDAuNCAwLjUgMC43IDAuMiAwLjMgMC4zIDAuNSAwLjQgMC45IDAuMSAwLjMgMC4yIDAuNyAwLjIgMS4yIDAgMC44LTAuMiAxLjUtMC42IDIgLTAuMiAwLjItMC40IDAuNS0wLjYgMC43IC0wLjIgMC4yLTAuNCAwLjQtMC43IDAuNiAtMC4xIDAuMS0wLjMgMC4zLTAuNCAwLjUgLTAuMSAwLjItMC4yIDAuNC0wLjIgMC43IDAgMC4yIDAuMSAwLjQgMC4yIDAuNiAwLjEgMC4yIDAuMiAwLjMgMC40IDAuNGwwLjggMC43YzAuNSAwLjQgMC45IDAuOSAxLjMgMS4zIDAuNCAwLjUgMC41IDEuMSAwLjYgMS45IDAgMS4xLTAuNSAyLjEtMS41IDMgLTEgMC45LTIuNSAxLjQtNC41IDEuNCAtMS42IDAtMi45LTAuNC0zLjctMS4xIC0wLjgtMC42LTEuMi0xLjQtMS4yLTIuMyAwLTAuNCAwLjEtMC45IDAuNC0xLjUgMC4zLTAuNSAwLjctMSAxLjQtMS40IDAuOC0wLjQgMS42LTAuNyAyLjQtMC45IDAuOC0wLjEgMS41LTAuMiAyLjEtMC4yIC0wLjItMC4yLTAuMy0wLjUtMC41LTAuNyAtMC4yLTAuMi0wLjItMC41LTAuMi0wLjkgMC0wLjIgMC0wLjQgMC4xLTAuNSAwLjEtMC4xIDAuMS0wLjMgMC4xLTAuNCAtMC4zIDAtMC41IDAtMC44IDAgLTEuMiAwLTIuMi0wLjQtMi45LTEuMiAtMC43LTAuNy0xLTEuNi0xLTIuNSAwLTEuMiAwLjUtMi4yIDEuNS0zLjEgMC43LTAuNSAxLjQtMC45IDIuMS0xLjEgMC43LTAuMSAxLjQtMC4yIDItMC4yaDQuN2wtMS40IDAuOEgxMi4xek0xMyAxNy43YzAtMC42LTAuMi0xLjEtMC42LTEuNiAtMC40LTAuNC0xLjEtMC45LTEuOS0xLjUgLTAuMSAwLTAuMyAwLTAuNSAwIC0wLjEgMC0wLjQgMC0wLjkgMCAtMC41IDAuMS0xIDAuMi0xLjUgMC4zIC0wLjEgMC0wLjMgMC4xLTAuNSAwLjIgLTAuMiAwLjEtMC40IDAuMi0wLjcgMC40IC0wLjIgMC4yLTAuNCAwLjQtMC41IDAuNyAtMC4yIDAuMy0wLjMgMC43LTAuMyAxLjEgMCAwLjggMC40IDEuNSAxLjEgMiAwLjcgMC41IDEuNyAwLjggMi45IDAuOCAxLjEgMCAyLTAuMyAyLjUtMC43QzEyLjcgMTkgMTMgMTguNCAxMyAxNy43ek05LjggMTAuOGMwLjYgMCAxLjEtMC4yIDEuNS0wLjcgMC4yLTAuMyAwLjMtMC42IDAuNC0wLjkgMC0wLjMgMC4xLTAuNiAwLjEtMC44IDAtMC45LTAuMi0xLjktMC43LTIuOCAtMC4yLTAuNC0wLjUtMC44LTAuOS0xLjFDOS44IDQuMyA5LjQgNC4xIDguOSA0LjEgOC4yIDQuMSA3LjcgNC40IDcuMyA0LjkgNi45IDUuNCA2LjggNiA2LjggNi42YzAgMC44IDAuMiAxLjcgMC43IDIuNyAwLjIgMC40IDAuNiAwLjggMC45IDEuMUM4LjggMTAuNyA5LjMgMTAuOCA5LjggMTAuOHoiIGNsYXNzPSJhIi8+PHBvbHlnb24gcG9pbnRzPSIyMS40IDUuOSAxOC45IDUuOSAxOC45IDMuNCAxNy43IDMuNCAxNy43IDUuOSAxNS4zIDUuOSAxNS4zIDcuMSAxNy43IDcuMSAxNy43IDkuNiAxOC45IDkuNiAxOC45IDcuMSAyMS40IDcuMSAiIGNsYXNzPSJhIi8+PC9zdmc+"/></a></div></h3><ul id="'+e+'_listThumb" class="list_suggest_thumb">';for(v=0;v<3;v++)null!=i.suggestion[v]&&(a+="<li class=\"fp-suggestion-list-item\"><a onclick=\"Video.trackingEvent('Suggestion', 'Click', 'P_"+(v+1)+'\')" href="'+i.suggestion[v].link+'" class="txt_title_suggest_video" target="_top">'+(null!=i.suggestion[v].duration&&""!=i.suggestion[v].duration?'<div class="'+e+' fp-suggestion-thumb-duration">'+i.suggestion[v].duration+"</div>":"")+'<div class="'+e+' fp-thumb-mask"></div><div class="'+e+' fp-playico"></div><div class="thumb_image_susggest"><img class="" src="'+i.suggestion[v].thumb+'" alt=""></div><h4 class="fp-suggestion-item__title">'+i.suggestion[v].title+"</h4></a></li>");a+="</ul>",a+='<div id="'+e+'_fpSuggestionReplay" class="fp-suggestion-replay suggestion-on-videopage" style="width:100%; text-align:center; position:relative;"><span class="fp-relay-button" id="'+e+'_replayButton">'+selectDic.REPLAY_LABEL+"</span></div>",t.vodIns[e].suggestionPopup.innerHTML=a,document.getElementById(e+"_replayButton").addEventListener("click",(function(){t.vodIns[e].suggestionPopup.style.display="none",t.vodIns[e].isShowSuggestion=!1,t.vodIns[e].showSuggestion(!1),t.vodIns[e].play()}),!1)}},playVideo:function(e,t){var i=this,a=document.getElementById("video_parent_"+e),o=i.getDataAttributes(a);if(9==o.license&&"undefined"!=typeof ZONE_ADS&&1==ZONE_ADS&&!document.getElementById("media-video-"+o.vid))return a.setAttribute("data-play",1),a.setAttribute("data-status","play"),document.getElementById("embed_video_"+o.vid).style.display="block",a.getElementsByClassName("box_img_video")[0].style.display="none",a.removeAttribute("onclick"),!1;return!!(0!=o.type&&4!=o.type||i.vodIns[e]||(i.init(),i.vodIns[e]))&&(i.vodIns[e]&&i.vodIns[e].videoLogging&&0==i.vodIns[e].videoLogging.start&&(i.vodIns[e].videoLogging.start=!0,i.trackingDataPlayer("media-video-"+e,"videoPlay",i.vodIns[e].src(),"",0),i.vodIns[e].rtv=(new Date).getTime()),i.subtileVideoIdArr.length>0&&1==isHome&&i.getSubs(i.subtileVideoIdArr.join("-")),i.vodIns[e]&&(i.vodIns[e].timestartinit=(new Date).getTime()),1!=o.play&&(a.setAttribute("data-play",1),a.setAttribute("data-status","play"),document.getElementById("embed_video_"+o.vid).style.display="block",a.getElementsByClassName("box_img_video")[0].style.display="none",void 0!==i.parentContainer[o.vid]||i.parentContainer[o.vid]||(i.parentContainer[o.vid]=a),5==o.type?document.getElementById("video-"+o.vid).innerHTML=o.frame:i.html5Player(o,void 0!==t&&t),a.removeAttribute("onclick"),void i.initShare(e)))},getCookie:function(e){for(var t=e+"=",i=document.cookie.split(";"),a=0;a<i.length;a++){for(var o=i[a];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""},setCookie:function(e,t,i){var a=new Date;a.setTime(a.getTime()+60*i*1e3);var o="expires="+a.toUTCString();document.cookie=e+"="+t+"; "+o},getStorage:function(e){var t;try{t=localStorage.getItem(e)}catch(e){t=-1}return t},setStorage:function(e,t){var i;try{localStorage.setItem(e,t),i=1}catch(e){i=0}return i},statusChangeCallback:function(e){var t=this;"connected"===e.status||"not_authorized"===e.status?"true"!=t.getCookie("fblg")&&t.setCookie("fblg","true",5):"false"!=t.getCookie("fblg")&&t.setCookie("fblg","false",5),t.setDataEx()},checkLoginState:function(){var e=this;FB.getLoginStatus((function(t){e.statusChangeCallback(t)}))},checkFB:function(){var e=this,t=document.querySelector('meta[property="fb:app_id"]');null!=t&&"1710244322322688"==(t=t.getAttribute("content"))&&(e._fbAppID=t),window.fbAsyncInit=function(){FB.init({appId:e._fbAppID,cookie:!0,xfbml:!0,version:"v2.8"}),FB.getLoginStatus((function(t){e.statusChangeCallback(t)}))}},setDataEx:function(){var e=document.querySelectorAll("video"),t=this.getCookie("fblg");if(t="false"===t?0:1,e.length>0)for(var i=0;i<e.length;++i){var a=e[i].getAttribute("data-ex");void 0!==a&&(a=null===a?"fblg="+t:(a=(a=(a=(a=a.replace("&fblg=0")).replace("&fblg=1")).replace("fblg=0")).replace("fblg=1"))+"&fblg="+t,e[i].setAttribute("data-ex",a),e[i].parentNode.setAttribute("data-ex",a))}}};function videoSuggestionProcess(e){return Video.videoSuggestionProcess(e)}function videoVODLog2(e,t,i,a,o){if(e){var n=pDate(e.src()),d=new Date(n[1],n[2]-1,n[3]).toUTCString(),r="-1";try{r=localStorage.getItem("lbw")?localStorage.getItem("lbw"):"-1"}catch(e){}var s=e.src().indexOf(".m3u8")>0?"13":"131";1002835==SITE_ID&&(s=e.src().indexOf(".m3u8")>0?"14":"141");var l="";try{l=(navigator.connection||navigator.mozConnection||navigator.webkitConnection).effectiveType}catch(e){l=r>716800?"4g":r>71680?"3g":r>51200?"2g":"slow-2g"}if(void 0===a||a<150)return!1;(new Image).src="//la3.vnecdn.net/videolog?env="+s+"&pt=embed&pid="+e.pid+"&sid="+("undefined"!=typeof SITE_ID?SITE_ID:"0")+"&vid="+e.id().replace("media-video-","").replace("_html5_api","")+"&dev="+(Video.isMobile.any()?2:4)+"&pfm="+(Video.isMobile.any()?2:4)+"&fcou="+Video.getCookie("fosp_country")+"&fisp="+Video.getCookie("fosp_isp")+"&floc="+Video.getCookie("fosp_location")+"&m="+("master"==t?0:getCurrentMode(e))+"&faid="+Video.getCookie("fosp_aid")+"&ipa="+(null!=e.rheader&&e.rheader.length>0?e.rheader[0]+"."+e.rheader[3]:"")+"&los="+(null!=e.rheader&&e.rheader.length>0?e.rheader[1]:"")+"&isp="+(null!=e.rheader&&e.rheader.length>0?e.rheader[2]:"")+"&cae="+(null!=e.rheader&&e.rheader.length>0?e.rheader[4]:"")+"&rts="+(null!=e.rheader&&e.rheader.length>0?e.rheader[5]:"")+"&ta="+d+"&vs="+r+"&nt="+l+"&e="+i+"&ty="+t+"&ul="+o+(null!=a?"&t="+a:"")}}function videoVODLog(e,t,i){}function errorVODLog(e,t){}function getCurrentMode(e){return e?e.videoHeight():"-1"}function getBrowser(){var e,t=navigator.userAgent,i=t.match(/(opera|opr|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(i[1])?{name:"IE",version:(e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""}:"Chrome"===i[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?{name:e[1],version:e[2]}:(i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&i.splice(1,1,e[1]),{name:i[0],version:i[1]})}function pDate(e){var t=(e=e.replace(/\/240p|360p|480p|720p\//gi,"").replace(/\/\//gi,"/")).indexOf("/mp4/"),i=(e=e.substr(t+5)).split("/");return parseInt(i[0])&&i.unshift(",,,,"),i}function createDiv(e,t,i){var a=document.createElement("div");a.className=t,a.id=e;var o=document.createAttribute("style");return o.value=i,a.setAttributeNode(o),a}function addPreloadLink(e,t,i){if(Video.isMobile.any()){var a=document.createElement("link");a.rel="preload",a.as="fetch",a.crossorigin="",a.href=e,document.head.appendChild(a),a.readyState?a.onreadystatechange=function(){"loaded"!=a.readyState&&"complete"!=a.readyState||(a.onreadystatechange=null,null!=t&&t(null!=i?i:null))}:a.onload=function(){null!=t&&t(null!=i?i:null)}}else{var o=new XMLHttpRequest;o.onreadystatechange=function(e){4==o.readyState&&200==o.status&&null!=t&&t(null!=i?i:null)},o.open("GET",e),o.withCredentials=!1,o.send()}}function preloadNexFragment(e,t){if(Video.isMobile.any()){if(t>=Math.floor(e.duration()/4))return!1;var i=e.src();if(""==e.getAttribute("data-mode"))i=i.replace("/vne/master.m3u8","/seg-0-v1-a1.ts").replace("/index-v1-a1.m3u8","/seg-0-v1-a1.ts");else{i=i.replace(/,240p|,360p|,480p/gi,"").replace(",,","").replace("mp4//","mp4/").replace("/vne/master.m3u8","/seg-0-v1-a1.ts").replace("/index-v1-a1.m3u8","/seg-0-v1-a1.ts");e.videoHeight()!=e.maxMode&&i.replace("/mp4/","/mp4/"+e.videoHeight()+"p/")}i=i.replace("-0-","-"+t+"-"),e["preloadTS"+e.videoHeight()][t]=1,addPreloadLink(i,preloadNexFragmentCallBack,e)}else{if(t>=e.tech_.sourceHandler_.hlsdata().endSN)return!1;var a=e.tech_.sourceHandler_.hls.streamController.fragCurrent.relurl,o=e.tech_.sourceHandler_.hls.streamController.fragCurrent.sn;e["preloadTS"+e.videoHeight()][t]=1,addPreloadLink(a.replace("-"+o+"-","-"+t+"-"),preloadNexFragmentCallBack,e)}}function checkBuffer(e){switch(e.videoHeight()){case 240:e.maxMaxBufferLengthVal=30;break;case 360:e.maxMaxBufferLengthVal=20;break;case 480:e.maxMaxBufferLengthVal=16;case 720:e.maxMaxBufferLengthVal=12}if(!Video.isMobile.any())try{e.tech_.sourceHandler_.hls.config.maxMaxBufferLength=e.maxMaxBufferLengthVal,Math.floor(e.bufferedEnd()-e.currentTime())>=e.tech_.sourceHandler_.hls.config.maxMaxBufferLength&&e.currentTime()>e.duration()/2&&(e.maxMaxBufferLengthVal=e.tech_.sourceHandler_.hls.config.maxMaxBufferLength=e.duration()-e.currentTime())}catch(e){console.log("not using hls plugins!!!")}if(e.duration()-e.currentTime()<1)return!1;e.paused()?e.stopBuff&&(e.currentTime()>2&&Math.floor(e.bufferedEnd()-e.currentTime())>=e.maxMaxBufferLengthMinVal||Math.floor(e.bufferedEnd()-e.currentTime())>=e.maxMaxBufferLengthMaxVal||e.duration()-e.currentTime()<e.maxMaxBufferLengthMinVal)&&(e.firstBuff=!1,e.stopBuff=!1,e.play(),e.removeClass("vjs-waiting"),e.removeClass("vjs-controls-disabled"),e.addClass("vjs-controls-enabled")):e.firstBuff?e.currentTime()>2&&Math.floor(e.bufferedEnd()-e.currentTime())<e.maxMaxBufferLengthMinVal&&(e.stopBuff=!0,e.pause(),e.removeClass("vjs-controls-enabled"),e.addClass("vjs-controls-disabled"),setTimeout((function(){e.removeClass("vjs-paused"),e.addClass("vjs-waiting")}),100)):e.bufferedEnd()-e.currentTime()<=0&&(e.stopBuff=!0,e.pause(),e.removeClass("vjs-controls-enabled"),e.addClass("vjs-controls-disabled"),setTimeout((function(){e.removeClass("vjs-paused"),e.addClass("vjs-waiting")}),100))}function preloadNexFragmentCallBack(e){e.paused()&&(e["preloadTS"+e.videoHeight()].length>3?6+4*(e["preloadTS"+e.videoHeight()].length-3):2*e["preloadTS"+e.videoHeight()].length)<e.currentTime()+2*e.maxMaxBufferLengthVal&&preloadNexFragment(e,e["preloadTS"+e.videoHeight()].length)}function fadeInVolume(e,t){var i=0,a=t/20;e.fvInt&&clearInterval(e.fvInt),e.fvInt=setInterval((function(){if(i>t)return i=t,e.volume(i),document.getElementById(e.id().replace("media-video-","").replace("_html5_api","")+"_soundTopRight")&&(document.getElementById(e.id().replace("media-video-","").replace("_html5_api","")+"_soundTopRight").style.opacity=0,document.getElementById(e.id().replace("media-video-","").replace("_html5_api","")+"_soundTopRight").innerHTML="Âm lượng "+parseInt(100*i)+"%"),clearInterval(e.fvInt),Video.setStorage("fp-mute",this.muted()),Video.setStorage("fp-volume",this.volume()),Video.setStorage("fp-vlt",(new Date).getTime()),!1;e.volume(i),document.getElementById(e.id().replace("media-video-","").replace("_html5_api","")+"_soundTopRight")&&(document.getElementById(e.id().replace("media-video-","").replace("_html5_api","")+"_soundTopRight").style.opacity=1,document.getElementById(e.id().replace("media-video-","").replace("_html5_api","")+"_soundTopRight").innerHTML="Âm lượng "+parseInt(100*i)+"%"),i+=a}),100)}Video.init(),window.addEventListener("resize",(function(){var e=document.getElementsByClassName("embed_video_new");if(e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a=Video.getDataAttributes(i),o=i.getAttribute("data-ratio");if(o=parseInt(o),5==a.type){var n=9*(r=i.clientWidth)/16;2==o&&(n=4*r/5),void 0!==a.fixheight&&1==a.fixheight&&document.getElementById("parent_fix_height_"+a.vid)&&(n=document.getElementById("parent_fix_height_"+a.vid).offsetHeight),(s=document.getElementById("video-"+a.vid)).style.width="100%",s.style.height=n+"px";var d=document.getElementById("video_parent_"+a.vid);img_video=d.querySelector(".box_img_video img"),img_video&&"object"==typeof img_video&&(img_video.style.height=n+"px")}else if(0==a.type||4==a.type){var r,s;n=9*(r=i.clientWidth)/16;2==o&&(n=4*r/5),void 0!==a.fixheight&&1==a.fixheight&&document.getElementById("parent_fix_height_"+a.vid)&&(n=document.getElementById("parent_fix_height_"+a.vid).offsetHeight),(s=document.getElementById("video-"+a.vid)).style.width="100%",s.style.height=n+"px";var l=document.getElementById("parser_player_"+a.vid);l.style.height=n+"px",l.style.textAlign="left";var c=document.getElementById("flash_player_"+a.vid);c&&(c.style.height=n+"px");d=document.getElementById("video_parent_"+a.vid);img_video=d.querySelector(".box_img_video img"),img_video&&"object"==typeof img_video&&(img_video.style.height=n+"px")}}}));